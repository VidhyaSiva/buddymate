/*! For license information please see main.6f6bd47f49566a78266e.js.LICENSE.txt */
(()=>{var e,t={477:()=>{},2857:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataAccessLayer:()=>g,STORAGE_KEYS:()=>h,dataAccessLayer:()=>b});var r=n(7236);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return f(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),m=u.prototype=c.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=u,f(m,"constructor",u),f(u,"constructor",s),s.displayName="GeneratorFunction",f(u,o,"GeneratorFunction"),f(m),f(m,o,"Generator"),f(m,r,function(){return this}),f(m,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:y}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){f(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},f(e,t,n,r)}function d(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,c,"next",e)}function c(e){d(i,r,o,a,c,"throw",e)}a(void 0)})}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var h={USER_PROFILE:"user_profile",HEALTH_DATA:"health_data",COMMUNICATION_DATA:"communication_data",COMMUNITY_DATA:"community_data",APP_VERSION:"app_version",MIGRATION_VERSION:"migration_version"},g=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=t},t=[{key:"saveUserProfile",value:(J=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.setJSON(h.USER_PROFILE,t,!0);case 1:return e.a(2)}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"getUserProfile",value:(Y=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON(h.USER_PROFILE,!0);case 1:return e.a(2,e.v)}},e,this)})),function(){return Y.apply(this,arguments)})},{key:"updateUserProfile",value:(q=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getUserProfile();case 1:if(n=e.v){e.n=2;break}return e.a(2,null);case 2:return r=s(s(s({},n),t),{},{lastActive:new Date}),e.n=3,this.saveUserProfile(r);case 3:return e.a(2,r)}},e,this)})),function(e){return q.apply(this,arguments)})},{key:"deleteUserProfile",value:(V=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.removeItem(h.USER_PROFILE);case 1:return e.a(2)}},e,this)})),function(){return V.apply(this,arguments)})},{key:"saveHealthData",value:(U=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.setJSON(h.HEALTH_DATA,t,!0);case 1:return e.a(2)}},e,this)})),function(e){return U.apply(this,arguments)})},{key:"getHealthData",value:(W=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON(h.HEALTH_DATA,!0);case 1:return e.a(2,e.v)}},e,this)})),function(){return W.apply(this,arguments)})},{key:"addDailyCheckIn",value:(G=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getHealthData();case 1:if(r=e.v){e.n=2;break}r={dailyCheckIns:[],medicationSchedules:[],medicationLogs:[]};case 2:return(n=r).dailyCheckIns.push(t),e.n=3,this.saveHealthData(n);case 3:return e.a(2)}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"getDailyCheckIns",value:(_=m(l().m(function e(t,n){var r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getHealthData();case 1:if(r=e.v){e.n=2;break}return e.a(2,[]);case 2:return o=r.dailyCheckIns.filter(function(e){return e.userId===t}).sort(function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}),n&&(o=o.slice(0,n)),e.a(2,o)}},e,this)})),function(e,t){return _.apply(this,arguments)})},{key:"addMedicationSchedule",value:(H=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=1,e.n=2,this.getHealthData();case 2:if(r=e.v){e.n=3;break}r={dailyCheckIns:[],medicationSchedules:[],medicationLogs:[]};case 3:return(n=r).medicationSchedules.push(t),e.n=4,this.saveHealthData(n);case 4:e.n=6;break;case 5:throw e.p=5,e.v;case 6:return e.a(2)}},e,this,[[1,5]])})),function(e){return H.apply(this,arguments)})},{key:"updateMedicationSchedule",value:(z=m(l().m(function e(t,n){var r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getHealthData();case 1:if(r=e.v){e.n=2;break}return e.a(2,null);case 2:if(-1!==(o=r.medicationSchedules.findIndex(function(e){return e.id===t}))){e.n=3;break}return e.a(2,null);case 3:return r.medicationSchedules[o]=s(s(s({},r.medicationSchedules[o]),n),{},{updatedAt:new Date}),e.n=4,this.saveHealthData(r);case 4:return e.a(2,r.medicationSchedules[o])}},e,this)})),function(e,t){return z.apply(this,arguments)})},{key:"deleteMedicationSchedule",value:(N=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=1,e.n=2,this.getHealthData();case 2:if(n=e.v){e.n=3;break}return e.a(2,!1);case 3:if(r=n.medicationSchedules.length,n.medicationSchedules=n.medicationSchedules.filter(function(e){return e.id!==t}),!(n.medicationSchedules.length<r)){e.n=5;break}return e.n=4,this.saveHealthData(n);case 4:return e.a(2,!0);case 5:return e.a(2,!1);case 6:throw e.p=6,e.v;case 7:return e.a(2)}},e,this,[[1,6]])})),function(e){return N.apply(this,arguments)})},{key:"getMedicationSchedules",value:(F=m(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getHealthData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:return e.a(2,n.medicationSchedules.filter(function(e){return e.userId===t}))}},e,this)})),function(e){return F.apply(this,arguments)})},{key:"addMedicationLog",value:(M=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getHealthData();case 1:if(r=e.v){e.n=2;break}r={dailyCheckIns:[],medicationSchedules:[],medicationLogs:[]};case 2:return(n=r).medicationLogs.push(t),e.n=3,this.saveHealthData(n);case 3:return e.a(2)}},e,this)})),function(e){return M.apply(this,arguments)})},{key:"getMedicationLogs",value:(L=m(l().m(function e(t,n){var r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getHealthData();case 1:if(r=e.v){e.n=2;break}return e.a(2,[]);case 2:return o=r.medicationLogs.filter(function(e){return e.scheduleId===t}).sort(function(e,t){return new Date(t.scheduledTime).getTime()-new Date(e.scheduledTime).getTime()}),n&&(o=o.slice(0,n)),e.a(2,o)}},e,this)})),function(e,t){return L.apply(this,arguments)})},{key:"saveCommunicationData",value:(B=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.setJSON(h.COMMUNICATION_DATA,t,!0);case 1:return e.a(2)}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"getCommunicationData",value:(R=m(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON(h.COMMUNICATION_DATA,!0);case 1:return t=e.v,e.a(2,t)}},e,this)})),function(){return R.apply(this,arguments)})},{key:"addContact",value:(I=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(r=e.v){e.n=2;break}r={contacts:[],messages:[],videoCalls:[]};case 2:return(n=r).contacts.push(t),e.n=3,this.saveCommunicationData(n);case 3:return e.a(2)}},e,this)})),function(e){return I.apply(this,arguments)})},{key:"updateContact",value:(x=m(l().m(function e(t,n){var r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(r=e.v){e.n=2;break}return e.a(2,null);case 2:if(-1!==(o=r.contacts.findIndex(function(e){return e.id===t}))){e.n=3;break}return e.a(2,null);case 3:return r.contacts[o]=s(s({},r.contacts[o]),n),e.n=4,this.saveCommunicationData(r);case 4:return e.a(2,r.contacts[o])}},e,this)})),function(e,t){return x.apply(this,arguments)})},{key:"getContacts",value:(D=m(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:return t=e.v,n=(null==t?void 0:t.contacts)||[],e.a(2,n)}},e,this)})),function(){return D.apply(this,arguments)})},{key:"deleteContact",value:(P=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(n=e.v){e.n=2;break}return e.a(2,!1);case 2:if(r=n.contacts.length,n.contacts=n.contacts.filter(function(e){return e.id!==t}),!(n.contacts.length<r)){e.n=4;break}return e.n=3,this.saveCommunicationData(n);case 3:return e.a(2,!0);case 4:return e.a(2,!1)}},e,this)})),function(e){return P.apply(this,arguments)})},{key:"addMessage",value:(j=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(r=e.v){e.n=2;break}r={contacts:[],messages:[],videoCalls:[]};case 2:return(n=r).messages.push(t),e.n=3,this.saveCommunicationData(n);case 3:return e.a(2)}},e,this)})),function(e){return j.apply(this,arguments)})},{key:"getMessages",value:(O=m(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:return t=e.v,e.a(2,(null==t?void 0:t.messages)||[])}},e,this)})),function(){return O.apply(this,arguments)})},{key:"getContact",value:(T=m(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(n=e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,n.contacts.find(function(e){return e.id===t})||null)}},e,this)})),function(e){return T.apply(this,arguments)})},{key:"saveContact",value:(C=m(l().m(function e(t){var n,r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(o=e.v){e.n=2;break}o={contacts:[],messages:[],videoCalls:[]};case 2:return(r=(n=o).contacts.findIndex(function(e){return e.id===t.id}))>=0?n.contacts[r]=t:n.contacts.push(t),e.n=3,this.saveCommunicationData(n);case 3:return e.a(2)}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"saveMessage",value:(A=m(l().m(function e(t){var n,r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(o=e.v){e.n=2;break}o={contacts:[],messages:[],videoCalls:[]};case 2:return(r=(n=o).messages.findIndex(function(e){return e.id===t.id}))>=0?n.messages[r]=t:n.messages.push(t),e.n=3,this.saveCommunicationData(n);case 3:return e.a(2)}},e,this)})),function(e){return A.apply(this,arguments)})},{key:"getMessage",value:(E=m(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(n=e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,n.messages.find(function(e){return e.id===t})||null)}},e,this)})),function(e){return E.apply(this,arguments)})},{key:"saveVideoCall",value:(k=m(l().m(function e(t){var n,r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(o=e.v){e.n=2;break}o={contacts:[],messages:[],videoCalls:[]};case 2:return(r=(n=o).videoCalls.findIndex(function(e){return e.id===t.id}))>=0?n.videoCalls[r]=t:n.videoCalls.push(t),e.n=3,this.saveCommunicationData(n);case 3:return e.a(2)}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"getVideoCall",value:(S=m(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunicationData();case 1:if(n=e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,n.videoCalls.find(function(e){return e.id===t})||null)}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"saveCommunityData",value:(w=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.setJSON(h.COMMUNITY_DATA,t,!1);case 1:return e.a(2)}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"getCommunityData",value:(v=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON(h.COMMUNITY_DATA,!1);case 1:return e.a(2,e.v)}},e,this)})),function(){return v.apply(this,arguments)})},{key:"getCommunityResources",value:(b=m(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:if(!t){e.n=3;break}return e.a(2,n.resources.filter(function(e){return e.category===t}));case 3:return e.a(2,n.resources)}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"addActivity",value:(g=m(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityData();case 1:if(r=e.v){e.n=2;break}r={resources:[],activities:[],events:[]};case 2:return(n=r).activities.push(t),e.n=3,this.saveCommunityData(n);case 3:return e.a(2)}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"updateActivity",value:(p=m(l().m(function e(t,n){var r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityData();case 1:if(r=e.v){e.n=2;break}return e.a(2,null);case 2:if(-1!==(o=r.activities.findIndex(function(e){return e.id===t}))){e.n=3;break}return e.a(2,null);case 3:return r.activities[o]=s(s({},r.activities[o]),n),e.n=4,this.saveCommunityData(r);case 4:return e.a(2,r.activities[o])}},e,this)})),function(e,t){return p.apply(this,arguments)})},{key:"getUserActivities",value:(d=m(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:return e.a(2,n.activities.filter(function(e){return e.userId===t}))}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"clearAllData",value:(f=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.clear();case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"getStorageInfo",value:(u=m(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getAllKeys();case 1:return t=e.v,e.a(2,{keys:t,hasData:t.length>0})}},e,this)})),function(){return u.apply(this,arguments)})},{key:"exportData",value:(c=m(l().m(function e(){var t,n,r,o,a,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t={},e.n=1,this.storage.getAllKeys();case 1:n=e.v,r=i(n),e.p=2,r.s();case 3:if((o=r.n()).done){e.n=6;break}return a=o.value,c=a===h.USER_PROFILE||a===h.HEALTH_DATA||a===h.COMMUNICATION_DATA,e.n=4,this.storage.getJSON(a,c);case 4:t[a]=e.v;case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,s=e.v,r.e(s);case 8:return e.p=8,r.f(),e.f(8);case 9:return e.a(2,t)}},e,this,[[2,7,8,9]])})),function(){return c.apply(this,arguments)})},{key:"getItem",value:(a=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.storage.getJSON(t,!1);case 1:return e.a(2,e.v);case 2:return e.p=2,e.v,e.a(2,null)}},e,this,[[0,2]])})),function(e){return a.apply(this,arguments)})},{key:"setItem",value:(o=m(l().m(function e(t,n){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.storage.setJSON(t,n,!1);case 1:e.n=3;break;case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e,t){return o.apply(this,arguments)})}],t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,a,c,u,f,d,p,g,b,v,w,S,k,E,A,C,T,O,j,P,D,x,I,R,B,L,M,F,N,z,H,_,G,W,U,V,q,Y,J}(),b=new g},2884:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addTestMedications:()=>l,clearAllStorageData:()=>d,clearTestMedications:()=>f});var r=n(4720);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof u?r:u,l=Object.create(a.prototype);return c(l,"_invoke",function(n,r,o){var i,a,c,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,a=0,c=e,d.n=n,s}};function m(n,r){for(a=n,c=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(a=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,a=0))}if(o||n>1)return s;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),a=l,c=y;(t=a<2?e:c)||!f;){i||(a?a<3?(a>1&&(d.n=-1),m(a,c)):d.n=c:d.v=c);try{if(u=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==s)break}catch(t){i=e,a=1,c=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),l}var s={};function u(){}function l(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(c(t={},r,function(){return this}),t),m=f.prototype=u.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=f,c(m,"constructor",f),c(f,"constructor",l),l.displayName="GeneratorFunction",c(f,o,"GeneratorFunction"),c(m),c(m,o,"Generator"),c(m,r,function(){return this}),c(m,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:y}})()}function c(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){c(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},c(e,t,n,r)}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)})}}var l=function(){var e=u(a().m(function e(t){var n,o,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,n=0,o=[{medicationName:"Aspirin",dosage:"100mg",frequency:"Daily",times:["08:00"],isCritical:!1},{medicationName:"Vitamin D",dosage:"1000 IU",frequency:"Daily",times:["09:00"],isCritical:!1},{medicationName:"Blood Pressure Med",dosage:"10mg",frequency:"Twice Daily",times:["08:00","20:00"],isCritical:!0}];case 1:if(!(n<o.length)){e.n=6;break}return i=o[n],e.p=2,e.n=3,r.x.createMedicationSchedule(t,i.medicationName,i.dosage,i.frequency,i.times,void 0,i.isCritical);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:n++,e.n=1;break;case 6:e.n=8;break;case 7:throw e.p=7,e.v;case 8:return e.a(2)}},e,null,[[2,4],[0,7]])}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=u(a().m(function e(t){var n,i,c,s,u;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r.x.getMedicationSchedules(t);case 1:n=e.v,i=o(n),e.p=2,i.s();case 3:if((c=i.n()).done){e.n=8;break}return s=c.value,e.p=4,e.n=5,r.x.deleteMedicationSchedule(s.id);case 5:e.v&&0,e.n=7;break;case 6:e.p=6,e.v;case 7:e.n=3;break;case 8:e.n=10;break;case 9:e.p=9,u=e.v,i.e(u);case 10:return e.p=10,i.f(),e.f(10);case 11:e.n=13;break;case 12:throw e.p=12,e.v;case 13:return e.a(2)}},e,null,[[4,6],[2,9,10,11],[0,12]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=u(a().m(function e(){var t,r;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Promise.resolve().then(n.bind(n,2857));case 1:return t=e.v,r=t.dataAccessLayer,e.n=2,r.clearAllData();case 2:e.n=4;break;case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}()},4720:(e,t,n)=>{"use strict";n.d(t,{x:()=>W});var r=n(2857);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return l(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(l(t={},r,function(){return this}),t),m=f.prototype=c.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,l(m,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(m),l(m,o,"Generator"),l(m,r,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:y}})()}function l(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){l(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},l(e,t,n,r)}function f(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,c,"next",e)}function c(e){f(i,r,o,a,c,"throw",e)}a(void 0)})}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function y(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"tokens",new Map),y(this,"permissionStatus",{granted:!1,denied:!1})},t=[{key:"initialize",value:(v=d(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.requestPermissions();case 1:return e.n=2,this.loadStoredTokens();case 2:return e.a(2)}},e,this)})),function(){return v.apply(this,arguments)})},{key:"requestPermissions",value:(b=d(u().m(function e(){var t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"undefined"==typeof window||!("Notification"in window)){e.n=2;break}return e.n=1,Notification.requestPermission();case 1:t=e.v,this.permissionStatus={granted:"granted"===t,denied:"denied"===t,provisional:"default"===t},e.n=3;break;case 2:this.permissionStatus={granted:!0,denied:!1};case 3:return e.a(2,this.permissionStatus);case 4:return e.p=4,e.v,this.permissionStatus={granted:!1,denied:!0},e.a(2,this.permissionStatus)}},e,this,[[0,4]])})),function(){return b.apply(this,arguments)})},{key:"registerDevice",value:(g=d(u().m(function e(t){var n,r,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.permissionStatus.granted){e.n=1;break}return e.a(2,null);case 1:return e.p=1,n=this.generateMockToken(),r=this.detectPlatform(),o={token:n,platform:r,userId:t,createdAt:new Date,isActive:!0},this.tokens.set(t,o),e.n=2,this.saveTokens();case 2:return e.a(2,n);case 3:return e.p=3,e.v,this.tokens.delete(t),e.a(2,null)}},e,this,[[1,3]])})),function(e){return g.apply(this,arguments)})},{key:"sendNotification",value:(h=d(u().m(function e(t,n,r){var o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.permissionStatus.granted){e.n=1;break}return e.a(2,!1);case 1:if((o=this.tokens.get(t))&&o.isActive){e.n=2;break}return e.a(2,!1);case 2:if(e.p=2,i=this.applyPreferences(n,r),!r||!this.isWithinQuietHours(new Date,r)){e.n=3;break}return e.a(2,!1);case 3:return e.n=4,this.deliverNotification(i);case 4:return e.a(2,!0);case 5:return e.p=5,e.v,e.a(2,!1)}},e,this,[[2,5]])})),function(e,t,n){return h.apply(this,arguments)})},{key:"scheduleNotification",value:(p=d(u().m(function e(t,n,r,o){var i,a,c,s=this;return u().w(function(e){for(;;)switch(e.n){case 0:if(i=crypto.randomUUID(),!((a=r.getTime()-Date.now())<=0)){e.n=2;break}return e.n=1,this.sendNotification(t,n,o);case 1:return c=e.v,e.a(2,c?i:null);case 2:return setTimeout(d(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s.sendNotification(t,n,o);case 1:return e.a(2)}},e)})),a),e.a(2,i)}},e,this)})),function(e,t,n,r){return p.apply(this,arguments)})},{key:"cancelScheduledNotification",value:(f=d(u().m(function e(t){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,!0)},e)})),function(e){return f.apply(this,arguments)})},{key:"getPermissionStatus",value:function(){return this.permissionStatus}},{key:"unregisterDevice",value:(l=d(u().m(function e(t){var n;return u().w(function(e){for(;;)switch(e.n){case 0:if(!(n=this.tokens.get(t))){e.n=2;break}return n.isActive=!1,e.n=1,this.saveTokens();case 1:return e.a(2,!0);case 2:return e.a(2,!1)}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"getActiveToken",value:function(e){var t=this.tokens.get(e);return t&&t.isActive?t:null}},{key:"applyPreferences",value:function(e,t){return t?s(s({},e),{},{sound:t.reminderSound&&!1!==e.sound,vibration:t.reminderVibration&&!1!==e.vibration}):e}},{key:"isWithinQuietHours",value:function(e,t){if(!t.quietHoursStart||!t.quietHoursEnd)return!1;var n=60*e.getHours()+e.getMinutes(),r=i(t.quietHoursStart.split(":").map(Number),2),o=r[0],a=r[1],c=i(t.quietHoursEnd.split(":").map(Number),2),s=60*o+a,u=60*c[0]+c[1];return s<u?n>=s&&n<=u:n>=s||n<=u}},{key:"deliverNotification",value:(c=d(u().m(function e(t){return u().w(function(e){for(;;)switch(e.n){case 0:"undefined"!=typeof window&&"Notification"in window&&this.permissionStatus.granted&&new Notification(t.title,{body:t.body,icon:"/icon-192x192.png",badge:"/badge-72x72.png",tag:t.category||"buddy-mate",requireInteraction:"high"===t.priority,silent:!t.sound});case 1:return e.a(2)}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"generateMockToken",value:function(){return"mock_token_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}},{key:"detectPlatform",value:function(){return"undefined"!=typeof window?"web":"android"}},{key:"loadStoredTokens",value:(a=d(u().m(function e(){var t,n;return u().w(function(e){for(;;)switch(e.n){case 0:try{(t=localStorage.getItem("push_tokens"))&&(n=JSON.parse(t),this.tokens=new Map(Object.entries(n)))}catch(e){}case 1:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"saveTokens",value:(o=d(u().m(function e(){var t;return u().w(function(e){for(;;)switch(e.n){case 0:try{t=Object.fromEntries(this.tokens),localStorage.setItem("push_tokens",JSON.stringify(t))}catch(e){}case 1:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"onNotificationTap",value:function(e){}},{key:"getDeliveryStats",value:(r=d(u().m(function e(t){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,{sent:0,delivered:0,failed:0})},e)})),function(e){return r.apply(this,arguments)})}],t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,a,c,l,f,p,h,g,b,v}();new h;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function w(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return E(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(E(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,E(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,E(f,"constructor",u),E(u,"constructor",s),s.displayName="GeneratorFunction",E(u,o,"GeneratorFunction"),E(f),E(f,o,"Generator"),E(f,r,function(){return this}),E(f,"toString",function(){return"[object Generator]"}),(k=function(){return{w:i,m:d}})()}function E(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}E=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){E(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},E(e,t,n,r)}function A(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){A(i,r,o,a,c,"next",e)}function c(e){A(i,r,o,a,c,"throw",e)}a(void 0)})}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var j=function(){function e(){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="scheduledNotifications",o=new Map,(n=O(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,this.dataLayer=new r.DataAccessLayer,this.pushService=new h}return t=e,n=[{key:"initialize",value:(I=C(k().m(function e(){return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.pushService.initialize();case 1:return e.n=2,this.loadScheduledNotifications();case 2:return e.n=3,this.setupRecurringReminders();case 3:return e.a(2)}},e,this)})),function(){return I.apply(this,arguments)})},{key:"getNotificationPreferences",value:(x=C(k().m(function e(t){var n;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.dataLayer.getUserProfile();case 1:if(e.v){e.n=2;break}return e.a(2,this.getDefaultPreferences());case 2:return e.n=3,this.dataLayer.getItem("notification_prefs_".concat(t));case 3:return n=e.v,e.a(2,n||this.getDefaultPreferences())}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"updateNotificationPreferences",value:(D=C(k().m(function e(t,n){return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.dataLayer.setItem("notification_prefs_".concat(t),n);case 1:return e.n=2,this.rescheduleAllNotifications(t);case 2:return e.a(2)}},e,this)})),function(e,t){return D.apply(this,arguments)})},{key:"scheduleMedicationReminders",value:(P=C(k().m(function e(t){var n,r,o,i,a,c,s;return k().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,this.getNotificationPreferences(t);case 1:if((n=e.v).medicationReminders){e.n=2;break}return e.a(2);case 2:return e.n=3,this.dataLayer.getHealthData();case 3:if(null!=(r=e.v)&&r.medicationSchedules){e.n=4;break}return e.a(2);case 4:o=r.medicationSchedules.filter(function(e){return e.isActive}),i=v(o),e.p=5,i.s();case 6:if((a=i.n()).done){e.n=8;break}return c=a.value,e.n=7,this.createMedicationReminders(c,n);case 7:e.n=6;break;case 8:e.n=10;break;case 9:e.p=9,s=e.v,i.e(s);case 10:return e.p=10,i.f(),e.f(10);case 11:return e.a(2)}},e,this,[[5,9,10,11]])})),function(e){return P.apply(this,arguments)})},{key:"scheduleDailyCheckInReminders",value:(j=C(k().m(function e(t){var n,r,o;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getNotificationPreferences(t);case 1:if(e.v.dailyCheckInReminders){e.n=2;break}return e.a(2);case 2:return e.n=3,this.dataLayer.getUserProfile();case 3:if(n=e.v){e.n=4;break}return e.a(2);case 4:return r=this.calculateCheckInReminderTime(n.preferences.reminderFrequency),o={id:"daily_checkin_".concat(t),type:"checkIn",title:"Daily Check-in",body:"How are you feeling today? Take a moment to check in with yourself.",scheduledTime:r,isRecurring:!0,isActive:!0,createdAt:new Date},e.n=5,this.scheduleNotification(o);case 5:return e.a(2)}},e,this)})),function(e){return j.apply(this,arguments)})},{key:"scheduleAppointmentReminders",value:(A=C(k().m(function e(t){var n,r,o;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.dataLayer.getUserProfile();case 1:if(n=e.v){e.n=2;break}return e.a(2);case 2:return e.n=3,this.getNotificationPreferences(n.id);case 3:if(e.v.appointmentReminders){e.n=4;break}return e.a(2);case 4:return r={id:"appointment_24h_".concat(t.id),type:"appointment",title:"Appointment Tomorrow",body:'You have "'.concat(t.title,'" scheduled for tomorrow at ').concat(this.formatTime(t.appointmentTime),"."),scheduledTime:new Date(t.appointmentTime.getTime()-864e5),data:{appointmentId:t.id,reminderType:"24h"},isRecurring:!1,isActive:!0,createdAt:new Date},o={id:"appointment_1h_".concat(t.id),type:"appointment",title:"Appointment Soon",body:'Your appointment "'.concat(t.title,'" is in 1 hour at ').concat(this.formatTime(t.appointmentTime),"."),scheduledTime:new Date(t.appointmentTime.getTime()-36e5),data:{appointmentId:t.id,reminderType:"1h"},isRecurring:!1,isActive:!0,createdAt:new Date},e.n=5,this.scheduleNotification(r);case 5:return e.n=6,this.scheduleNotification(o);case 6:return e.a(2)}},e,this)})),function(e){return A.apply(this,arguments)})},{key:"scheduleFamilyConnectionSuggestions",value:(E=C(k().m(function e(t){var n,r;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getNotificationPreferences(t);case 1:if(e.v.familyConnectionSuggestions){e.n=2;break}return e.a(2);case 2:return e.n=3,this.getLastFamilyConnectionTime(t);case 3:if(n=e.v,!(this.getDaysSince(n)>=3)){e.n=4;break}return r={id:"family_connection_".concat(t,"_").concat(Date.now()),type:"familyConnection",title:"Stay Connected",body:"It's been a while since you connected with family. Would you like to reach out?",scheduledTime:new Date(Date.now()+36e5),isRecurring:!1,isActive:!0,createdAt:new Date},e.n=4,this.scheduleNotification(r);case 4:return e.a(2)}},e,this)})),function(e){return E.apply(this,arguments)})},{key:"isWithinQuietHours",value:function(e,t){if(!t.quietHoursStart||!t.quietHoursEnd)return!1;var n=60*e.getHours()+e.getMinutes(),r=b(t.quietHoursStart.split(":").map(Number),2),o=r[0],i=r[1],a=b(t.quietHoursEnd.split(":").map(Number),2),c=60*o+i,s=60*a[0]+a[1];return c<s?n>=c&&n<=s:n>=c||n<=s}},{key:"createMedicationReminders",value:(S=C(k().m(function e(t,n){var r,o,i,a,c,s,u,l,f,d;return k().w(function(e){for(;;)switch(e.p=e.n){case 0:r=v(t.times),e.p=1,r.s();case 2:if((o=r.n()).done){e.n=4;break}return i=o.value,a=i.split(":").map(Number),c=b(a,2),s=c[0],u=c[1],(l=new Date).setHours(s,u,0,0),l<=new Date&&l.setDate(l.getDate()+1),f={id:"medication_".concat(t.id,"_").concat(i),type:"medication",title:"Medication Reminder",body:"Time to take your ".concat(t.medicationName," (").concat(t.dosage,")"),scheduledTime:l,data:{scheduleId:t.id,medicationName:t.medicationName},isRecurring:!0,isActive:!0,createdAt:new Date},e.n=3,this.scheduleNotification(f);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,d=e.v,r.e(d);case 6:return e.p=6,r.f(),e.f(6);case 7:return e.a(2)}},e,this,[[1,5,6,7]])})),function(e,t){return S.apply(this,arguments)})},{key:"scheduleNotification",value:(w=C(k().m(function e(t){var n,r,o;return k().w(function(e){for(;;)switch(e.n){case 0:return this.scheduledNotifications.set(t.id,t),e.n=1,this.saveScheduledNotifications();case 1:return e.n=2,this.dataLayer.getUserProfile();case 2:if(n=e.v){e.n=3;break}return e.a(2);case 3:return e.n=4,this.getNotificationPreferences(n.id);case 4:return r=e.v,o={title:t.title,body:t.body,data:t.data,sound:r.reminderSound,vibration:r.reminderVibration,priority:"medication"===t.type?"high":"normal",category:t.type},e.n=5,this.pushService.scheduleNotification(n.id,o,t.scheduledTime,r);case 5:case 6:return e.a(2)}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"calculateCheckInReminderTime",value:function(e){var t=new Date,n=new Date;return n.setHours(9,0,0,0),n<=t&&n.setDate(n.getDate()+1),n}},{key:"getLastFamilyConnectionTime",value:(g=C(k().m(function e(t){var n,r,o,i,a,c,s;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.dataLayer.getCommunicationData();case 1:if(null!=(a=e.v)&&null!==(n=a.messages)&&void 0!==n&&n.length||null!=a&&null!==(r=a.videoCalls)&&void 0!==r&&r.length){e.n=2;break}return e.a(2,new Date(0));case 2:return c=(null===(o=a.messages)||void 0===o?void 0:o.reduce(function(e,t){return t.sentAt>e?t.sentAt:e},new Date(0)))||new Date(0),s=(null===(i=a.videoCalls)||void 0===i?void 0:i.reduce(function(e,t){return t.startTime>e?t.startTime:e},new Date(0)))||new Date(0),e.a(2,c>s?c:s)}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"getDaysSince",value:function(e){var t=new Date,n=Math.abs(t.getTime()-e.getTime());return Math.ceil(n/864e5)}},{key:"formatTime",value:function(e){return e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}},{key:"getDefaultPreferences",value:function(){return{medicationReminders:!0,dailyCheckInReminders:!0,appointmentReminders:!0,familyConnectionSuggestions:!0,reminderSound:!0,reminderVibration:!0,quietHoursStart:"22:00",quietHoursEnd:"08:00"}}},{key:"loadScheduledNotifications",value:(p=C(k().m(function e(){var t;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.dataLayer.getItem("scheduled_notifications");case 1:(t=e.v)&&(this.scheduledNotifications=new Map(Object.entries(t)));case 2:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"saveScheduledNotifications",value:(y=C(k().m(function e(){var t;return k().w(function(e){for(;;)switch(e.n){case 0:return t=Object.fromEntries(this.scheduledNotifications),e.n=1,this.dataLayer.setItem("scheduled_notifications",t);case 1:return e.a(2)}},e,this)})),function(){return y.apply(this,arguments)})},{key:"setupRecurringReminders",value:(m=C(k().m(function e(){var t;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.dataLayer.getUserProfile();case 1:if(t=e.v){e.n=2;break}return e.a(2);case 2:return e.n=3,this.scheduleMedicationReminders(t.id);case 3:return e.n=4,this.scheduleDailyCheckInReminders(t.id);case 4:return e.n=5,this.scheduleFamilyConnectionSuggestions(t.id);case 5:return e.a(2)}},e,this)})),function(){return m.apply(this,arguments)})},{key:"rescheduleAllNotifications",value:(d=C(k().m(function e(t){return k().w(function(e){for(;;)switch(e.n){case 0:return this.scheduledNotifications.clear(),e.n=1,this.setupRecurringReminders();case 1:return e.a(2)}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"cancelNotification",value:(f=C(k().m(function e(t){return k().w(function(e){for(;;)switch(e.n){case 0:return this.scheduledNotifications.delete(t),e.n=1,this.saveScheduledNotifications();case 1:return e.a(2)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"getScheduledNotifications",value:(l=C(k().m(function e(){return k().w(function(e){for(;;)if(0===e.n)return e.a(2,Array.from(this.scheduledNotifications.values()))},e,this)})),function(){return l.apply(this,arguments)})},{key:"markNotificationDelivered",value:(u=C(k().m(function e(t){var n;return k().w(function(e){for(;;)switch(e.n){case 0:if(!(n=this.scheduledNotifications.get(t))||n.isRecurring){e.n=1;break}return this.scheduledNotifications.delete(t),e.n=1,this.saveScheduledNotifications();case 1:return e.a(2)}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"registerForPushNotifications",value:(s=C(k().m(function e(t){return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.pushService.registerDevice(t);case 1:return e.a(2,e.v)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"unregisterFromPushNotifications",value:(c=C(k().m(function e(t){return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.pushService.unregisterDevice(t);case 1:return e.a(2,e.v)}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"sendImmediateNotification",value:(a=C(k().m(function e(t,n,r,o){var i,a;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getNotificationPreferences(t);case 1:return i=e.v,a={title:n,body:r,data:o,sound:i.reminderSound,vibration:i.reminderVibration,priority:"high",category:"immediate"},e.n=2,this.pushService.sendNotification(t,a,i);case 2:return e.a(2,e.v)}},e,this)})),function(e,t,n,r){return a.apply(this,arguments)})},{key:"getPushNotificationPermissions",value:function(){return this.pushService.getPermissionStatus()}},{key:"cleanup",value:(i=C(k().m(function e(){return k().w(function(e){for(;;)switch(e.n){case 0:return this.scheduledNotifications.clear(),e.n=1,this.saveScheduledNotifications();case 1:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})}],o=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],n&&T(t.prototype,n),o&&T(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o,i,a,c,s,u,l,f,d,m,y,p,g,w,S,E,A,j,P,D,x,I}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function B(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function M(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return F(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(F(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,F(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,F(f,"constructor",u),F(u,"constructor",s),s.displayName="GeneratorFunction",F(u,o,"GeneratorFunction"),F(f),F(f,o,"Generator"),F(f,r,function(){return this}),F(f,"toString",function(){return"[object Generator]"}),(M=function(){return{w:i,m:d}})()}function F(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}F=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){F(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},F(e,t,n,r)}function N(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){N(i,r,o,a,c,"next",e)}function c(e){N(i,r,o,a,c,"throw",e)}a(void 0)})}}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function _(e,t,n){return(t=G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}var W=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"activeReminders",new Map),_(this,"reminderCallbacks",new Map),this.notificationService=j.getInstance()}return t=e,n=[{key:"initialize",value:(w=z(M().m(function e(){return M().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(){return w.apply(this,arguments)})},{key:"createMedicationSchedule",value:(v=z(M().m(function e(t,n,o,i,a,c){var s,u,l=arguments;return M().w(function(e){for(;;)switch(e.p=e.n){case 0:return s=l.length>6&&void 0!==l[6]&&l[6],u={id:crypto.randomUUID(),userId:t,medicationName:n,dosage:o,frequency:i,times:a,photo:c,isActive:!0,createdAt:new Date,updatedAt:new Date},e.p=1,e.n=2,r.dataAccessLayer.addMedicationSchedule(u);case 2:e.n=4;break;case 3:throw e.p=3,e.v;case 4:return e.p=4,e.n=5,this.scheduleReminders(u,s);case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.p=7,e.n=8,this.notificationService.scheduleMedicationReminders(t);case 8:e.n=10;break;case 9:e.p=9,e.v;case 10:return e.a(2,u)}},e,this,[[7,9],[4,6],[1,3]])})),function(e,t,n,r,o,i){return v.apply(this,arguments)})},{key:"updateMedicationSchedule",value:(b=z(M().m(function e(t,n){var o,i,a=arguments;return M().w(function(e){for(;;)switch(e.n){case 0:return o=a.length>2&&void 0!==a[2]&&a[2],e.n=1,r.dataAccessLayer.updateMedicationSchedule(t,n);case 1:if(!(i=e.v)){e.n=3;break}if(this.clearReminders(t),!i.isActive){e.n=3;break}return e.n=2,this.scheduleReminders(i,o);case 2:return e.n=3,this.notificationService.scheduleMedicationReminders(i.userId);case 3:return e.a(2,i)}},e,this)})),function(e,t){return b.apply(this,arguments)})},{key:"getMedicationSchedules",value:(g=z(M().m(function e(t){return M().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.dataAccessLayer.getMedicationSchedules(t);case 1:return e.a(2,e.v)}},e)})),function(e){return g.apply(this,arguments)})},{key:"scheduleReminders",value:(h=z(M().m(function e(t){var n,r,o,i,a,c,s,u,l,f,d,m=arguments;return M().w(function(e){for(;;)switch(e.n){case 0:n=m.length>1&&void 0!==m[1]&&m[1],r=new Date,o=R(t.times);try{for(o.s();!(i=o.n()).done;)a=i.value,c=a.split(":").map(Number),s=I(c,2),u=s[0],l=s[1],(f=new Date).setHours(u,l,0,0),f<=r&&f.setDate(f.getDate()+1),d={id:crypto.randomUUID(),scheduleId:t.id,medicationName:t.medicationName,dosage:t.dosage,scheduledTime:f,isActive:!0,isCritical:n},this.scheduleReminder(d)}catch(e){o.e(e)}finally{o.f()}case 1:return e.a(2)}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"scheduleReminder",value:function(e){var t=this,n=new Date,r=e.scheduledTime.getTime()-n.getTime();if(r>0){var o=setTimeout(function(){t.triggerReminder(e)},r);this.activeReminders.set(e.id,o)}}},{key:"triggerReminder",value:(p=z(M().m(function e(t){var n,r;return M().w(function(e){for(;;)switch(e.n){case 0:(n=this.reminderCallbacks.get(t.scheduleId))&&n(t),r=x(x({},t),{},{id:crypto.randomUUID(),scheduledTime:new Date(t.scheduledTime.getTime()+864e5)}),this.scheduleReminder(r),this.activeReminders.delete(t.id);case 1:return e.a(2)}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"onMedicationReminder",value:function(e,t){this.reminderCallbacks.set(e,t)}},{key:"logMedicationTaken",value:(y=z(M().m(function e(t,n,o){var i;return M().w(function(e){for(;;)switch(e.n){case 0:return i={id:crypto.randomUUID(),scheduleId:t,scheduledTime:n,takenAt:new Date,status:"taken",notes:o},e.n=1,r.dataAccessLayer.addMedicationLog(i);case 1:return e.a(2,i)}},e)})),function(e,t,n){return y.apply(this,arguments)})},{key:"logMedicationSkipped",value:(m=z(M().m(function e(t,n,o){var i;return M().w(function(e){for(;;)switch(e.n){case 0:return i={id:crypto.randomUUID(),scheduleId:t,scheduledTime:n,status:"skipped",notes:o},e.n=1,r.dataAccessLayer.addMedicationLog(i);case 1:return e.a(2,i)}},e)})),function(e,t,n){return m.apply(this,arguments)})},{key:"logMedicationMissed",value:(d=z(M().m(function e(t,n){var o;return M().w(function(e){for(;;)switch(e.n){case 0:return o={id:crypto.randomUUID(),scheduleId:t,scheduledTime:n,status:"missed"},e.n=1,r.dataAccessLayer.addMedicationLog(o);case 1:return e.n=2,this.checkForEscalation(t);case 2:return e.a(2,o)}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"getWeeklyAdherence",value:(f=z(M().m(function e(t,n){var o,i,a,c,s,u,l,f,d,m,y,p,h,g,b,v;return M().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,this.getMedicationSchedules(t);case 1:o=e.v,i=[],a=n||this.getWeekStart(new Date),(c=new Date(a)).setDate(c.getDate()+6),c.setHours(23,59,59,999),s=R(o),e.p=2,s.s();case 3:if((u=s.n()).done){e.n=6;break}return l=u.value,e.n=4,r.dataAccessLayer.getMedicationLogs(l.id);case 4:f=e.v,d=f.filter(function(e){var t=new Date(e.scheduledTime);return t>=a&&t<=c}),m=l.times.length,y=7*m,p=d.filter(function(e){return"taken"===e.status}).length,h=d.filter(function(e){return"missed"===e.status}).length,g=d.filter(function(e){return"skipped"===e.status}).length,b=y>0?Math.round(p/y*100):0,i.push({scheduleId:l.id,medicationName:l.medicationName,totalDoses:y,takenDoses:p,missedDoses:h,skippedDoses:g,adherencePercentage:b,weekStart:a,weekEnd:c});case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,v=e.v,s.e(v);case 8:return e.p=8,s.f(),e.f(8);case 9:return e.a(2,i)}},e,this,[[2,7,8,9]])})),function(e,t){return f.apply(this,arguments)})},{key:"checkForEscalation",value:(l=z(M().m(function e(t){var n,o,i,a,c,s,u;return M().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.dataAccessLayer.getMedicationLogs(t,10);case 1:if(n=e.v,o=n.filter(function(e){return"missed"===e.status}),i=new Date(Date.now()-864e5),!((a=o.filter(function(e){return new Date(e.scheduledTime)>=i})).length>=2)){e.n=3;break}return e.n=2,r.dataAccessLayer.getHealthData();case 2:if(c=e.v,!(s=null==c?void 0:c.medicationSchedules.find(function(e){return e.id===t}))){e.n=3;break}return u={scheduleId:t,medicationName:s.medicationName,missedTime:new Date(a[0].scheduledTime),consecutiveMisses:a.length,shouldEscalate:!0},e.n=3,this.escalateToEmergencyContacts(u);case 3:return e.a(2)}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"escalateToEmergencyContacts",value:(u=z(M().m(function e(t){var n,o,i,a;return M().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r.dataAccessLayer.getCommunicationData();case 1:if(n=e.v,(o=(null==n?void 0:n.contacts.filter(function(e){return e.isEmergencyContact}))||[]).length>0){i=R(o);try{for(i.s();!(a=i.n()).done;)a.value}catch(e){i.e(e)}finally{i.f()}}e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return u.apply(this,arguments)})},{key:"getTodayReminders",value:(s=z(M().m(function e(t){var n,r,o,i,a,c,s,u,l,f,d,m,y;return M().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getMedicationSchedules(t);case 1:n=e.v,new Date,r=[],o=R(n.filter(function(e){return e.isActive}));try{for(o.s();!(i=o.n()).done;){a=i.value,c=R(a.times);try{for(c.s();!(s=c.n()).done;)u=s.value,l=u.split(":").map(Number),f=I(l,2),d=f[0],m=f[1],(y=new Date).setHours(d,m,0,0),r.push({id:crypto.randomUUID(),scheduleId:a.id,medicationName:a.medicationName,dosage:a.dosage,scheduledTime:y,isActive:!0,isCritical:!1})}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}return e.a(2,r.sort(function(e,t){return e.scheduledTime.getTime()-t.scheduledTime.getTime()}))}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"clearReminders",value:function(e){var t,n=R(this.activeReminders.entries());try{for(n.s();!(t=n.n()).done;){var r=I(t.value,2),o=r[0],i=r[1];clearTimeout(i),this.activeReminders.delete(o)}}catch(e){n.e(e)}finally{n.f()}this.reminderCallbacks.delete(e)}},{key:"getWeekStart",value:function(e){var t=new Date(e),n=t.getDay(),r=t.getDate()-n;return t.setDate(r),t.setHours(0,0,0,0),t}},{key:"deactivateMedicationSchedule",value:(c=z(M().m(function e(t){return M().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.dataAccessLayer.updateMedicationSchedule(t,{isActive:!1,updatedAt:new Date});case 1:if(!e.v){e.n=2;break}return this.clearReminders(t),e.a(2,!0);case 2:return e.a(2,!1)}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"deleteMedicationSchedule",value:(a=z(M().m(function e(t){var n;return M().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=1,this.clearReminders(t),e.n=2,r.dataAccessLayer.deleteMedicationSchedule(t);case 2:return n=e.v,e.a(2,n);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return a.apply(this,arguments)})},{key:"getAdherenceInsights",value:(i=z(M().m(function e(t){var n,r,o,i;return M().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getWeeklyAdherence(t);case 1:if(n=e.v,r=[],0!==n.length){e.n=2;break}return r.push("Set up your medication schedule to track adherence."),e.a(2,r);case 2:return(o=n.reduce(function(e,t){return e+t.adherencePercentage},0)/n.length)>=90?r.push("Excellent medication adherence! Keep up the great work! 🌟"):o>=75?r.push("Good medication adherence. Try to maintain consistency."):o>=50?r.push("Your medication adherence could improve. Consider setting more reminders."):r.push("Let's work on improving your medication routine. Consider talking to your doctor."),(i=n.filter(function(e){return e.adherencePercentage<70})).length>0&&r.push("Pay special attention to: ".concat(i.map(function(e){return e.medicationName}).join(", "))),e.a(2,r)}},e,this)})),function(e){return i.apply(this,arguments)})}],o=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],n&&H(t.prototype,n),o&&H(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o,i,a,c,s,u,l,f,d,m,y,p,h,g,b,v,w}())},6495:(e,t,n)=>{"use strict";var r=n(1646),o=n(6540),i=n(9176),a=n(8997),c=n(3384),s=n(8444),u=n(5789),l=n(969),f=n(4650),d=n(8506);var m={isScreenReaderEnabled:!1,isReduceMotionEnabled:!1,isReduceTransparencyEnabled:!1,fontScale:1,isHighContrastEnabled:!1,colorScheme:"light",isSwitchControlEnabled:!1,isVoiceControlEnabled:!1,touchAccommodations:{holdDuration:500,tapAssistance:!1,stickyKeys:!1},preferredFontSize:"normal",animationsEnabled:!0,hapticFeedbackEnabled:!0,audioDescriptionsEnabled:!1},y=(0,o.createContext)({settings:m,updateSettings:function(){},resetSettings:function(){},getAccessibilityLabel:function(e){return e},announceForScreenReader:function(){},isScreenReaderEnabled:function(){return!1},getContrastRatio:function(){return 4.5},validateAccessibility:function(){return!0}}),p=function(){var e=(0,o.useContext)(y);return e||{settings:m,updateSettings:function(){},resetSettings:function(){},getAccessibilityLabel:function(e){return e},announceForScreenReader:function(){},isScreenReaderEnabled:function(){return!1},getContrastRatio:function(){return 4.5},validateAccessibility:function(){return!0}}};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={colors:{primary:"#007AFF",primaryDark:"#0056CC",primaryLight:"#4DA6FF",secondary:"#5856D6",secondaryDark:"#3634A3",secondaryLight:"#7D7AFF",background:"#FFFFFF",surface:"#F2F2F7",card:"#FFFFFF",text:"#000000",textSecondary:"#6C6C70",textDisabled:"#8E8E93",success:"#34C759",warning:"#FF9500",error:"#FF3B30",info:"#007AFF",link:"#007AFF",linkVisited:"#5856D6",border:"#E5E5EA",borderFocus:"#007AFF",emergency:"#FF3B30",emergencyDark:"#D70015"},fonts:{tiny:14,small:16,medium:18,large:20,xlarge:24,xxlarge:28,display:32},spacing:{xs:4,sm:8,md:16,lg:24,xl:32,xxl:48},borderRadius:{small:4,medium:8,large:12},touchTargets:{minimum:44,comfortable:48,large:56},animations:{duration:{fast:150,normal:300,slow:500},easing:"ease-in-out"}},S=b(b({},w),{},{colors:b(b({},w.colors),{},{primary:"#0A84FF",primaryDark:"#0056CC",primaryLight:"#4DA6FF",secondary:"#5E5CE6",secondaryDark:"#3634A3",secondaryLight:"#7D7AFF",background:"#000000",surface:"#1C1C1E",card:"#2C2C2E",text:"#FFFFFF",textSecondary:"#8E8E93",textDisabled:"#6C6C70",border:"#38383A",borderFocus:"#0A84FF"})}),k=b(b({},w),{},{colors:{primary:"#0000FF",primaryDark:"#000080",primaryLight:"#4040FF",secondary:"#800080",secondaryDark:"#400040",secondaryLight:"#C040C0",background:"#FFFFFF",surface:"#F0F0F0",card:"#FFFFFF",text:"#000000",textSecondary:"#000000",textDisabled:"#666666",success:"#008000",warning:"#FF8000",error:"#FF0000",info:"#0000FF",link:"#0000FF",linkVisited:"#800080",border:"#000000",borderFocus:"#0000FF",emergency:"#FF0000",emergencyDark:"#CC0000"},fonts:{tiny:16,small:18,medium:20,large:24,xlarge:28,xxlarge:32,display:36}}),E=function(e){var t;switch(e.colorScheme){case"dark":t=S;break;case"high-contrast":t=k;break;default:t=w}var n=A(e),r={tiny:Math.round(t.fonts.tiny*n),small:Math.round(t.fonts.small*n),medium:Math.round(t.fonts.medium*n),large:Math.round(t.fonts.large*n),xlarge:Math.round(t.fonts.xlarge*n),xxlarge:Math.round(t.fonts.xxlarge*n),display:Math.round(t.fonts.display*n)},o=e.isSwitchControlEnabled?1.2:1,i={minimum:Math.round(t.touchTargets.minimum*o),comfortable:Math.round(t.touchTargets.comfortable*o),large:Math.round(t.touchTargets.large*o)},a=e.isReduceMotionEnabled?.1:1,c={duration:{fast:Math.round(t.animations.duration.fast*a),normal:Math.round(t.animations.duration.normal*a),slow:Math.round(t.animations.duration.slow*a)},easing:t.animations.easing};return b(b({},t),{},{fonts:r,touchTargets:i,animations:c})},A=function(e){var t=e.fontScale;switch(e.preferredFontSize){case"large":t*=1.2;break;case"extra-large":t*=1.5}return Math.max(1,Math.min(2,t))},C=function(e,t,n){var r={fontSize:t.fonts[e],color:t.colors.text,fontFamily:"System"};return(n.isHighContrastEnabled||"high-contrast"===n.colorScheme)&&(r.fontWeight="600"),n.isScreenReaderEnabled&&(r.lineHeight=1.4*r.fontSize),r},T=function(e,t,n){var r=t.touchTargets["small"===e?"minimum":"large"===e?"large":"comfortable"],o=b({minHeight:r,minWidth:r,paddingHorizontal:t.spacing.md,paddingVertical:t.spacing.sm,borderRadius:t.borderRadius.medium,justifyContent:"center",alignItems:"center",flexDirection:"row"},"undefined"!=typeof window&&{cursor:"pointer",touchAction:"manipulation"});return n.isSwitchControlEnabled&&(o.margin=t.spacing.sm),o};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(null,arguments)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){var t=e.title,n=e.onPress,r=e.variant,i=void 0===r?"primary":r,a=e.size,c=void 0===a?"medium":a,s=e.disabled,u=void 0!==s&&s,m=e.accessibilityLabel,y=e.accessibilityHint,h=e.accessibilityRole,g=void 0===h?"button":h,b=e.accessibilityActions,v=e.onAccessibilityAction,w=e.testID,S=e.hapticFeedback,k=void 0===S||S,A=e.announceForAccessibility,O=p().settings,P=E(O),x=[T(c,P,O),R(i,P,O),u&&L(P)],I=[C("medium",P,O),B(i,P,O),u&&M(P)],F=D({accessible:!0,accessibilityRole:g,accessibilityLabel:m||t,accessibilityHint:y,accessibilityState:{disabled:u,selected:"primary"===i},accessibilityActions:b,onAccessibilityAction:v},A&&{accessibilityLiveRegion:"polite",accessibilityValue:{text:A}});return o.createElement(f.A,j({style:x,onPress:function(){if(k&&O.hapticFeedbackEnabled&&!u)try{l.A.vibrate(50)}catch(e){}n()},disabled:u,testID:w,activeOpacity:O.isReduceMotionEnabled?1:.7,delayLongPress:O.touchAccommodations.holdDuration},F),o.createElement(d.A,{style:I},t))},R=function(e,t,n){var r={borderWidth:2};switch(e){case"primary":return D(D({},r),{},{backgroundColor:t.colors.primary,borderColor:t.colors.primary});case"secondary":return D(D({},r),{},{backgroundColor:t.colors.background,borderColor:t.colors.primary});case"emergency":return D(D({},r),{},{backgroundColor:t.colors.emergency,borderColor:t.colors.emergency});default:return r}},B=function(e,t,n){var r={fontWeight:"600",textAlign:"center"};switch(e){case"primary":case"emergency":return D(D({},r),{},{color:t.colors.background});case"secondary":return D(D({},r),{},{color:t.colors.primary});default:return D(D({},r),{},{color:t.colors.text})}},L=function(e){return{backgroundColor:e.colors.surface,borderColor:e.colors.border}},M=function(e){return{color:e.colors.textDisabled}};function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(null,arguments)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){var t=e.children,n=e.onPress,r=e.variant,a=void 0===r?"default":r,c=e.padding,s=void 0===c?"medium":c,u=e.accessible,d=void 0===u||u,m=e.accessibilityLabel,y=e.accessibilityHint,h=e.accessibilityRole,g=e.accessibilityActions,b=e.onAccessibilityAction,v=e.testID,w=e.style,S=e.hapticFeedback,k=void 0===S||S,A=e.focusable,C=void 0===A||A,T=p().settings,O=E(T),j=[W(O,T),U(a,O,T),V(s,O),n&&q(O,T),w],P=n?f.A:i.A,D=d?H({accessible:!0,accessibilityLabel:m,accessibilityHint:y,accessibilityRole:h||(n?"button":"none"),accessibilityActions:g,onAccessibilityAction:b,testID:v,focusable:C&&void 0!==n},n&&{activeOpacity:T.isReduceMotionEnabled?1:.8,delayLongPress:T.touchAccommodations.holdDuration}):{};return o.createElement(P,N({style:j,onPress:function(){n&&(k&&T.hapticFeedbackEnabled&&l.A.vibrate(50),n())}},D),t)},W=function(e,t){return{borderRadius:e.borderRadius.medium,backgroundColor:e.colors.card,minHeight:t.isSwitchControlEnabled?e.touchTargets.large:e.touchTargets.minimum}},U=function(e,t,n){var r={};switch(e){case"elevated":return H(H({},r),{},{shadowColor:t.colors.text,shadowOffset:{width:0,height:2},shadowOpacity:n.isReduceTransparencyEnabled?.2:.1,shadowRadius:4,elevation:3});case"outlined":return H(H({},r),{},{borderWidth:n.isHighContrastEnabled?2:1,borderColor:t.colors.border});default:return r}},V=function(e,t){switch(e){case"small":return{padding:t.spacing.sm};case"large":return{padding:t.spacing.lg};default:return{padding:t.spacing.md}}},q=function(e,t){return{margin:t.isSwitchControlEnabled?e.spacing.xs:0}};function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(null,arguments)}var J=function(e){var t=e.children,n=e.variant,r=void 0===n?"body":n,i=e.color,a=void 0===i?"primary":i,c=e.align,s=void 0===c?"left":c,u=e.weight,l=void 0===u?"normal":u,f=e.accessible,m=void 0===f||f,y=e.accessibilityLabel,h=e.accessibilityHint,g=e.accessibilityRole,b=e.accessibilityLanguage,v=e.accessibilityLiveRegion,w=e.testID,S=e.style,k=e.numberOfLines,A=e.adjustsFontSizeToFit,T=void 0!==A&&A,O=e.minimumFontScale,j=void 0===O?.5:O,P=e.allowFontScaling,D=void 0===P||P,x=p().settings,I=E(x),R=K(r),B=[C(R,I,x),Q(a,I),X(s),Z(l,x),S],L=m?{accessible:!0,accessibilityLabel:y||("string"==typeof t?t:void 0),accessibilityHint:h,accessibilityRole:g||$(r),accessibilityLanguage:b,accessibilityLiveRegion:v,testID:w}:{};return o.createElement(d.A,Y({style:B,numberOfLines:k,adjustsFontSizeToFit:T,minimumFontScale:j,allowFontScaling:D&&!x.isScreenReaderEnabled},L),t)},K=function(e){switch(e){case"display":return"display";case"title":case"heading1":return"xxlarge";case"title2":case"heading2":return"xlarge";case"heading3":return"large";case"caption":return"small";default:return"medium"}},$=function(e){return e.startsWith("heading")||"title"===e||"title2"===e?"header":"text"},Q=function(e,t){switch(e){case"secondary":return{color:t.colors.textSecondary};case"success":return{color:t.colors.success};case"warning":return{color:t.colors.warning};case"error":return{color:t.colors.error};case"disabled":return{color:t.colors.textDisabled};default:return{color:t.colors.text}}},X=function(e){return{textAlign:e}},Z=function(e,t){var n;switch(e){case"medium":n="500";break;case"semibold":n="600";break;case"bold":n="700";break;default:n="400"}if(t.isHighContrastEnabled||"high-contrast"===t.colorScheme){n={400:"500",500:"600",600:"700",700:"800"}[n]||n}return{fontWeight:n}},ee=n(5782);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.value,n=e.onChangeText,r=e.placeholder,a=e.label,c=e.error,s=e.keyboardType,u=void 0===s?"default":s,l=e.secureTextEntry,f=void 0!==l&&l,d=e.multiline,m=void 0!==d&&d,y=e.numberOfLines,p=void 0===y?1:y,h=e.maxLength,g=e.editable,b=void 0===g||g,v=e.accessibilityLabel,w=e.accessibilityHint,S=e.testID,k=e.style,E=e.inputStyle,A=te((0,o.useState)(!1),2),C=A[0],T=A[1],O=[oe.container,k],j=[oe.input,C&&oe.inputFocused,c&&oe.inputError,!b&&oe.inputDisabled,m&&oe.inputMultiline,E],P=v||a||r,D=w||(c?"Error: ".concat(c):void 0);return o.createElement(i.A,{style:O},a&&o.createElement(J,{variant:"body",weight:"medium",style:oe.label,accessibilityRole:"none"},a),o.createElement(ee.A,{style:j,value:t,onChangeText:n,placeholder:r,placeholderTextColor:"#8E8E93",keyboardType:u,secureTextEntry:f,multiline:m,numberOfLines:m?p:1,maxLength:h,editable:b,onFocus:function(){return T(!0)},onBlur:function(){return T(!1)},accessible:!0,accessibilityLabel:P,accessibilityHint:D,accessibilityRole:"none",testID:S,hitSlop:{top:8,bottom:8,left:8,right:8}}),c&&o.createElement(J,{variant:"caption",color:"error",style:oe.errorText,accessibilityRole:"alert",accessibilityLiveRegion:"polite"},c))},oe=a.A.create({container:{marginVertical:8},label:{marginBottom:8,color:"#000000"},input:{minHeight:48,paddingHorizontal:16,paddingVertical:12,fontSize:18,lineHeight:24,backgroundColor:"#FFFFFF",borderWidth:2,borderColor:"#E5E5EA",borderRadius:8,color:"#000000"},inputFocused:{borderColor:"#007AFF",backgroundColor:"#FFFFFF"},inputError:{borderColor:"#FF3B30",backgroundColor:"#FFF5F5"},inputDisabled:{backgroundColor:"#F2F2F7",color:"#8E8E93",borderColor:"#E5E5EA"},inputMultiline:{minHeight:96,paddingTop:12,textAlignVertical:"top"},errorText:{marginTop:4,marginLeft:4}});function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e){var t=e.onEmergencyPress,n=e.onHealthPress,r=e.onFamilyPress,l=e.onActivitiesPress,f=e.onCommunityPress,d=e.onMedicationPress,m=ie((0,o.useState)(new Date),2),y=m[0],p=m[1],h=ie((0,o.useState)({mood:"unknown",lastCheckIn:null}),2),g=h[0],b=(h[1],c.A.get("window").width),v=b>=768,w=b>=1024,S=function(){return a.A.flatten(v?[se.functionCard,se.tabletCard]:se.functionCard)};(0,o.useEffect)(function(){var e=setInterval(function(){p(new Date)},6e4);return function(){return clearInterval(e)}},[]);var k="72°F",E="Sunny",A="☀️";return o.createElement(s.A,{style:se.container},o.createElement(u.A,{style:se.scrollView,contentContainerStyle:se.scrollContent,showsVerticalScrollIndicator:!1},o.createElement(i.A,{style:se.header},o.createElement(i.A,{style:se.timeSection},o.createElement(J,{variant:"heading1",align:"center",testID:"dashboard-time"},y.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),o.createElement(J,{variant:"heading3",color:"secondary",align:"center",testID:"dashboard-date"},function(e){return e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}(y))),o.createElement(G,{style:se.weatherCard,variant:"elevated",padding:"medium"},o.createElement(i.A,{style:se.weatherContent},o.createElement(J,{style:se.weatherIcon},A),o.createElement(i.A,{style:se.weatherText},o.createElement(J,{variant:"heading2",testID:"dashboard-temperature"},k),o.createElement(J,{variant:"body",color:"secondary",testID:"dashboard-weather"},E))))),o.createElement(G,{style:se.wellnessCard,variant:"elevated",padding:"medium",testID:"wellness-status-card"},o.createElement(i.A,{style:se.wellnessContent},o.createElement(i.A,{style:[se.wellnessIndicator,{backgroundColor:function(e){switch(e){case"great":return"#34C759";case"good":return"#30D158";case"okay":return"#FF9500";case"low":return"#FF3B30";default:return"#8E8E93"}}(g.mood)}],testID:"wellness-indicator"}),o.createElement(J,{variant:"heading3",testID:"wellness-text"},function(e){switch(e){case"great":return"Feeling Great!";case"good":return"Feeling Good";case"okay":return"Doing Okay";case"low":return"Need Support";default:return"Check In Today"}}(g.mood)),g.lastCheckIn&&o.createElement(J,{variant:"caption",color:"secondary"},"Last check-in: ",g.lastCheckIn.toLocaleDateString()))),o.createElement(i.A,{style:se.emergencySection},o.createElement(I,{title:"🚨 Emergency Help",onPress:t,variant:"emergency",size:"large",accessibilityLabel:"Emergency help button",accessibilityHint:"Tap to access emergency services and contacts",testID:"emergency-button"})),o.createElement(i.A,{style:[se.cardStack,v&&se.cardGrid,w&&se.cardGridLarge]},o.createElement(G,{style:S(),variant:"elevated",padding:"large",onPress:n,accessibilityLabel:"Health and wellness",accessibilityHint:"Tap to access daily check-ins and health tracking",testID:"health-card"},o.createElement(i.A,{style:se.cardContent},o.createElement(J,{style:se.cardIcon},"❤️"),o.createElement(J,{variant:"heading3",style:se.cardTitle},"Health"),o.createElement(J,{variant:"body",color:"secondary",style:se.cardSubtitle},"Daily check-in"))),o.createElement(G,{style:S(),variant:"elevated",padding:"large",onPress:r,accessibilityLabel:"Family and friends",accessibilityHint:"Tap to connect with family and friends",testID:"family-card"},o.createElement(i.A,{style:se.cardContent},o.createElement(J,{style:se.cardIcon},"👨‍👩‍👧‍👦"),o.createElement(J,{variant:"heading3",style:se.cardTitle},"Family"),o.createElement(J,{variant:"body",color:"secondary",style:se.cardSubtitle},"Stay connected"))),o.createElement(G,{style:S(),variant:"elevated",padding:"large",onPress:d,accessibilityLabel:"Medication reminders",accessibilityHint:"Tap to view medication schedule and reminders",testID:"medication-card"},o.createElement(i.A,{style:se.cardContent},o.createElement(J,{style:se.cardIcon},"💊"),o.createElement(J,{variant:"heading3",style:se.cardTitle},"Medicine"),o.createElement(J,{variant:"body",color:"secondary",style:se.cardSubtitle},"Reminders"))),o.createElement(G,{style:S(),variant:"elevated",padding:"large",onPress:l,accessibilityLabel:"Daily activities",accessibilityHint:"Tap to view daily activities and routines",testID:"activities-card"},o.createElement(i.A,{style:se.cardContent},o.createElement(J,{style:se.cardIcon},"📋"),o.createElement(J,{variant:"heading3",style:se.cardTitle},"Activities"),o.createElement(J,{variant:"body",color:"secondary",style:se.cardSubtitle},"Daily routine"))),o.createElement(G,{style:S(),variant:"elevated",padding:"large",onPress:f,accessibilityLabel:"Community resources",accessibilityHint:"Tap to explore local community resources and events",testID:"community-card"},o.createElement(i.A,{style:se.cardContent},o.createElement(J,{style:se.cardIcon},"🏘️"),o.createElement(J,{variant:"heading3",style:se.cardTitle},"Community"),o.createElement(J,{variant:"body",color:"secondary",style:se.cardSubtitle},"Local resources"))))))},se=(c.A.get("window").width,a.A.create({container:{flex:1,backgroundColor:"#F8FAFC"},scrollView:{flex:1},scrollContent:{padding:16,paddingBottom:32,alignItems:"center"},header:{marginBottom:24},timeSection:{marginBottom:16},weatherCard:{alignSelf:"center",minWidth:200},weatherContent:{flexDirection:"row",alignItems:"center",justifyContent:"center"},weatherIcon:{fontSize:32,marginRight:12},weatherText:{alignItems:"flex-start"},wellnessCard:{marginBottom:24},wellnessContent:{flexDirection:"row",alignItems:"center"},wellnessIndicator:{width:16,height:16,borderRadius:8,marginRight:12},emergencySection:{marginBottom:32},cardStack:{gap:8},functionCard:{width:"95%",minHeight:76,marginBottom:8,paddingHorizontal:12},cardContent:{flexDirection:"row",alignItems:"center",paddingHorizontal:16},cardIcon:{fontSize:32,alignSelf:"flex-start",marginTop:8},cardTitle:{flex:1,marginBottom:4,marginLeft:12},cardSubtitle:{flex:1,marginLeft:12},cardGrid:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",gap:16},cardGridLarge:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",gap:20},tabletCard:{width:"48%",minHeight:56,marginBottom:16}})),ue=n(4334),le=n(4081),fe=n(2857);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach(function(t){pe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pe(e,t,n){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return ge(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(ge(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ge(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,ge(f,"constructor",u),ge(u,"constructor",s),s.displayName="GeneratorFunction",ge(u,o,"GeneratorFunction"),ge(f),ge(f,o,"Generator"),ge(f,r,function(){return this}),ge(f,"toString",function(){return"[object Generator]"}),(he=function(){return{w:i,m:d}})()}function ge(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ge=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){ge(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},ge(e,t,n,r)}function be(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ve(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){be(i,r,o,a,c,"next",e)}function c(e){be(i,r,o,a,c,"throw",e)}a(void 0)})}}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function ke(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e){var t=function(e,t){if("object"!=de(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==de(t)?t:t+""}var Ae=function(){function e(){we(this,e)}return ke(e,[{key:"hasCompletedTodayCheckIn",value:(a=ve(he().m(function e(t){var n,r,o;return he().w(function(e){for(;;)switch(e.n){case 0:return(n=new Date).setHours(0,0,0,0),e.n=1,fe.dataAccessLayer.getDailyCheckIns(t,1);case 1:if(0!==(r=e.v).length){e.n=2;break}return e.a(2,!1);case 2:return(o=new Date(r[0].date)).setHours(0,0,0,0),e.a(2,o.getTime()===n.getTime())}},e)})),function(e){return a.apply(this,arguments)})},{key:"getCheckInSummary",value:(i=ve(he().m(function e(t){var n,r,o,i,a,c,s,u,l,f,d,m,y,p=arguments;return he().w(function(e){for(;;)switch(e.n){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:7,e.n=1,fe.dataAccessLayer.getDailyCheckIns(t,n);case 1:if(0!==(r=e.v).length){e.n=2;break}return e.a(2,{totalCheckIns:0,averageMood:0,averageEnergy:0,recentTrend:"stable",lastCheckIn:null});case 2:return o=r.reduce(function(e,t){return e+t.mood},0),i=r.reduce(function(e,t){return e+t.energyLevel},0),a=o/r.length,c=i/r.length,s=Math.floor(r.length/2),u=r.slice(0,s),l=r.slice(s),f="stable",u.length>0&&l.length>0&&(d=u.reduce(function(e,t){return e+t.mood+t.energyLevel},0)/(2*u.length),m=l.reduce(function(e,t){return e+t.mood+t.energyLevel},0)/(2*l.length),(y=d-m)>.5?f="improving":y<-.5&&(f="declining")),e.a(2,{totalCheckIns:r.length,averageMood:a,averageEnergy:c,recentTrend:f,lastCheckIn:new Date(r[0].date)})}},e)})),function(e){return i.apply(this,arguments)})},{key:"getWellnessInsights",value:(o=ve(he().m(function e(t){var n,r,o,i;return he().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getDailyCheckIns(t,14);case 1:if(n=e.v,r=[],0!==n.length){e.n=2;break}return r.push("Start your wellness journey with daily check-ins!"),e.a(2,r);case 2:return n.length>=7?r.push("Great job staying consistent with your check-ins!"):n.length>=3&&r.push("You're building a good check-in habit. Keep it up!"),(o=n.reduce(function(e,t){return e+t.mood},0)/n.length)>=4?r.push("Your mood has been consistently positive lately!"):o<=2&&r.push("Consider reaching out to family or friends for support."),(i=n.reduce(function(e,t){return e+t.energyLevel},0)/n.length)<=2?r.push("Your energy levels seem low. Make sure you're getting enough rest."):i>=4&&r.push("Your energy levels are great! Keep up the good habits."),n.slice(0,3).filter(function(e){return e.concerns&&e.concerns.length>0}).length>=2&&r.push("You've mentioned some concerns recently. Consider talking to someone you trust."),e.a(2,r)}},e)})),function(e){return o.apply(this,arguments)})},{key:"createCheckIn",value:(r=ve(he().m(function e(t){var n;return he().w(function(e){for(;;)switch(e.n){case 0:return n=ye(ye({},t),{},{id:crypto.randomUUID(),completedAt:new Date}),e.n=1,fe.dataAccessLayer.addDailyCheckIn(n);case 1:return e.a(2,n)}},e)})),function(e){return r.apply(this,arguments)})},{key:"getCheckInHistory",value:(n=ve(he().m(function e(t){var n,r=arguments;return he().w(function(e){for(;;)switch(e.n){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.n=1,fe.dataAccessLayer.getDailyCheckIns(t,n);case 1:return e.a(2,e.v)}},e)})),function(e){return n.apply(this,arguments)})},{key:"needsCheckInReminder",value:(t=ve(he().m(function e(t){var n,r,o,i;return he().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.hasCompletedTodayCheckIn(t);case 1:if(!e.v){e.n=2;break}return e.a(2,!1);case 2:return e.n=3,fe.dataAccessLayer.getDailyCheckIns(t,1);case 3:if(0!==(n=e.v).length){e.n=4;break}return e.a(2,!0);case 4:return r=new Date(n[0].date),o=new Date,i=(o.getTime()-r.getTime())/36e5,e.a(2,i>=24)}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getEncouragingMessage",value:function(e,t){return e>=4&&t>=4?"You're having a wonderful day! Keep that positive energy flowing! ✨":e>=3&&t>=3?"You're doing great today! Remember to take care of yourself. 🌟":e<=2||t<=2?"Thank you for sharing how you're feeling. Remember, it's okay to have difficult days. You're not alone. 💙":"Thank you for checking in today. Every day is a new opportunity to feel better. 🌈"}},{key:"shouldNotifyEmergencyContacts",value:function(e,t){var n=t.filter(function(e){return e.mood<=2}).length;if(e.mood<=2&&n>=2)return!0;if(e.concerns){var r=e.concerns.toLowerCase();return["pain","chest pain","breathing","dizzy","fall","emergency"].some(function(e){return r.includes(e)})}return!1}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]);var t,n,r,o,i,a}(),Ce=function(){return ke(function e(){we(this,e),pe(this,"isRecording",!1),pe(this,"recordingStartTime",null)},[{key:"startRecording",value:(n=ve(he().m(function e(){return he().w(function(e){for(;;)switch(e.n){case 0:if(!this.isRecording){e.n=1;break}throw new Error("Already recording");case 1:this.isRecording=!0,this.recordingStartTime=new Date;case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"stopRecording",value:(t=ve(he().m(function e(){var t,n;return he().w(function(e){for(;;)switch(e.n){case 0:if(this.isRecording&&this.recordingStartTime){e.n=1;break}throw new Error("Not currently recording");case 1:return t=Date.now()-this.recordingStartTime.getTime(),this.isRecording=!1,this.recordingStartTime=null,n="file://recordings/voice_note_".concat(Date.now(),".m4a"),e.a(2,{uri:n,duration:Math.floor(t/1e3)})}},e,this)})),function(){return t.apply(this,arguments)})},{key:"playRecording",value:(e=ve(he().m(function e(t){return he().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(t){return e.apply(this,arguments)})},{key:"getRecordingStatus",value:function(){var e=this.recordingStartTime?Date.now()-this.recordingStartTime.getTime():0;return{isRecording:this.isRecording,duration:Math.floor(e/1e3)}}}]);var e,t,n}(),Te=new Ae;new Ce;function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function je(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Pe(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Pe(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Pe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Pe(f,"constructor",u),Pe(u,"constructor",s),s.displayName="GeneratorFunction",Pe(u,o,"GeneratorFunction"),Pe(f),Pe(f,o,"Generator"),Pe(f,r,function(){return this}),Pe(f,"toString",function(){return"[object Generator]"}),(je=function(){return{w:i,m:d}})()}function Pe(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Pe=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Pe(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Pe(e,t,n,r)}function De(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach(function(t){Re(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Me=[{value:1,emoji:"😢",label:"Very Sad",color:"#FF3B30"},{value:2,emoji:"😔",label:"Sad",color:"#FF9500"},{value:3,emoji:"😐",label:"Okay",color:"#FFCC00"},{value:4,emoji:"😊",label:"Good",color:"#30D158"},{value:5,emoji:"😄",label:"Great",color:"#34C759"}],Fe=[{id:"sleep",question:"Did you sleep well last night?",type:"yesno"},{id:"pain",question:"Are you experiencing any pain today?",type:"yesno"},{id:"appetite",question:"Do you have a good appetite today?",type:"yesno"}],Ne=function(e){var t=e.userId,n=e.onComplete,r=e.onCancel,a=Be((0,o.useState)("mood"),2),c=a[0],l=a[1],f=Be((0,o.useState)(null),2),d=f[0],m=f[1],y=Be((0,o.useState)(null),2),p=y[0],h=y[1],g=Be((0,o.useState)({}),2),b=g[0],v=g[1],w=Be((0,o.useState)(""),2),S=w[0],k=(w[1],Be((0,o.useState)(!1),2)),E=k[0],A=k[1],C=new ue.A.Value(1),T=new ue.A.Value(1),O=function(){ue.A.sequence([ue.A.parallel([ue.A.timing(C,{toValue:0,duration:150,useNativeDriver:!0}),ue.A.timing(T,{toValue:.95,duration:150,useNativeDriver:!0})]),ue.A.parallel([ue.A.timing(C,{toValue:1,duration:150,useNativeDriver:!0}),ue.A.timing(T,{toValue:1,duration:150,useNativeDriver:!0})])]).start()},j=function(e,t){v(function(n){return Ie(Ie({},n),{},Re({},e,t))})},P=function(){O(),l("notes")},D=function(){O(),l("complete")},x=function(){var e,r=(e=je().m(function e(){var r;return je().w(function(e){for(;;)switch(e.p=e.n){case 0:if(d&&p){e.n=1;break}return e.a(2);case 1:return A(!0),e.p=2,r={id:crypto.randomUUID(),userId:t,date:new Date,mood:d,energyLevel:p,concerns:Object.entries(b).filter(function(e){var t=Be(e,2);return t[0],!t[1]}).map(function(e){var t,n=Be(e,1)[0];return null===(t=Fe.find(function(e){return e.id===n}))||void 0===t?void 0:t.question}).join(", "),notes:S.trim()||void 0,completedAt:new Date},e.n=3,fe.dataAccessLayer.addDailyCheckIn(r);case 3:Te.getEncouragingMessage(d,p),n(r),e.n=5;break;case 4:e.p=4,e.v,le.A.alert("Save Error","We had trouble saving your check-in. Please try again.",[{text:"OK"}]);case 5:return e.p=5,A(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){De(i,r,o,a,c,"next",e)}function c(e){De(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return r.apply(this,arguments)}}(),R=function(){return o.createElement(i.A,{style:ze.stepContainer},o.createElement(J,{variant:"heading2",align:"center",style:ze.stepTitle},"How are you feeling today?"),o.createElement(J,{variant:"body",align:"center",color:"secondary",style:ze.stepSubtitle},"Tap the emoji that best describes your mood"),o.createElement(i.A,{style:ze.moodGrid},Me.map(function(e){return o.createElement(G,{key:e.value,style:[ze.moodCard,d===e.value&&{borderColor:e.color,borderWidth:3}],variant:"elevated",padding:"large",onPress:function(){return t=e.value,m(t),void setTimeout(function(){O(),l("energy")},500);var t},accessibilityLabel:"".concat(e.label," mood"),accessibilityHint:"Tap to select this mood",testID:"mood-".concat(e.value)},o.createElement(J,{style:ze.moodEmoji},e.emoji),o.createElement(J,{variant:"body",align:"center",weight:"medium"},e.label))})))},B=function(){return o.createElement(i.A,{style:ze.stepContainer},o.createElement(J,{variant:"heading2",align:"center",style:ze.stepTitle},"How is your energy level?"),o.createElement(J,{variant:"body",align:"center",color:"secondary",style:ze.stepSubtitle},"Choose the level that matches how you feel"),o.createElement(i.A,{style:ze.energyContainer},[1,2,3,4,5].map(function(e){return o.createElement(G,{key:e,style:[ze.energyCard,p===e&&ze.selectedEnergyCard],variant:"elevated",padding:"medium",onPress:function(){return h(e),void setTimeout(function(){O(),l("questions")},500)},accessibilityLabel:"Energy level ".concat(e," out of 5"),accessibilityHint:"Tap to select this energy level",testID:"energy-".concat(e)},o.createElement(i.A,{style:ze.energyLevel},o.createElement(J,{variant:"heading3",align:"center"},e),o.createElement(J,{variant:"caption",align:"center",color:"secondary"},1===e?"Very Low":2===e?"Low":3===e?"Okay":4===e?"Good":"High")))})))};return o.createElement(s.A,{style:ze.container},o.createElement(i.A,{style:ze.header},o.createElement(J,{variant:"caption",color:"secondary",align:"center"},"Daily Check-in"),o.createElement(I,{title:"← Back to Main",onPress:r,variant:"secondary",size:"small",accessibilityLabel:"Go back to main dashboard",testID:"cancel-checkin"})),o.createElement(u.A,{style:ze.scrollView,contentContainerStyle:ze.scrollContent,showsVerticalScrollIndicator:!1},o.createElement(ue.A.View,{style:[ze.animatedContainer,{opacity:C,transform:[{scale:T}]}]},function(){switch(c){case"mood":default:return R();case"energy":return B();case"questions":return o.createElement(i.A,{style:ze.stepContainer},o.createElement(J,{variant:"heading2",align:"center",style:ze.stepTitle},"A few quick questions"),o.createElement(J,{variant:"body",align:"center",color:"secondary",style:ze.stepSubtitle},"These help us understand how you're doing"),o.createElement(i.A,{style:ze.questionsContainer},Fe.map(function(e,t){return o.createElement(G,{key:e.id,style:ze.questionCard,variant:"outlined",padding:"large"},o.createElement(J,{variant:"body",style:ze.questionText},e.question),o.createElement(i.A,{style:ze.answerButtons},o.createElement(I,{title:"Yes",onPress:function(){return j(e.id,!0)},variant:!0===b[e.id]?"primary":"secondary",size:"large",accessibilityLabel:"Yes to: ".concat(e.question),testID:"question-".concat(e.id,"-yes")}),o.createElement(I,{title:"No",onPress:function(){return j(e.id,!1)},variant:!1===b[e.id]?"primary":"secondary",size:"large",accessibilityLabel:"No to: ".concat(e.question),testID:"question-".concat(e.id,"-no")})))})),o.createElement(i.A,{style:ze.navigationButtons},o.createElement(I,{title:"Continue",onPress:P,variant:"primary",size:"large",disabled:Object.keys(b).length<Fe.length,accessibilityLabel:"Continue to next step",testID:"questions-continue"})));case"notes":return o.createElement(i.A,{style:ze.stepContainer},o.createElement(J,{variant:"heading2",align:"center",style:ze.stepTitle},"Anything else to share?"),o.createElement(J,{variant:"body",align:"center",color:"secondary",style:ze.stepSubtitle},"Optional - you can add notes or record a voice message"),o.createElement(i.A,{style:ze.notesOptions},o.createElement(G,{style:ze.notesOptionCard,variant:"outlined",padding:"large",onPress:function(){return D()},accessibilityLabel:"Record voice note",testID:"voice-note-option"},o.createElement(J,{style:ze.optionIcon},"🎤"),o.createElement(J,{variant:"body",align:"center",weight:"medium"},"Voice Note"),o.createElement(J,{variant:"caption",align:"center",color:"secondary"},"Record how you're feeling")),o.createElement(G,{style:ze.notesOptionCard,variant:"outlined",padding:"large",accessibilityLabel:"Skip notes",testID:"skip-notes-option"},o.createElement(J,{style:ze.optionIcon},"✏️"),o.createElement(J,{variant:"body",align:"center",weight:"medium"},"Text Note"),o.createElement(J,{variant:"caption",align:"center",color:"secondary"},"Coming soon"))),o.createElement(i.A,{style:ze.navigationButtons},o.createElement(I,{title:"Skip",onPress:D,variant:"secondary",size:"large",accessibilityLabel:"Skip notes step",testID:"notes-skip"})));case"complete":return o.createElement(i.A,{style:ze.stepContainer},o.createElement(i.A,{style:ze.celebrationContainer},o.createElement(J,{style:ze.celebrationEmoji},"🎉"),o.createElement(J,{variant:"heading2",align:"center",style:ze.celebrationTitle},"Great job!"),o.createElement(J,{variant:"body",align:"center",color:"secondary",style:ze.celebrationSubtitle},"Thank you for completing your daily check-in. Your wellness matters!")),o.createElement(G,{style:ze.summaryCard,variant:"elevated",padding:"large"},o.createElement(J,{variant:"heading3",align:"center",style:ze.summaryTitle},"Today's Summary"),o.createElement(i.A,{style:ze.summaryRow},o.createElement(J,{variant:"body"},"Mood:"),o.createElement(J,{variant:"body",weight:"medium"},null===(e=Me.find(function(e){return e.value===d}))||void 0===e?void 0:e.label," ",null===(t=Me.find(function(e){return e.value===d}))||void 0===t?void 0:t.emoji)),o.createElement(i.A,{style:ze.summaryRow},o.createElement(J,{variant:"body"},"Energy:"),o.createElement(J,{variant:"body",weight:"medium"},p,"/5"))),o.createElement(i.A,{style:ze.navigationButtons},o.createElement(I,{title:"Done",onPress:x,variant:"primary",size:"large",disabled:E,accessibilityLabel:"Complete check-in",testID:"complete-checkin"})))}var e,t}())))},ze=a.A.create({container:{flex:1,backgroundColor:"#F8FAFC"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#E5E5EA"},scrollView:{flex:1},scrollContent:{padding:16,paddingBottom:32},animatedContainer:{flex:1},stepContainer:{flex:1,justifyContent:"center",minHeight:500},stepTitle:{marginBottom:8},stepSubtitle:{marginBottom:32},moodGrid:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",gap:16},moodCard:{width:"45%",minHeight:120,justifyContent:"center",alignItems:"center"},moodEmoji:{fontSize:48,marginBottom:8},energyContainer:{flexDirection:"row",justifyContent:"space-between",gap:8},energyCard:{flex:1,minHeight:100,justifyContent:"center",alignItems:"center"},selectedEnergyCard:{borderColor:"#007AFF",borderWidth:3},energyLevel:{alignItems:"center"},questionsContainer:{gap:16},questionCard:{marginBottom:8},questionText:{marginBottom:16,textAlign:"center"},answerButtons:{flexDirection:"row",justifyContent:"space-around",gap:16},notesOptions:{flexDirection:"row",justifyContent:"space-around",gap:16,marginBottom:24},notesOptionCard:{flex:1,minHeight:120,justifyContent:"center",alignItems:"center"},optionIcon:{fontSize:32,marginBottom:8},navigationButtons:{flexDirection:"row",justifyContent:"space-around",gap:16,marginTop:24},celebrationContainer:{alignItems:"center",marginBottom:32},celebrationEmoji:{fontSize:64,marginBottom:16},celebrationTitle:{marginBottom:8},celebrationSubtitle:{marginBottom:16},summaryCard:{marginBottom:24},summaryTitle:{marginBottom:16},summaryRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8}}),He=n(2869),_e=n(6430);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach(function(t){Ve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Ye(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Ye(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Ye(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Ye(f,"constructor",u),Ye(u,"constructor",s),s.displayName="GeneratorFunction",Ye(u,o,"GeneratorFunction"),Ye(f),Ye(f,o,"Generator"),Ye(f,r,function(){return this}),Ye(f,"toString",function(){return"[object Generator]"}),(qe=function(){return{w:i,m:d}})()}function Ye(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ye=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Ye(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Ye(e,t,n,r)}function Je(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Ke(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Je(i,r,o,a,c,"next",e)}function c(e){Je(i,r,o,a,c,"throw",e)}a(void 0)})}}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xe=function(e){var t=e.navigation,n=$e((0,o.useState)([]),2),r=n[0],a=n[1],c=$e((0,o.useState)(!0),2),s=c[0],l=c[1],d=$e((0,o.useState)(!1),2),m=d[0],y=d[1],p=$e((0,o.useState)({name:"",phoneNumber:"",relationship:"",isEmergencyContact:!0}),2),h=p[0],g=p[1];(0,o.useEffect)(function(){b()},[]);var b=function(){var e=Ke(qe().m(function e(){var t,n;return qe().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l(!0),e.n=1,fe.dataAccessLayer.getContacts();case 1:t=e.v,n=t.filter(function(e){return e.isEmergencyContact}),a(n),e.n=3;break;case 2:e.p=2,e.v,le.A.alert("Error","Failed to load emergency contacts");case 3:return e.p=3,l(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Ke(qe().m(function e(){var t;return qe().w(function(e){for(;;)switch(e.p=e.n){case 0:if(h.name&&h.phoneNumber){e.n=1;break}return le.A.alert("Error","Name and phone number are required"),e.a(2);case 1:return e.p=1,t={id:crypto.randomUUID(),name:h.name,phoneNumber:h.phoneNumber,relationship:h.relationship||"Emergency Contact",isEmergencyContact:!0,canViewHealthStatus:!0,createdAt:new Date,lastContactedAt:new Date},e.n=2,fe.dataAccessLayer.saveContact(t);case 2:return y(!1),g({name:"",phoneNumber:"",relationship:"",isEmergencyContact:!0}),e.n=3,b();case 3:le.A.alert("Success","Emergency contact added successfully"),e.n=5;break;case 4:e.p=4,e.v,le.A.alert("Error","Failed to save emergency contact");case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}();return o.createElement(u.A,{style:Ze.container},o.createElement(i.A,{style:Ze.header},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"}),o.createElement(J,{style:Ze.title},"Emergency Help"),o.createElement(J,{style:Ze.subtitle},"Quick access to emergency services")),o.createElement(f.A,{style:Ze.emergencyButton,onPress:function(){le.A.alert("Emergency Services","Calling 911 Emergency Services",[{text:"OK"}])},accessibilityLabel:"Call 911 emergency services",accessibilityHint:"Immediately calls 911 emergency services"},o.createElement(J,{style:Ze.emergencyButtonText},"🚨 Call 911"),o.createElement(J,{style:Ze.emergencyButtonSubtext},"Emergency Services")),o.createElement(i.A,{style:Ze.section},o.createElement(J,{style:Ze.sectionTitle},"Emergency Contacts"),s?o.createElement(i.A,{style:Ze.loadingContainer},o.createElement(He.A,{size:"large",color:"#dc2626"}),o.createElement(J,{style:Ze.loadingText},"Loading contacts...")):r.length>0?r.map(function(e){return o.createElement(i.A,{key:e.id,style:Ze.contactCard},o.createElement(i.A,{style:Ze.contactInfo},o.createElement(J,{style:Ze.contactName},e.name),o.createElement(J,{style:Ze.contactRelationship},e.relationship),o.createElement(J,{style:Ze.contactPhone},e.phoneNumber)),o.createElement(f.A,{style:Ze.callButton,onPress:function(){return function(e){le.A.alert("Emergency Call","Calling ".concat(e.name," at ").concat(e.phoneNumber),[{text:"OK"}])}(e)},accessibilityLabel:"Call ".concat(e.name),accessibilityHint:"Calls your emergency contact ".concat(e.name)},o.createElement(J,{style:Ze.callButtonText},"📞 Call")))}):o.createElement(i.A,{style:Ze.emptyContainer},o.createElement(J,{style:Ze.emptyText},"No emergency contacts added"),o.createElement(J,{style:Ze.emptySubtext},"Add important contacts for quick access during emergencies")),o.createElement(f.A,{style:Ze.addButton,onPress:function(){return y(!0)},accessibilityLabel:"Add emergency contact",accessibilityHint:"Opens form to add a new emergency contact"},o.createElement(J,{style:Ze.addButtonText},"+ Add Emergency Contact"))),o.createElement(i.A,{style:Ze.tipsContainer},o.createElement(J,{style:Ze.tipsTitle},"Emergency Tips"),o.createElement(i.A,{style:Ze.tipsList},o.createElement(J,{style:Ze.tipItem},"• Stay calm and speak clearly when calling for help"),o.createElement(J,{style:Ze.tipItem},"• Know your location to share with emergency services"),o.createElement(J,{style:Ze.tipItem},"• Keep emergency contacts easily accessible"),o.createElement(J,{style:Ze.tipItem},"• Follow instructions from emergency personnel"))),o.createElement(_e.A,{animationType:"slide",transparent:!0,visible:m,onRequestClose:function(){return y(!1)}},o.createElement(i.A,{style:Ze.modalOverlay},o.createElement(i.A,{style:Ze.modalContent},o.createElement(J,{style:Ze.modalTitle},"Add Emergency Contact"),o.createElement(J,{style:Ze.inputLabel},"Name"),o.createElement(ee.A,{style:Ze.input,value:h.name,onChangeText:function(e){return g(Ue(Ue({},h),{},{name:e}))},placeholder:"Contact Name",placeholderTextColor:"#9ca3af"}),o.createElement(J,{style:Ze.inputLabel},"Phone Number"),o.createElement(ee.A,{style:Ze.input,value:h.phoneNumber,onChangeText:function(e){return g(Ue(Ue({},h),{},{phoneNumber:e}))},placeholder:"Phone Number",placeholderTextColor:"#9ca3af",keyboardType:"phone-pad"}),o.createElement(J,{style:Ze.inputLabel},"Relationship"),o.createElement(ee.A,{style:Ze.input,value:h.relationship,onChangeText:function(e){return g(Ue(Ue({},h),{},{relationship:e}))},placeholder:"Relationship (e.g. Spouse, Doctor)",placeholderTextColor:"#9ca3af"}),o.createElement(i.A,{style:Ze.modalButtons},o.createElement(f.A,{style:[Ze.modalButton,Ze.cancelButton],onPress:function(){return y(!1)}},o.createElement(J,{style:Ze.cancelButtonText},"Cancel")),o.createElement(f.A,{style:[Ze.modalButton,Ze.saveButton],onPress:v},o.createElement(J,{style:Ze.saveButtonText},"Save Contact")))))))},Ze=a.A.create({container:{flex:1,backgroundColor:"#fef2f2"},header:{padding:20},title:{fontSize:28,fontWeight:"bold",color:"#dc2626",marginBottom:8},subtitle:{fontSize:16,color:"#6b7280"},emergencyButton:{backgroundColor:"#dc2626",margin:16,padding:20,borderRadius:12,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.3,shadowRadius:4,elevation:5},emergencyButtonText:{color:"#ffffff",fontSize:24,fontWeight:"bold",marginBottom:4},emergencyButtonSubtext:{color:"#ffffff",fontSize:16},section:{marginBottom:24},sectionTitle:{fontSize:20,fontWeight:"bold",color:"#1f2937",paddingHorizontal:16,marginBottom:12},loadingContainer:{padding:20,alignItems:"center"},loadingText:{marginTop:8,fontSize:16,color:"#6b7280"},contactCard:{flexDirection:"row",backgroundColor:"#ffffff",marginHorizontal:16,marginBottom:12,padding:16,borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},contactInfo:{flex:1},contactName:{fontSize:18,fontWeight:"bold",color:"#1f2937",marginBottom:4},contactRelationship:{fontSize:14,color:"#6b7280",marginBottom:4},contactPhone:{fontSize:16,color:"#4b5563"},callButton:{backgroundColor:"#dc2626",paddingHorizontal:16,paddingVertical:12,borderRadius:8,justifyContent:"center",alignItems:"center",minWidth:80},callButtonText:{color:"#ffffff",fontSize:16,fontWeight:"600"},emptyContainer:{backgroundColor:"#ffffff",marginHorizontal:16,padding:20,borderRadius:12,alignItems:"center"},emptyText:{fontSize:16,fontWeight:"600",color:"#6b7280",marginBottom:8},emptySubtext:{fontSize:14,color:"#9ca3af",textAlign:"center"},addButton:{backgroundColor:"#4b5563",marginHorizontal:16,marginTop:12,padding:16,borderRadius:12,alignItems:"center"},addButtonText:{color:"#ffffff",fontSize:16,fontWeight:"600"},tipsContainer:{backgroundColor:"#ffffff",marginHorizontal:16,marginBottom:32,padding:20,borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},tipsTitle:{fontSize:18,fontWeight:"bold",color:"#1f2937",marginBottom:12},tipsList:{gap:8},tipItem:{fontSize:14,color:"#4b5563",lineHeight:20},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:16},modalContent:{backgroundColor:"#ffffff",borderRadius:12,padding:24,width:"100%",maxWidth:500,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},modalTitle:{fontSize:24,fontWeight:"bold",color:"#1f2937",marginBottom:16,textAlign:"center"},inputLabel:{fontSize:16,fontWeight:"500",color:"#4b5563",marginBottom:8},input:{backgroundColor:"#f3f4f6",borderRadius:8,padding:12,fontSize:16,color:"#1f2937",marginBottom:16,borderWidth:1,borderColor:"#e5e7eb"},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:16},modalButton:{borderRadius:8,paddingVertical:12,minWidth:120,alignItems:"center"},cancelButton:{backgroundColor:"#f3f4f6",borderWidth:1,borderColor:"#e5e7eb"},saveButton:{backgroundColor:"#dc2626"},cancelButtonText:{fontSize:16,fontWeight:"600",color:"#4b5563"},saveButtonText:{fontSize:16,fontWeight:"600",color:"#ffffff"}});function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return nt(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(nt(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,nt(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,nt(f,"constructor",u),nt(u,"constructor",s),s.displayName="GeneratorFunction",nt(u,o,"GeneratorFunction"),nt(f),nt(f,o,"Generator"),nt(f,r,function(){return this}),nt(f,"toString",function(){return"[object Generator]"}),(tt=function(){return{w:i,m:d}})()}function nt(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}nt=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){nt(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},nt(e,t,n,r)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach(function(t){it(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function it(e,t,n){return(t=ut(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ct(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){at(i,r,o,a,c,"next",e)}function c(e){at(i,r,o,a,c,"throw",e)}a(void 0)})}}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ut(r.key),r)}}function ut(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}var lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataAccess=new fe.DataAccessLayer}return t=e,n=[{key:"getContacts",value:(y=ct(tt().m(function e(){var t,n,r;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getContacts();case 1:return t=e.v,n=t.map(function(e){return ot(ot({},e),{},{createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),lastContactedAt:e.lastContactedAt?e.lastContactedAt instanceof Date?e.lastContactedAt:new Date(e.lastContactedAt):void 0})}),r=n.sort(function(e,t){var n,r;if(e.isEmergencyContact&&!t.isEmergencyContact)return-1;if(!e.isEmergencyContact&&t.isEmergencyContact)return 1;var o=(null===(n=e.lastContactedAt)||void 0===n?void 0:n.getTime())||0;return((null===(r=t.lastContactedAt)||void 0===r?void 0:r.getTime())||0)-o}),e.a(2,r);case 2:throw e.p=2,e.v,new Error("Failed to load contacts");case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return y.apply(this,arguments)})},{key:"addContact",value:(m=ct(tt().m(function e(t){var n;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=ot(ot({},t),{},{id:"contact-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),createdAt:new Date}),e.n=1,this.dataAccess.saveContact(n);case 1:return e.a(2,n);case 2:throw e.p=2,e.v,new Error("Failed to add contact");case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return m.apply(this,arguments)})},{key:"updateContact",value:(d=ct(tt().m(function e(t,n){var r,o;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getContact(t);case 1:if(r=e.v){e.n=2;break}throw new Error("Contact not found");case 2:return o=ot(ot({},r),n),e.n=3,this.dataAccess.saveContact(o);case 3:return e.a(2,o);case 4:throw e.p=4,e.v,new Error("Failed to update contact");case 5:return e.a(2)}},e,this,[[0,4]])})),function(e,t){return d.apply(this,arguments)})},{key:"deleteContact",value:(f=ct(tt().m(function e(t){return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.deleteContact(t);case 1:e.n=3;break;case 2:throw e.p=2,e.v,new Error("Failed to delete contact");case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return f.apply(this,arguments)})},{key:"initiateVideoCall",value:(l=ct(tt().m(function e(t){var n;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getContact(t);case 1:if(e.v){e.n=2;break}throw new Error("Contact not found");case 2:return n={id:"call-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),initiatorId:"current-user",recipientId:t,startedAt:new Date,status:"initiated"},e.n=3,this.dataAccess.saveVideoCall(n);case 3:return e.n=4,this.updateContact(t,{lastContactedAt:new Date});case 4:return e.a(2,n);case 5:throw e.p=5,e.v,new Error("Failed to start video call");case 6:return e.a(2)}},e,this,[[0,5]])})),function(e){return l.apply(this,arguments)})},{key:"endVideoCall",value:(u=ct(tt().m(function e(t){var n,r,o,i,a;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getVideoCall(t);case 1:if(n=e.v){e.n=2;break}throw new Error("Video call not found");case 2:return r=ot(ot({},n),{},{startedAt:n.startedAt instanceof Date?n.startedAt:new Date(n.startedAt),endedAt:n.endedAt?n.endedAt instanceof Date?n.endedAt:new Date(n.endedAt):void 0}),o=new Date,i=Math.floor((o.getTime()-r.startedAt.getTime())/1e3),a=ot(ot({},r),{},{endedAt:o,duration:i,status:"ended"}),e.n=3,this.dataAccess.saveVideoCall(a);case 3:return e.a(2,a);case 4:throw e.p=4,e.v,new Error("Failed to end video call");case 5:return e.a(2)}},e,this,[[0,4]])})),function(e){return u.apply(this,arguments)})},{key:"getMessages",value:(s=ct(tt().m(function e(t){var n,r;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getMessages();case 1:return n=e.v,r=n.map(function(e){return ot(ot({},e),{},{sentAt:e.sentAt instanceof Date?e.sentAt:new Date(e.sentAt),readAt:e.readAt?e.readAt instanceof Date?e.readAt:new Date(e.readAt):void 0})}),e.a(2,r.filter(function(e){return e.fromUserId===t&&"current-user"===e.toUserId||"current-user"===e.fromUserId&&e.toUserId===t}).sort(function(e,t){return e.sentAt.getTime()-t.sentAt.getTime()}));case 2:throw e.p=2,e.v,new Error("Failed to load messages");case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return s.apply(this,arguments)})},{key:"sendMessage",value:(c=ct(tt().m(function e(t,n){var r,o,i,a=arguments;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:"text",o=a.length>3?a[3]:void 0,e.p=1,i={id:"msg-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),fromUserId:"current-user",toUserId:t,content:n,type:r,sentAt:new Date,attachmentUrl:o},e.n=2,this.dataAccess.saveMessage(i);case 2:return e.n=3,this.updateContact(t,{lastContactedAt:new Date});case 3:return e.a(2,i);case 4:throw e.p=4,e.v,new Error("Failed to send message");case 5:return e.a(2)}},e,this,[[1,4]])})),function(e,t){return c.apply(this,arguments)})},{key:"markMessageAsRead",value:(a=ct(tt().m(function e(t){var n,r;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getMessage(t);case 1:if(n=e.v){e.n=2;break}throw new Error("Message not found");case 2:return r=ot(ot({},n),{},{readAt:new Date}),e.n=3,this.dataAccess.saveMessage(r);case 3:e.n=5;break;case 4:throw e.p=4,e.v,new Error("Failed to mark message as read");case 5:return e.a(2)}},e,this,[[0,4]])})),function(e){return a.apply(this,arguments)})},{key:"shareWellnessStatus",value:(i=ct(tt().m(function e(t,n){var r,o;return tt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.dataAccess.getContact(t);case 1:if(r=e.v){e.n=2;break}throw new Error("Contact not found");case 2:if(r.canViewHealthStatus){e.n=3;break}throw new Error("Contact does not have permission to view health status");case 3:return o="Wellness Update: Mood ".concat(n.mood,"/5, Energy ").concat(n.energyLevel,"/5").concat(n.notes?". Notes: ".concat(n.notes):""),e.n=4,this.sendMessage(t,o,"text");case 4:e.n=6;break;case 5:throw e.p=5,e.v,new Error("Failed to share wellness status");case 6:return e.a(2)}},e,this,[[0,5]])})),function(e,t){return i.apply(this,arguments)})},{key:"readMessageAloud",value:(o=ct(tt().m(function e(t){var n;return tt().w(function(e){for(;;)switch(e.n){case 0:try{"speechSynthesis"in window&&((n=new SpeechSynthesisUtterance(t.content)).rate=.8,n.volume=1,speechSynthesis.speak(n))}catch(e){}case 1:return e.a(2)}},e)})),function(e){return o.apply(this,arguments)})}],r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],n&&st(t.prototype,n),r&&st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i,a,c,s,u,l,f,d,m,y}(),ft=n(8711),dt=function(e){var t=e.contact,n=e.onPress,r=e.onVideoCall,a=e.onEdit,c=e.onDelete,s=e.testID;return o.createElement(i.A,{style:mt.container,testID:s},o.createElement(i.A,{style:mt.content},o.createElement(i.A,{style:mt.photoContainer},t.photo?o.createElement(ft.A,{source:{uri:t.photo},style:mt.photo,testID:"".concat(s,"-photo")}):o.createElement(i.A,{style:mt.photoPlaceholder,testID:"".concat(s,"-photo-placeholder")},o.createElement(J,{style:mt.photoInitial},t.name.charAt(0).toUpperCase())),t.isEmergencyContact&&o.createElement(i.A,{style:mt.emergencyBadge},o.createElement(J,{style:mt.emergencyText},"!"))),o.createElement(f.A,{style:mt.info,onPress:n,testID:"".concat(s,"-info"),accessibilityRole:"button",accessibilityLabel:"Contact ".concat(t.name,", ").concat(t.relationship),accessibilityHint:"Tap to view messages and call options"},o.createElement(J,{style:mt.name,testID:"".concat(s,"-name")},t.name),o.createElement(J,{style:mt.relationship,testID:"".concat(s,"-relationship")},t.relationship),o.createElement(J,{style:mt.lastContact,testID:"".concat(s,"-last-contact")},"Last contact: ",function(e){if(!e)return"Never contacted";var t=new Date,n=Math.floor((t.getTime()-e.getTime())/36e5);if(n<1)return"Just now";if(n<24)return"".concat(n," hours ago");var r=Math.floor(n/24);return 1===r?"Yesterday":r<7?"".concat(r," days ago"):e.toLocaleDateString()}(t.lastContactedAt))),o.createElement(i.A,{style:mt.actions},o.createElement(I,{title:"📞 Call",onPress:r,testID:"".concat(s,"-video-call-button"),accessibilityLabel:"Start video call with ".concat(t.name)}),a&&o.createElement(I,{title:"✏️ Edit",onPress:a,variant:"secondary",testID:"".concat(s,"-edit-button"),accessibilityLabel:"Edit ".concat(t.name)}),c&&o.createElement(I,{title:"🗑️ Delete",onPress:c,variant:"secondary",testID:"".concat(s,"-delete-button"),accessibilityLabel:"Delete ".concat(t.name)}))))},mt=a.A.create({container:{backgroundColor:"#ffffff",borderRadius:12,marginBottom:12,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},content:{flexDirection:"row",padding:16,alignItems:"center"},photoContainer:{position:"relative",marginRight:16},photo:{width:100,height:100,borderRadius:50,backgroundColor:"#e9ecef"},photoPlaceholder:{width:100,height:100,borderRadius:50,backgroundColor:"#6c757d",justifyContent:"center",alignItems:"center"},photoInitial:{fontSize:40,fontWeight:"bold",color:"#ffffff"},emergencyBadge:{position:"absolute",top:-4,right:-4,width:24,height:24,borderRadius:12,backgroundColor:"#dc3545",justifyContent:"center",alignItems:"center"},emergencyText:{fontSize:14,fontWeight:"bold",color:"#ffffff"},info:{flex:1,marginRight:12,paddingVertical:8},name:{fontSize:22,fontWeight:"bold",color:"#2c3e50",marginBottom:4},relationship:{fontSize:18,color:"#6c757d",marginBottom:4},lastContact:{fontSize:16,color:"#adb5bd"},actions:{alignItems:"center"},videoButton:{backgroundColor:"#28a745",paddingHorizontal:20,paddingVertical:12,minWidth:100},buttonText:{fontSize:16,fontWeight:"bold"}});function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ht=function(e){var t=e.contact,n=e.onSave,r=e.onCancel,a=(e.testID,yt((0,o.useState)(""),2)),c=a[0],s=a[1],l=yt((0,o.useState)(""),2),f=l[0],d=l[1],m=yt((0,o.useState)(""),2),y=m[0],p=m[1],h=yt((0,o.useState)(""),2),g=h[0],b=h[1],v=yt((0,o.useState)(!1),2),w=v[0],S=v[1],k=yt((0,o.useState)(!1),2),E=k[0],A=k[1];(0,o.useEffect)(function(){t&&(s(t.name),d(t.relationship),p(t.phoneNumber),b(t.email||""),S(t.isEmergencyContact),A(t.canViewHealthStatus))},[t]);return o.createElement(u.A,{style:gt.container,showsVerticalScrollIndicator:!0},o.createElement(G,{style:gt.card},o.createElement(J,{style:gt.title},t?"Edit Contact":"Add New Contact"),o.createElement(i.A,{style:gt.section},o.createElement(J,{style:gt.label},"Name *"),o.createElement(re,{value:c,onChangeText:s,placeholder:"Enter contact name",style:gt.input,accessibilityLabel:"Contact name input"})),o.createElement(i.A,{style:gt.section},o.createElement(J,{style:gt.label},"Relationship *"),o.createElement(re,{value:f,onChangeText:d,placeholder:"e.g., Daughter, Son, Friend",style:gt.input,accessibilityLabel:"Relationship input"})),o.createElement(i.A,{style:gt.section},o.createElement(J,{style:gt.label},"Phone Number *"),o.createElement(re,{value:y,onChangeText:p,placeholder:"+1-555-123-4567",style:gt.input,accessibilityLabel:"Phone number input"})),o.createElement(i.A,{style:gt.section},o.createElement(J,{style:gt.label},"Email (Optional)"),o.createElement(re,{value:g,onChangeText:b,placeholder:"contact@email.com",style:gt.input,accessibilityLabel:"Email input"})),o.createElement(i.A,{style:gt.section},o.createElement(i.A,{style:gt.checkboxContainer},o.createElement(I,{title:w?"✓ Emergency Contact":"Emergency Contact",onPress:function(){return S(!w)},variant:w?"primary":"secondary",accessibilityLabel:"Emergency contact ".concat(w?"enabled":"disabled")})),o.createElement(J,{style:gt.checkboxHelp},"Emergency contacts will be notified in case of emergency")),o.createElement(i.A,{style:gt.section},o.createElement(i.A,{style:gt.checkboxContainer},o.createElement(I,{title:E?"✓ Can View Health Status":"Can View Health Status",onPress:function(){return A(!E)},variant:E?"primary":"secondary",accessibilityLabel:"Health status access ".concat(E?"enabled":"disabled")})),o.createElement(J,{style:gt.checkboxHelp},"This contact can view your wellness updates and health status")),o.createElement(i.A,{style:gt.buttonContainer},o.createElement(I,{title:"Save Contact",onPress:function(){c.trim()?f.trim()?y.trim()?n({name:c.trim(),relationship:f.trim(),phoneNumber:y.trim(),email:g.trim()||void 0,isEmergencyContact:w,canViewHealthStatus:E}):window.alert("Please enter a phone number."):window.alert("Please enter a relationship."):window.alert("Please enter a name for the contact.")},accessibilityLabel:"Save contact"}),o.createElement(I,{title:"Cancel",onPress:r,variant:"secondary",accessibilityLabel:"Cancel editing contact"}))))},gt=a.A.create({container:{flex:1,backgroundColor:"#f8f9fa"},card:{margin:16,padding:20},title:{fontSize:24,fontWeight:"bold",color:"#2c3e50",marginBottom:20,textAlign:"center"},section:{marginBottom:20},label:{fontSize:16,fontWeight:"600",color:"#2c3e50",marginBottom:8},input:{fontSize:16,minHeight:50},checkboxContainer:{marginBottom:8},checkboxHelp:{fontSize:14,color:"#6c757d",fontStyle:"italic"},buttonContainer:{gap:12,marginTop:20}}),bt=n(5470),vt=n(7862);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach(function(t){Ct(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Et(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return At(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ct(e,t,n){return(t=Pt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pt(r.key),r)}}function jt(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pt(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wt(t)?t:t+""}function Dt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return xt(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(xt(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,xt(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,xt(f,"constructor",u),xt(u,"constructor",s),s.displayName="GeneratorFunction",xt(u,o,"GeneratorFunction"),xt(f),xt(f,o,"Generator"),xt(f,r,function(){return this}),xt(f,"toString",function(){return"[object Generator]"}),(Dt=function(){return{w:i,m:d}})()}function xt(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}xt=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){xt(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},xt(e,t,n,r)}function It(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Rt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){It(i,r,o,a,c,"next",e)}function c(e){It(i,r,o,a,c,"throw",e)}a(void 0)})}}var Bt,Lt,Mt,Ft,Nt,zt,Ht,_t,Gt={onSpeechStart:null,onSpeechRecognized:null,onSpeechEnd:null,onSpeechError:null,onSpeechResults:null,onSpeechPartialResults:null,onSpeechVolumeChanged:null,start:(Mt=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:"undefined"!=typeof window&&window;case 1:return e.a(2)}},e)})),function(){return Mt.apply(this,arguments)}),stop:(Lt=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(){return Lt.apply(this,arguments)}),destroy:(Bt=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(){return Bt.apply(this,arguments)})},Wt={setDefaultRate:(Ht=Rt(Dt().m(function e(t){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(e){return Ht.apply(this,arguments)}),setDefaultPitch:(zt=Rt(Dt().m(function e(t){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(e){return zt.apply(this,arguments)}),speak:(Nt=Rt(Dt().m(function e(t){var n;return Dt().w(function(e){for(;;)switch(e.n){case 0:"undefined"!=typeof window&&"speechSynthesis"in window&&(n=new SpeechSynthesisUtterance(t),window.speechSynthesis.speak(n));case 1:return e.a(2)}},e)})),function(e){return Nt.apply(this,arguments)}),stop:(Ft=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:"undefined"!=typeof window&&"speechSynthesis"in window&&window.speechSynthesis.cancel();case 1:return e.a(2)}},e)})),function(){return Ft.apply(this,arguments)}),addEventListener:function(e,t){}},Ut=function(){return jt(function e(){Tt(this,e)},[{key:"startRecorder",value:(r=Rt(Dt().m(function e(t,n){return Dt().w(function(e){for(;;)if(0===e.n)return e.a(2,t)},e)})),function(e,t){return r.apply(this,arguments)})},{key:"stopRecorder",value:(n=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)if(0===e.n)return e.a(2,"recording_result")},e)})),function(){return n.apply(this,arguments)})},{key:"startPlayer",value:(t=Rt(Dt().m(function e(t){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(e){return t.apply(this,arguments)})},{key:"stopPlayer",value:(e=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})}]);var e,t,n,r}(),Vt=new(function(){function e(){var t=this;Tt(this,e),Ct(this,"isListening",!1),Ct(this,"isRecording",!1),Ct(this,"recordingStartTime",null),Ct(this,"currentRecordingPath",null),Ct(this,"audioSettings",{speechRate:.5,speechPitch:1,speechVolume:1,voiceEnabled:!0,audioFeedbackEnabled:!0}),Ct(this,"commandPatterns",[{pattern:/call emergency|emergency help/i,action:"call_emergency"},{pattern:/check in|daily check/i,action:"daily_checkin"},{pattern:/medication|medicine|pills/i,action:"medication"},{pattern:/call family|family|contact/i,action:"family_connection"},{pattern:/help|tutorial|guide/i,action:"help"},{pattern:/home|dashboard|main/i,action:"navigate_home"},{pattern:/activities|routine|exercise/i,action:"activities"},{pattern:/community|resources|services/i,action:"community"},{pattern:/settings|preferences/i,action:"settings"},{pattern:/repeat|say again|louder/i,action:"repeat_last"}]),Ct(this,"onSpeechStart",function(){}),Ct(this,"onSpeechRecognized",function(){}),Ct(this,"onSpeechEnd",function(){t.isListening=!1}),Ct(this,"onSpeechError",function(e){t.isListening=!1}),Ct(this,"onSpeechResults",function(e){}),Ct(this,"onSpeechPartialResults",function(e){}),Ct(this,"onSpeechVolumeChanged",function(e){}),this.audioRecorderPlayer=new Ut,this.initializeVoiceService(),this.initializeTTS()}return jt(e,[{key:"initialize",value:(h=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}},e)})),function(){return h.apply(this,arguments)})},{key:"initializeVoiceService",value:(p=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.n){case 0:try{Gt.onSpeechStart=this.onSpeechStart,Gt.onSpeechRecognized=this.onSpeechRecognized,Gt.onSpeechEnd=this.onSpeechEnd,Gt.onSpeechError=this.onSpeechError,Gt.onSpeechResults=this.onSpeechResults,Gt.onSpeechPartialResults=this.onSpeechPartialResults,Gt.onSpeechVolumeChanged=this.onSpeechVolumeChanged}catch(e){}case 1:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"initializeTTS",value:(y=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Wt.setDefaultRate(this.audioSettings.speechRate);case 1:return e.n=2,Wt.setDefaultPitch(this.audioSettings.speechPitch);case 2:Wt.addEventListener("tts-start",function(){}),Wt.addEventListener("tts-finish",function(){}),Wt.addEventListener("tts-cancel",function(){}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return y.apply(this,arguments)})},{key:"startListening",value:(m=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.audioSettings.voiceEnabled){e.n=1;break}throw new Error("Voice recognition is disabled");case 1:return e.p=1,e.n=2,Gt.start("en-US");case 2:this.isListening=!0,e.n=4;break;case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return m.apply(this,arguments)})},{key:"stopListening",value:(d=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Gt.stop();case 1:this.isListening=!1,e.n=3;break;case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return d.apply(this,arguments)})},{key:"speak",value:(f=Rt(Dt().m(function e(t,n){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.audioSettings.voiceEnabled){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,Wt.stop();case 2:if(null==n||!n.rate){e.n=3;break}return e.n=3,Wt.setDefaultRate(n.rate);case 3:if(null==n||!n.pitch){e.n=4;break}return e.n=4,Wt.setDefaultPitch(n.pitch);case 4:return e.n=5,Wt.speak(t);case 5:e.n=7;break;case 6:throw e.p=6,e.v;case 7:return e.a(2)}},e,this,[[1,6]])})),function(e,t){return f.apply(this,arguments)})},{key:"stopSpeaking",value:(l=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Wt.stop();case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return l.apply(this,arguments)})},{key:"startRecording",value:(u=Rt(Dt().m(function e(){var t,n;return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isRecording){e.n=1;break}throw new Error("Already recording");case 1:return e.p=1,t="voice_note_".concat(Date.now(),".m4a"),n={encoder:"aac",source:"mic",quality:"high",channels:2},e.n=2,this.audioRecorderPlayer.startRecorder(t,n);case 2:this.isRecording=!0,this.recordingStartTime=new Date,this.currentRecordingPath=t,e.n=4;break;case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return u.apply(this,arguments)})},{key:"stopRecording",value:(s=Rt(Dt().m(function e(){var t,n;return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isRecording&&this.recordingStartTime&&this.currentRecordingPath){e.n=1;break}throw new Error("Not currently recording");case 1:return e.p=1,e.n=2,this.audioRecorderPlayer.stopRecorder();case 2:return e.v,t=Date.now()-this.recordingStartTime.getTime(),this.isRecording=!1,this.recordingStartTime=null,n={uri:this.currentRecordingPath,duration:Math.floor(t/1e3),size:0},this.currentRecordingPath=null,e.a(2,n);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return s.apply(this,arguments)})},{key:"playRecording",value:(c=Rt(Dt().m(function e(t){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.audioRecorderPlayer.startPlayer(t);case 1:e.n=3;break;case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return c.apply(this,arguments)})},{key:"stopPlayback",value:(a=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.audioRecorderPlayer.stopPlayer();case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return a.apply(this,arguments)})},{key:"getRecordingStatus",value:function(){var e=this.recordingStartTime?Date.now()-this.recordingStartTime.getTime():0;return{isRecording:this.isRecording,duration:Math.floor(e/1e3)}}},{key:"playAudioFeedback",value:(i=Rt(Dt().m(function e(t){var n,r;return Dt().w(function(e){for(;;)switch(e.n){case 0:if(this.audioSettings.audioFeedbackEnabled){e.n=1;break}return e.a(2);case 1:return n={success:"Done",error:"Something went wrong",warning:"Please be careful",info:"Here's what you need to know"},r={success:{rate:.6,pitch:1.2},error:{rate:.4,pitch:.8},warning:{rate:.5,pitch:1},info:{rate:.5,pitch:1}},e.n=2,this.speak(n[t],r[t]);case 2:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"processVoiceCommand",value:function(e){if(!e||0===e.length)return null;var t,n=e[0].toLowerCase(),r=Et(this.commandPatterns);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(n.match(o.pattern))return{command:n,action:o.action,confidence:.8}}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"updateAudioSettings",value:(o=Rt(Dt().m(function e(t){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.audioSettings=kt(kt({},this.audioSettings),t),e.p=1,void 0===t.speechRate){e.n=2;break}return e.n=2,Wt.setDefaultRate(t.speechRate);case 2:if(void 0===t.speechPitch){e.n=3;break}return e.n=3,Wt.setDefaultPitch(t.speechPitch);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,this,[[1,4]])})),function(e){return o.apply(this,arguments)})},{key:"getAudioSettings",value:function(){return kt({},this.audioSettings)}},{key:"readMessageAloud",value:(r=Rt(Dt().m(function e(t,n){var r;return Dt().w(function(e){for(;;)switch(e.n){case 0:return r=t,n&&(r="Message from ".concat(n,": ").concat(t)),r=r.replace(/[.!?]/g,"$&... "),e.n=1,this.speak(r,{rate:.4,pitch:1});case 1:return e.a(2)}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"provideTutorial",value:(n=Rt(Dt().m(function e(t){var n;return Dt().w(function(e){for(;;)switch(e.n){case 0:return n={daily_checkin:"To complete your daily check-in, tap the colorful mood faces to show how you feel today. Then answer the simple yes or no questions about your health. You can also record a voice note if you want to share more.",emergency:"For emergencies, tap the red emergency button. This will immediately call for help and notify your emergency contacts with your location.",family_connection:"To connect with family, tap on their photo to start a video call, or tap the message button to see their messages. You can also send them photos.",medication:"For medication reminders, you'll see pictures of your medicines with the time to take them. Tap taken when you take your medicine, or skip if you need to skip a dose.",activities:"Daily activities help you stay active and engaged. Choose from the suggested activities, or follow your daily routine checklist.",navigation:"To navigate the app, use the large buttons at the bottom of the screen. You can always tap the home button to return to the main screen."}[t]||"This feature helps you stay connected and confident. Explore the large, clear buttons to get started.",e.n=1,this.speak(n,{rate:.4,pitch:1});case 1:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"cleanup",value:(t=Rt(Dt().m(function e(){return Dt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!this.isListening){e.n=1;break}return e.n=1,this.stopListening();case 1:if(!this.isRecording){e.n=2;break}return e.n=2,this.stopRecording();case 2:return e.n=3,this.stopSpeaking();case 3:return e.n=4,this.stopPlayback();case 4:Gt.destroy(),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,this,[[0,5]])})),function(){return t.apply(this,arguments)})},{key:"setLowPowerMode",value:function(e){}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]);var t,n,r,o,i,a,c,s,u,l,f,d,m,y,p,h}());function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Yt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return $t(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):($t(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,$t(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,$t(f,"constructor",u),$t(u,"constructor",s),s.displayName="GeneratorFunction",$t(u,o,"GeneratorFunction"),$t(f),$t(f,o,"Generator"),$t(f,r,function(){return this}),$t(f,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:i,m:d}})()}function $t(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}$t=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){$t(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},$t(e,t,n,r)}function Qt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Xt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Zt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Xt(i,r,o,a,c,"next",e)}function c(e){Xt(i,r,o,a,c,"throw",e)}a(void 0)})}}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||tn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){if(e){if("string"==typeof e)return nn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rn=function(e){var t=e.contact,n=e.onBack,r=e.onVideoCall,a=e.testID,c=en((0,o.useState)([]),2),s=c[0],l=c[1],d=en((0,o.useState)(""),2),m=d[0],y=d[1],p=en((0,o.useState)(!0),2),h=p[0],g=p[1],b=en((0,o.useState)(!1),2),v=b[0],w=b[1],S=(0,o.useRef)(null),k=lt.getInstance();(0,o.useEffect)(function(){E()},[t.id]);var E=function(){var e=Zt(Kt().m(function e(){var n,r,o,i,a,c;return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,g(!0),e.n=1,k.getMessages(t.id);case 1:n=e.v,l(n),r=n.filter(function(e){return"current-user"===e.toUserId&&!e.readAt}),o=Qt(r),e.p=2,o.s();case 3:if((i=o.n()).done){e.n=5;break}return a=i.value,e.n=4,k.markMessageAsRead(a.id);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,c=e.v,o.e(c);case 7:return e.p=7,o.f(),e.f(7);case 8:e.n=10;break;case 9:e.p=9,e.v,window.alert("Error\n\nFailed to load messages");case 10:return e.p=10,g(!1),e.f(10);case 11:return e.a(2)}},e,null,[[2,6,7,8],[0,9,10,11]])}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Zt(Kt().m(function e(){var n;return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(m.trim()&&!v){e.n=1;break}return e.a(2);case 1:return e.p=1,w(!0),e.n=2,k.sendMessage(t.id,m.trim());case 2:n=e.v,l(function(e){return[].concat(Jt(e),[n])}),y(""),setTimeout(function(){var e;null===(e=S.current)||void 0===e||e.scrollToEnd({animated:!0})},100),e.n=4;break;case 3:e.p=3,e.v,window.alert("Error\n\nFailed to send message");case 4:return e.p=4,w(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Zt(Kt().m(function e(n){var r;return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r="current-user"===n.fromUserId?"You":t.name,e.n=1,Vt.readMessageAloud(n.content,r);case 1:e.n=3;break;case 2:e.p=2,e.v,window.alert("Error\n\nUnable to read message aloud");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Zt(Kt().m(function e(n){var r,o;return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r="https://via.placeholder.com/300x200/4CAF50/FFFFFF?text=Shared+Photo",o="camera"===n?"Just took this photo!":"Sharing a photo with you!",e.n=1,k.sendMessage(t.id,o,"photo",r);case 1:l(function(e){return[].concat(Jt(e),[{id:crypto.randomUUID(),fromUserId:"current-user",toUserId:t.id,content:o,type:"photo",sentAt:new Date,attachmentUrl:r}])}),setTimeout(function(){var e;null===(e=S.current)||void 0===e||e.scrollToEnd({animated:!0})},100),e.n=3;break;case 2:e.p=2,e.v,le.A.alert("Error","Failed to share photo");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),O=function(){le.A.alert("Share Wellness Status","How are you feeling today?",[{text:"Cancel",style:"cancel"},{text:"Great! 😊",onPress:function(){return j(5,5,"Feeling great today!")}},{text:"Good 🙂",onPress:function(){return j(4,4,"Having a good day")}},{text:"Okay 😐",onPress:function(){return j(3,3,"Doing okay")}},{text:"Not great 😔",onPress:function(){return j(2,2,"Not feeling my best")}}])},j=function(){var e=Zt(Kt().m(function e(n,r,o){return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,k.shareWellnessStatus(t.id,{mood:n,energyLevel:r,notes:o});case 1:window.alert("Shared!\n\nYour wellness status has been shared with ".concat(t.name)),E(),e.n=3;break;case 2:e.p=2,e.v,window.alert("Error\n\nFailed to share wellness status");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n,r){return e.apply(this,arguments)}}();return o.createElement(bt.A,{style:on.container,behavior:"ios"===vt.A.OS?"padding":"height",testID:a},o.createElement(i.A,{style:on.header},o.createElement(f.A,{onPress:n,style:on.backButton,testID:"".concat(a,"-back-button"),accessibilityLabel:"Go back to contacts"},o.createElement(J,{style:on.backIcon},"←")),o.createElement(i.A,{style:on.contactInfo},t.photo?o.createElement(ft.A,{source:{uri:t.photo},style:on.headerPhoto,testID:"".concat(a,"-header-photo")}):o.createElement(i.A,{style:on.headerPhotoPlaceholder},o.createElement(J,{style:on.headerPhotoInitial},t.name.charAt(0).toUpperCase())),o.createElement(i.A,{style:on.headerText},o.createElement(J,{style:on.headerName},t.name),o.createElement(J,{style:on.headerRelationship},t.relationship))),o.createElement(i.A,{style:on.headerActions},o.createElement(f.A,{onPress:function(){var e;t.canViewHealthStatus?O():le.A.alert("Permission Required","".concat(t.name," doesn't have permission to view your wellness status. Would you like to enable this?"),[{text:"Cancel",style:"cancel"},{text:"Enable",onPress:(e=Zt(Kt().m(function e(){return Kt().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,k.updateContact(t.id,{canViewHealthStatus:!0});case 1:O(),e.n=3;break;case 2:e.p=2,e.v,le.A.alert("Error","Failed to update permissions");case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return e.apply(this,arguments)})}])},style:on.wellnessButton,testID:"".concat(a,"-wellness-button"),accessibilityLabel:"Share wellness status"},o.createElement(J,{style:on.wellnessIcon},"💚")),o.createElement(f.A,{onPress:r,style:on.videoCallButton,testID:"".concat(a,"-video-call-button"),accessibilityLabel:"Start video call with ".concat(t.name)},o.createElement(J,{style:on.videoCallIcon},"📹")))),o.createElement(u.A,{ref:S,style:on.messagesContainer,contentContainerStyle:on.messagesContent,showsVerticalScrollIndicator:!1,onContentSizeChange:function(){var e;return null===(e=S.current)||void 0===e?void 0:e.scrollToEnd({animated:!0})}},h?o.createElement(i.A,{style:on.loadingContainer},o.createElement(J,{style:on.loadingText},"Loading messages...")):0===s.length?o.createElement(i.A,{style:on.emptyContainer},o.createElement(J,{style:on.emptyText},"No messages yet"),o.createElement(J,{style:on.emptySubtext},"Start a conversation!")):s.map(function(e,n){return function(e,n){var r="current-user"===e.fromUserId,c="photo"===e.type&&e.attachmentUrl;return o.createElement(i.A,{key:e.id,style:[on.messageContainer,r?on.userMessage:on.contactMessage],testID:"".concat(a,"-message-").concat(n)},o.createElement(f.A,{onPress:function(){return C(e)},style:[on.messageContent,r?on.userMessageContent:on.contactMessageContent],accessibilityLabel:"Message from ".concat(r?"you":t.name,": ").concat(e.content),accessibilityHint:"Tap to read aloud"},c&&o.createElement(ft.A,{source:{uri:e.attachmentUrl},style:on.messagePhoto,testID:"".concat(a,"-message-photo-").concat(n)}),o.createElement(J,{style:[on.messageText,r?on.userMessageText:on.contactMessageText]},e.content),o.createElement(i.A,{style:on.messageFooter},o.createElement(J,{style:on.messageTime},e.sentAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),o.createElement(f.A,{onPress:function(){return C(e)},style:on.speakButton,testID:"".concat(a,"-speak-button-").concat(n),accessibilityLabel:"Read message aloud"},o.createElement(J,{style:on.speakIcon},"🔊 Read Aloud")))))}(e,n)})),o.createElement(i.A,{style:on.inputContainer},o.createElement(f.A,{onPress:function(){le.A.alert("Share Photo","Choose how to share a photo:",[{text:"Cancel",style:"cancel"},{text:"📷 Take Photo",onPress:function(){return T("camera")}},{text:"🖼️ Choose from Gallery",onPress:function(){return T("gallery")}}])},style:on.photoButton,testID:"".concat(a,"-photo-button"),accessibilityLabel:"Share a photo"},o.createElement(J,{style:on.photoIcon},"📷")),o.createElement(ee.A,{style:on.textInput,value:m,onChangeText:y,placeholder:"Type your message...",placeholderTextColor:"#adb5bd",multiline:!0,maxLength:500,testID:"".concat(a,"-text-input"),accessibilityLabel:"Message input"}),o.createElement(I,{title:"Send",onPress:A,disabled:!m.trim()||v,style:[on.sendButton,(!m.trim()||v)&&on.sendButtonDisabled],textStyle:on.sendButtonText,testID:"".concat(a,"-send-button"),accessibilityLabel:"Send message"})))},on=a.A.create((Yt(Yt(Yt(Yt(Yt(Yt(Yt(Yt(Yt(Yt(_t={container:{flex:1,backgroundColor:"#f8f9fa"},header:{flexDirection:"row",alignItems:"center",padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"},backButton:{padding:8,marginRight:12},backIcon:{fontSize:24,color:"#007bff"},contactInfo:{flex:1,flexDirection:"row",alignItems:"center"},headerPhoto:{width:48,height:48,borderRadius:24,marginRight:12},headerPhotoPlaceholder:{width:48,height:48,borderRadius:24,backgroundColor:"#6c757d",justifyContent:"center",alignItems:"center",marginRight:12},headerPhotoInitial:{fontSize:20,fontWeight:"bold",color:"#ffffff"},headerText:{flex:1},headerName:{fontSize:20,fontWeight:"bold",color:"#2c3e50"},headerRelationship:{fontSize:16,color:"#6c757d"},headerActions:{flexDirection:"row",alignItems:"center"},wellnessButton:{padding:12,backgroundColor:"#17a2b8",borderRadius:8,marginRight:8},wellnessIcon:{fontSize:20},videoCallButton:{padding:12,backgroundColor:"#28a745",borderRadius:8},videoCallIcon:{fontSize:20},messagesContainer:{flex:1},messagesContent:{padding:16,paddingBottom:32},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:40},loadingText:{fontSize:18,color:"#6c757d"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:40},emptyText:{fontSize:20,color:"#6c757d",marginBottom:8},emptySubtext:{fontSize:16,color:"#adb5bd"},messageContainer:{marginBottom:16},userMessage:{alignItems:"flex-end"},contactMessage:{alignItems:"flex-start"},messageContent:{maxWidth:"80%",padding:16,borderRadius:12},userMessageContent:{backgroundColor:"#007bff"},contactMessageContent:{backgroundColor:"#e9ecef"}},"userMessageContent",{backgroundColor:"#007bff"}),"contactMessageContent",{backgroundColor:"#e9ecef"}),"userMessageText",{color:"#ffffff"}),"contactMessageText",{color:"#2c3e50"}),"messageText",{fontSize:18,lineHeight:24}),"messagePhoto",{width:200,height:200,borderRadius:8,marginBottom:8}),"messageFooter",{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8}),"messageTime",{fontSize:14,color:"#adb5bd"}),"speakButton",{padding:8,backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:6,marginLeft:8}),"speakIcon",{fontSize:14,color:"#ffffff",fontWeight:"bold"}),Yt(Yt(Yt(Yt(Yt(Yt(Yt(_t,"inputContainer",{flexDirection:"row",alignItems:"flex-end",padding:16,backgroundColor:"#ffffff",borderTopWidth:1,borderTopColor:"#e9ecef"}),"photoButton",{padding:12,marginRight:8,backgroundColor:"#f8f9fa",borderRadius:8}),"photoIcon",{fontSize:20}),"textInput",{flex:1,borderWidth:1,borderColor:"#ced4da",borderRadius:8,padding:12,fontSize:18,maxHeight:100,marginRight:8}),"sendButton",{backgroundColor:"#007bff",paddingHorizontal:20,paddingVertical:12}),"sendButtonDisabled",{backgroundColor:"#adb5bd"}),"sendButtonText",{fontSize:16,fontWeight:"bold"})));function an(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function cn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return sn(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(sn(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,sn(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,sn(f,"constructor",u),sn(u,"constructor",s),s.displayName="GeneratorFunction",sn(u,o,"GeneratorFunction"),sn(f),sn(f,o,"Generator"),sn(f,r,function(){return this}),sn(f,"toString",function(){return"[object Generator]"}),(cn=function(){return{w:i,m:d}})()}function sn(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}sn=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){sn(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},sn(e,t,n,r)}function un(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ln(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){un(i,r,o,a,c,"next",e)}function c(e){un(i,r,o,a,c,"throw",e)}a(void 0)})}}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||dn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){if(e){if("string"==typeof e)return mn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yn=function(e){var t=e.testID,n=fn((0,o.useState)([]),2),r=n[0],a=n[1],c=fn((0,o.useState)(null),2),s=c[0],l=c[1],f=fn((0,o.useState)("contacts"),2),d=f[0],m=f[1],y=fn((0,o.useState)(!0),2),p=y[0],h=y[1],g=fn((0,o.useState)(null),2),b=g[0],v=g[1],w=fn((0,o.useState)(null),2),S=w[0],k=w[1],E=lt.getInstance();(0,o.useEffect)(function(){A()},[]);var A=function(){var e=ln(cn().m(function e(){var t,n,r,o;return cn().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,h(!0),v(null),e.n=1,E.getContacts();case 1:if(0!==(t=e.v).length){e.n=9;break}n=0,r=[{name:"Sarah Johnson",relationship:"Daughter",phoneNumber:"+1-555-987-6543",email:"sarah.johnson@email.com",isEmergencyContact:!0,canViewHealthStatus:!0},{name:"Michael Brown",relationship:"Son",phoneNumber:"+1-555-123-4567",email:"michael.brown@email.com",isEmergencyContact:!0,canViewHealthStatus:!0},{name:"Emily Davis",relationship:"Friend",phoneNumber:"+1-555-456-7890",email:"emily.davis@email.com",isEmergencyContact:!1,canViewHealthStatus:!1},{name:"Dr. Wilson",relationship:"Doctor",phoneNumber:"+1-555-789-0123",email:"dr.wilson@clinic.com",isEmergencyContact:!1,canViewHealthStatus:!0},{name:"Lisa Anderson",relationship:"Neighbor",phoneNumber:"+1-555-321-6547",email:"lisa.anderson@email.com",isEmergencyContact:!1,canViewHealthStatus:!1}];case 2:if(!(n<r.length)){e.n=7;break}return o=r[n],e.p=3,e.n=4,E.addContact(o);case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:n++,e.n=2;break;case 7:return e.n=8,E.getContacts();case 8:t=e.v;case 9:a(t),e.n=11;break;case 10:e.p=10,e.v,v("Failed to load family contacts");case 11:return e.p=11,h(!1),e.f(11);case 12:return e.a(2)}},e,null,[[3,5],[0,10,11,12]])}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=ln(cn().m(function e(t){return cn().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l(t),m("video"),e.n=1,E.initiateVideoCall(t.id);case 1:e.n=3;break;case 2:e.p=2,e.v,window.alert("Call Failed\n\nUnable to start video call. Please try again.");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=ln(cn().m(function e(t){return cn().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!window.confirm("Are you sure you want to delete ".concat(t.name,"? This action cannot be undone."))){e.n=5;break}return e.p=1,e.n=2,E.deleteContact(t.id);case 2:return window.alert("".concat(t.name," has been deleted successfully.")),e.n=3,A();case 3:e.n=5;break;case 4:e.p=4,e.v,window.alert("Failed to delete contact. Please try again.");case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=ln(cn().m(function e(t){return cn().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!S){e.n=2;break}return e.n=1,E.updateContact(S.id,t);case 1:window.alert("".concat(t.name," has been updated successfully.")),e.n=4;break;case 2:return e.n=3,E.addContact(t);case 3:window.alert("".concat(t.name," has been added successfully."));case 4:return m("contacts"),e.n=5,A();case 5:e.n=7;break;case 6:e.p=6,e.v,window.alert("Failed to save contact. Please try again.");case 7:return e.a(2)}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}();return p?o.createElement(i.A,{style:pn.container,testID:t},o.createElement(i.A,{style:pn.loadingContainer},o.createElement(J,{style:pn.loadingText},"Loading family contacts..."))):b?o.createElement(i.A,{style:pn.container,testID:t},o.createElement(G,{style:pn.errorCard},o.createElement(J,{style:pn.errorText},b),o.createElement(I,{title:"Try Again",onPress:A,accessibilityLabel:"Retry loading contacts"}))):"messages"===d&&s?o.createElement(rn,{contact:s,onBack:function(){l(null),m("contacts"),A()},onVideoCall:function(){return C(s)},testID:"".concat(t,"-messages")}):"add-contact"===d||"edit-contact"===d?o.createElement(ht,{contact:S,onSave:O,onCancel:function(){k(null),m("contacts")},testID:"".concat(t,"-contact-form")}):o.createElement(i.A,{style:pn.container,testID:t},o.createElement(i.A,{style:pn.header},o.createElement(J,{style:pn.title},"Family & Friends"),o.createElement(J,{style:pn.subtitle},"Stay connected with your loved ones")),o.createElement(i.A,{style:pn.testDataContainer},o.createElement(I,{title:"➕ Add Contact",onPress:function(){k(null),m("add-contact")},accessibilityLabel:"Add new contact"}),o.createElement(I,{title:"➕ Add Test Contacts",onPress:A,accessibilityLabel:"Add test contacts"}),o.createElement(I,{title:"🗑️ Clear All Contacts",onPress:ln(cn().m(function e(){var t,n,r,o,i;return cn().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,E.getContacts();case 1:t=e.v,n=an(t),e.p=2,n.s();case 3:if((r=n.n()).done){e.n=5;break}return o=r.value,e.n=4,E.deleteContact(o.id);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,i=e.v,n.e(i);case 7:return e.p=7,n.f(),e.f(7);case 8:return window.alert("All contacts cleared successfully!"),e.n=9,A();case 9:e.n=11;break;case 10:e.p=10,e.v,window.alert("Failed to clear contacts. Please try again.");case 11:return e.a(2)}},e,null,[[2,6,7,8],[0,10]])})),variant:"secondary",accessibilityLabel:"Clear all contacts"})),o.createElement(u.A,{style:pn.contactsList,contentContainerStyle:pn.contactsContent,showsVerticalScrollIndicator:!0},0===r.length?o.createElement(G,{style:pn.emptyCard},o.createElement(J,{style:pn.emptyText},"No contacts added yet"),o.createElement(J,{style:pn.emptySubtext},"Ask a family member to help you add contacts")):r.map(function(e){return o.createElement(dt,{key:e.id,contact:e,onPress:function(){return function(e){l(e),m("messages")}(e)},onVideoCall:function(){return C(e)},onEdit:function(){return function(e){k(e),m("edit-contact")}(e)},onDelete:function(){return T(e)},testID:"".concat(t,"-contact-").concat(e.id)})})))},pn=a.A.create({container:{flex:1,backgroundColor:"#f8f9fa"},header:{padding:20,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"},title:{fontSize:28,fontWeight:"bold",color:"#2c3e50",marginBottom:4},subtitle:{fontSize:18,color:"#6c757d"},contactsList:{flex:1},contactsContent:{padding:16,paddingBottom:32},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},loadingText:{fontSize:20,color:"#6c757d",textAlign:"center"},errorCard:{margin:20,padding:24,alignItems:"center"},errorText:{fontSize:18,color:"#dc3545",textAlign:"center",marginBottom:16},retryButton:{minWidth:120},emptyCard:{padding:32,alignItems:"center",marginTop:40},emptyText:{fontSize:20,color:"#6c757d",textAlign:"center",marginBottom:8},emptySubtext:{fontSize:16,color:"#adb5bd",textAlign:"center"},testDataContainer:{flexDirection:"row",gap:12,padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"}}),hn=function(e){var t=e.navigation;return o.createElement(i.A,{style:gn.container},o.createElement(i.A,{style:gn.header},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"})),o.createElement(yn,{testID:"family-connection-screen"}))},gn=a.A.create({container:{flex:1},header:{padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"}}),bn=n(5539),vn=n(7043),wn=n(8952),Sn=wn.Ik({id:wn.Yj().uuid(),name:wn.Yj().min(1,"Name is required"),category:wn.k5(["healthcare","transportation","social","emergency"]),description:wn.Yj().min(1,"Description is required"),address:wn.Yj().min(1,"Address is required"),phoneNumber:wn.Yj().regex(/^\+?[\d\s\-\(\)\.]+$/,"Invalid phone number format"),website:wn.Yj().url().optional(),hours:wn.Yj().min(1,"Hours are required"),distance:wn.ai().min(0).optional(),rating:wn.ai().min(0).max(5).optional(),isVerified:wn.zM()}),kn=wn.Ik({id:wn.Yj().uuid(),title:wn.Yj().min(1,"Title is required"),description:wn.Yj().min(1,"Description is required"),category:wn.k5(["exercise","social","educational","creative"]),difficulty:wn.k5(["easy","moderate"]),estimatedDuration:wn.ai().int().min(1),instructions:wn.YO(wn.Yj().min(1)),isCompleted:wn.zM(),completedAt:wn.p6().optional(),userId:wn.Yj().uuid()}),En=wn.Ik({id:wn.Yj().uuid(),title:wn.Yj().min(1,"Title is required"),description:wn.Yj().min(1,"Description is required"),location:wn.Yj().min(1,"Location is required"),startTime:wn.p6(),endTime:wn.p6(),category:wn.k5(["social","educational","health","recreational"]),maxParticipants:wn.ai().int().min(1).optional(),currentParticipants:wn.ai().int().min(0),isRegistered:wn.zM()}),An=(wn.Ik({resources:wn.YO(Sn),activities:wn.YO(kn),events:wn.YO(En)}),function(e){return Sn.parse(e)}),Cn=function(e){return En.parse(e)},Tn=n(7236);function On(e){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(e)}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach(function(t){Dn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=On(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=On(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==On(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xn=function(e){var t=Pn(Pn({},{id:crypto.randomUUID(),name:"Sunrise Senior Center",category:"social",description:"Community center offering activities and support for seniors",address:"123 Main Street, Anytown, ST 12345",phoneNumber:"+1-555-123-4567",website:"https://sunrisesenior.org",hours:"Mon-Fri 9:00 AM - 5:00 PM",rating:4.5,isVerified:!0,coordinates:{latitude:37.7749+.1*(Math.random()-.5),longitude:.1*(Math.random()-.5)-122.4194},services:["Social Activities","Meal Programs","Transportation"],accessibility:{wheelchairAccessible:!0,hearingLoop:!0,largeText:!0}}),e);return null!=e&&e.distance||delete t.distance,t},In=function(e){return Pn({id:crypto.randomUUID(),title:"Senior Book Club",description:"Monthly book discussion group for seniors",location:"Community Library, Room 201",startTime:new Date(Date.now()+6048e5),endTime:new Date(Date.now()+6048e5+72e5),category:"social",maxParticipants:15,currentParticipants:8,isRegistered:!1},e)},Rn=function(e){var t=[{name:"General Hospital",category:"healthcare",description:"Full-service hospital with emergency care",services:["Emergency Care","Cardiology","Geriatric Medicine","Physical Therapy"],hours:"24/7"},{name:"Senior Health Clinic",category:"healthcare",description:"Specialized healthcare services for seniors",services:["Primary Care","Wellness Checkups","Medication Management"],hours:"Mon-Fri 8:00 AM - 6:00 PM"},{name:"Senior Transit Service",category:"transportation",description:"Door-to-door transportation for seniors",services:["Medical Appointments","Grocery Shopping","Social Outings"],hours:"Mon-Fri 7:00 AM - 7:00 PM"},{name:"City Bus Service",category:"transportation",description:"Public transportation with senior discounts",services:["Regular Routes","Senior Discounts","Wheelchair Accessible"],hours:"Daily 5:00 AM - 11:00 PM"},{name:"Community Center",category:"social",description:"Activities and programs for seniors",services:["Exercise Classes","Social Events","Educational Programs"],hours:"Mon-Fri 9:00 AM - 5:00 PM"},{name:"Senior Center",category:"social",description:"Dedicated space for senior activities and support",services:["Meal Programs","Game Rooms","Support Groups"],hours:"Mon-Sat 8:00 AM - 6:00 PM"},{name:"Emergency Services",category:"emergency",description:"24/7 emergency response services",services:["Emergency Response","Medical Emergency","Safety Check"],hours:"24/7"},{name:"Crisis Support Hotline",category:"emergency",description:"Mental health and crisis support for seniors",services:["Crisis Counseling","Mental Health Support","Referral Services"],hours:"24/7"}];return Array.from({length:e},function(e,n){var r=t[n%t.length];return xn({name:"".concat(r.name," ").concat(Math.floor(n/t.length)+1),category:r.category,description:r.description,services:r.services,hours:r.hours,rating:2*Math.random()+3,isVerified:Math.random()>.2,coordinates:{latitude:37.7749+.2*(Math.random()-.5),longitude:.2*(Math.random()-.5)-122.4194},accessibility:{wheelchairAccessible:Math.random()>.3,hearingLoop:Math.random()>.5,largeText:Math.random()>.2}})})},Bn=function(e){var t=[{title:"Senior Book Club",category:"social",description:"Monthly book discussion group for seniors",location:"Community Library, Room 201"},{title:"Gentle Yoga Class",category:"health",description:"Low-impact yoga designed for seniors of all abilities",location:"Senior Center, Exercise Room"},{title:"Technology Workshop",category:"educational",description:"Learn how to use smartphones and tablets effectively",location:"Community Center, Computer Lab"},{title:"Garden Club Meeting",category:"recreational",description:"Share gardening tips and socialize with fellow gardeners",location:"Botanical Gardens, Meeting Room"}];return Array.from({length:e},function(e,n){var r=t[n%t.length],o=3*(n+1),i=new Date(Date.now()+24*o*60*60*1e3),a=new Date(i.getTime()+72e5);return In({title:r.title,category:r.category,description:r.description,location:r.location,startTime:i,endTime:a,maxParticipants:10+n%10,currentParticipants:n%8,isRegistered:n%5==0})})};function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function Mn(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach(function(t){Hn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hn(e,t,n){return(t=qn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Gn(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Gn(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Gn(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Gn(f,"constructor",u),Gn(u,"constructor",s),s.displayName="GeneratorFunction",Gn(u,o,"GeneratorFunction"),Gn(f),Gn(f,o,"Generator"),Gn(f,r,function(){return this}),Gn(f,"toString",function(){return"[object Generator]"}),(_n=function(){return{w:i,m:d}})()}function Gn(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Gn=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Gn(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Gn(e,t,n,r)}function Wn(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Un(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Wn(i,r,o,a,c,"next",e)}function c(e){Wn(i,r,o,a,c,"throw",e)}a(void 0)})}}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qn(r.key),r)}}function qn(e){var t=function(e,t){if("object"!=Ln(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ln(t)?t:t+""}var Yn="community_resources",Jn="community_events",Kn="user_interests",$n="user_needs";const Qn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=new Tn.H}return t=e,n=[{key:"initializeResources",value:(A=Un(_n().m(function e(){var t,n;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON(Yn);case 1:if((t=e.v)&&0!==t.length){e.n=2;break}return n=Rn(12),e.n=2,this.storage.setJSON(Yn,n);case 2:return e.a(2)}},e,this)})),function(){return A.apply(this,arguments)})},{key:"initializeEvents",value:(E=Un(_n().m(function e(){var t,n;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON(Jn);case 1:if((t=e.v)&&0!==t.length){e.n=2;break}return n=Bn(8),e.n=2,this.storage.setJSON(Jn,n);case 2:return e.a(2)}},e,this)})),function(){return E.apply(this,arguments)})},{key:"clearResources",value:(k=Un(_n().m(function e(){return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.setJSON(Yn,[]);case 1:return e.a(2)}},e,this)})),function(){return k.apply(this,arguments)})},{key:"clearEvents",value:(S=Un(_n().m(function e(){return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.setJSON(Jn,[]);case 1:return e.a(2)}},e,this)})),function(){return S.apply(this,arguments)})},{key:"getAllResources",value:(w=Un(_n().m(function e(){var t;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.initializeResources();case 1:return e.n=2,this.storage.getJSON(Yn);case 2:return t=e.v,e.a(2,t||[])}},e,this)})),function(){return w.apply(this,arguments)})},{key:"getResourcesByCategory",value:(v=Un(_n().m(function e(t){var n;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAllResources();case 1:return n=e.v,e.a(2,n.filter(function(e){return e.category===t}))}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"updateResourceDistances",value:(b=Un(_n().m(function e(t){var n,r,o=this;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAllResources();case 1:return n=e.v,r=n.map(function(e){return zn(zn({},e),{},{distance:o.calculateDistance(t,e)})}),e.n=2,this.storage.setJSON(Yn,r);case 2:return e.a(2,r)}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"getResourcesByDistance",value:(g=Un(_n().m(function e(t){var n;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.updateResourceDistances(t);case 1:return n=e.v,e.a(2,Mn(n).sort(function(e,t){return(e.distance||1/0)-(t.distance||1/0)}))}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"getFilteredResources",value:(h=Un(_n().m(function e(t,n){var r;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAllResources();case 1:if(r=e.v,!t){e.n=3;break}return e.n=2,this.updateResourceDistances(t);case 2:r=e.v;case 3:return n.category&&(r=r.filter(function(e){return e.category===n.category})),n.userNeeds&&n.userNeeds.length>0&&(r=r.filter(function(e){var t={healthcare:["healthcare","memory"],transportation:["transportation","mobility"],social:["social"],emergency:["healthcare","mobility","vision","hearing","memory"]},r=n.userNeeds.some(function(n){var r;return null===(r=t[e.category])||void 0===r?void 0:r.includes(n)}),o=n.userNeeds.some(function(t){if(!e.accessibility)return!1;switch(t){case"mobility":return e.accessibility.wheelchairAccessible;case"hearing":return e.accessibility.hearingLoop;case"vision":return e.accessibility.largeText;default:return!1}});return r||o})),t&&void 0!==n.maxDistance&&(r=r.filter(function(e){return(e.distance||1/0)<=n.maxDistance})),void 0!==n.isVerified&&(r=r.filter(function(e){return e.isVerified===n.isVerified})),t&&r.sort(function(e,t){return(e.distance||1/0)-(t.distance||1/0)}),e.a(2,r)}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"addResource",value:(p=Un(_n().m(function e(t){var n,r;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAllResources();case 1:return n=e.v,r=zn(zn({},t),{},{id:crypto.randomUUID()}),An(r),n.push(r),e.n=2,this.storage.setJSON(Yn,n);case 2:return e.a(2,r)}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"updateResource",value:(y=Un(_n().m(function e(t,n){var r,o,i;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAllResources();case 1:if(r=e.v,-1!==(o=r.findIndex(function(e){return e.id===t}))){e.n=2;break}return e.a(2,null);case 2:return i=zn(zn({},r[o]),n),An(i),r[o]=i,e.n=3,this.storage.setJSON(Yn,r);case 3:return e.a(2,i)}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"deleteResource",value:(m=Un(_n().m(function e(t){var n,r;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAllResources();case 1:if(n=e.v,(r=n.filter(function(e){return e.id!==t})).length!==n.length){e.n=2;break}return e.a(2,!1);case 2:return e.n=3,this.storage.setJSON(Yn,r);case 3:return e.a(2,!0)}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"getCommunityEvents",value:(d=Un(_n().m(function e(){var t;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.initializeEvents();case 1:return e.n=2,this.storage.getJSON(Jn);case 2:return t=e.v,e.a(2,t||[])}},e,this)})),function(){return d.apply(this,arguments)})},{key:"getEventSuggestions",value:(f=Un(_n().m(function e(t){var n,r;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getUserInterests(t);case 1:return n=e.v,e.n=2,this.getCommunityEvents();case 2:if(r=e.v,n&&0!==n.categories.length){e.n=3;break}return e.a(2,r);case 3:return e.a(2,r.filter(function(e){return n.categories.includes(e.category)}))}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"addEvent",value:(l=Un(_n().m(function e(t){var n,r;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityEvents();case 1:return n=e.v,r=zn(zn({},t),{},{id:crypto.randomUUID()}),Cn(r),n.push(r),e.n=2,this.storage.setJSON(Jn,n);case 2:return e.a(2,r)}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"updateEvent",value:(u=Un(_n().m(function e(t,n){var r,o,i;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityEvents();case 1:if(r=e.v,-1!==(o=r.findIndex(function(e){return e.id===t}))){e.n=2;break}return e.a(2,null);case 2:return i=zn(zn({},r[o]),n),Cn(i),r[o]=i,e.n=3,this.storage.setJSON(Jn,r);case 3:return e.a(2,i)}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"registerForEvent",value:(s=Un(_n().m(function e(t,n){var r,o;return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getCommunityEvents();case 1:if(r=e.v,-1!==(o=r.findIndex(function(e){return e.id===t}))){e.n=2;break}return e.a(2,null);case 2:if(!(r[o].maxParticipants&&r[o].currentParticipants>=r[o].maxParticipants)){e.n=3;break}throw new Error("Event has reached maximum participants");case 3:return r[o]=zn(zn({},r[o]),{},{currentParticipants:r[o].currentParticipants+1,isRegistered:!0}),e.n=4,this.storage.setJSON(Jn,r);case 4:return e.a(2,r[o])}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"saveUserInterests",value:(c=Un(_n().m(function e(t,n){var r;return _n().w(function(e){for(;;)switch(e.n){case 0:return r={userId:t,categories:n},e.n=1,this.storage.setJSON("".concat(Kn,"_").concat(t),r);case 1:return e.a(2)}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"getUserInterests",value:(a=Un(_n().m(function e(t){return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON("".concat(Kn,"_").concat(t));case 1:return e.a(2,e.v)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"saveUserNeeds",value:(i=Un(_n().m(function e(t,n){var r;return _n().w(function(e){for(;;)switch(e.n){case 0:return r={userId:t,needs:n},e.n=1,this.storage.setJSON("".concat($n,"_").concat(t),r);case 1:return e.a(2)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"getUserNeeds",value:(o=Un(_n().m(function e(t){return _n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.storage.getJSON("".concat($n,"_").concat(t));case 1:return e.a(2,e.v)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"calculateDistance",value:function(e,t){return t.coordinates?this.haversineDistance(e,t.coordinates):this.calculateMockDistance(e,t.id)}},{key:"haversineDistance",value:function(e,t){var n=this.toRadians(t.latitude-e.latitude),r=this.toRadians(t.longitude-e.longitude),o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(this.toRadians(e.latitude))*Math.cos(this.toRadians(t.latitude))*Math.sin(r/2)*Math.sin(r/2),i=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*3959;return Math.max(.1,Math.round(10*i)/10)}},{key:"toRadians",value:function(e){return e*(Math.PI/180)}},{key:"calculateMockDistance",value:function(e,t){return Array.from(t).reduce(function(e,t){return e+t.charCodeAt(0)},0)%145/10+.5}}],r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],n&&Vn(t.prototype,n),r&&Vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i,a,c,s,u,l,f,d,m,y,p,h,g,b,v,w,S,k,E,A}();function Xn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Zn(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Zn(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Zn(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Zn(f,"constructor",u),Zn(u,"constructor",s),s.displayName="GeneratorFunction",Zn(u,o,"GeneratorFunction"),Zn(f),Zn(f,o,"Generator"),Zn(f,r,function(){return this}),Zn(f,"toString",function(){return"[object Generator]"}),(Xn=function(){return{w:i,m:d}})()}function Zn(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Zn=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Zn(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Zn(e,t,n,r)}function er(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rr=a.A.create({container:{flex:1,padding:16},title:{fontSize:24,fontWeight:"bold",marginBottom:16,textAlign:"center"},categoryContainer:{marginBottom:16},categoryScrollContent:{paddingHorizontal:16},filterLabel:{fontSize:18,marginBottom:8},categoryButton:{paddingHorizontal:16,paddingVertical:12,borderRadius:20,backgroundColor:"#f0f0f0",marginRight:8,minWidth:100,alignItems:"center"},selectedCategoryButton:{backgroundColor:"#4a80f5"},categoryButtonText:{fontSize:16,fontWeight:"500"},selectedCategoryText:{color:"white"},resourcesList:{paddingBottom:20},resourceCard:{marginBottom:16,padding:16},resourceHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},resourceTitleContainer:{flexDirection:"row",alignItems:"center",flex:1},categoryIcon:{fontSize:24,marginRight:8},resourceName:{fontSize:20,fontWeight:"bold",flex:1},distance:{fontSize:16,fontWeight:"500",color:"#666"},resourceDescription:{fontSize:16,marginBottom:8},resourceAddress:{fontSize:16,color:"#555",marginBottom:4},resourceHours:{fontSize:16,color:"#555",marginBottom:12},actionButtons:{flexDirection:"row",justifyContent:"space-between"},callButton:{flex:1,marginRight:8,backgroundColor:"#4CAF50"},directionsButton:{flex:1,marginLeft:8,backgroundColor:"#2196F3"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{fontSize:18,color:"#666"},errorContainer:{padding:16,backgroundColor:"#ffebee",borderRadius:8,marginBottom:16},errorText:{fontSize:16,color:"#c62828"},emptyContainer:{padding:24,alignItems:"center"},emptyText:{fontSize:18,color:"#666",textAlign:"center"},servicesContainer:{marginVertical:8},servicesLabel:{fontSize:14,fontWeight:"bold",color:"#333",marginBottom:4},servicesText:{fontSize:14,color:"#666"},accessibilityContainer:{flexDirection:"row",alignItems:"center",marginVertical:4},accessibilityLabel:{fontSize:14,fontWeight:"bold",color:"#333",marginRight:8},accessibilityIcons:{flexDirection:"row"},accessibilityIcon:{fontSize:16,marginRight:4},ratingContainer:{marginVertical:4},ratingText:{fontSize:14,color:"#4a80f5",fontWeight:"500"}});const or=function(e){e.userId;var t=e.initialCategory,n=e.userLocation,r=e.onResourceSelect,a=e.resourceFilter,c=tr((0,o.useState)([]),2),s=c[0],l=c[1],m=tr((0,o.useState)(!0),2),y=m[0],p=m[1],h=tr((0,o.useState)(t||"all"),2),g=h[0],b=h[1],v=tr((0,o.useState)(null),2),w=v[0],S=v[1],k=new Qn(new Tn.H);(0,o.useEffect)(function(){E()},[g,n,a]);var E=function(){var e,t=(e=Xn().m(function e(){var t;return Xn().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,p(!0),S(null),!a){e.n=2;break}return e.n=1,k.getFilteredResources(n||null,a);case 1:t=e.v,e.n=6;break;case 2:if(!n){e.n=4;break}return e.n=3,k.getResourcesByDistance(n);case 3:t=e.v,e.n=6;break;case 4:return e.n=5,k.getAllResources();case 5:t=e.v;case 6:"all"!==g&&(t=t.filter(function(e){return e.category===g})),l(t),e.n=8;break;case 7:e.p=7,e.v,S("Unable to load community resources. Please try again.");case 8:return e.p=8,p(!1),e.f(8);case 9:return e.a(2)}},e,null,[[0,7,8,9]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){er(i,r,o,a,c,"next",e)}function c(e){er(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}(),A=function(e){var t=e.item;return o.createElement(G,{style:rr.resourceCard},o.createElement(f.A,{onPress:function(){return r&&r(t)},accessibilityRole:"button",accessibilityLabel:"".concat(t.name,", ").concat(t.category," resource")},o.createElement(i.A,{style:rr.resourceHeader},o.createElement(i.A,{style:rr.resourceTitleContainer},o.createElement(d.A,{style:rr.categoryIcon},function(e){switch(e){case"healthcare":return"🏥";case"transportation":return"🚌";case"social":return"👥";case"emergency":return"🚨";default:return"📍"}}(t.category)),o.createElement(J,{style:rr.resourceName},t.name)),void 0!==t.distance&&o.createElement(J,{style:rr.distance},t.distance.toFixed(1)," mi")),o.createElement(J,{style:rr.resourceDescription},t.description),o.createElement(J,{style:rr.resourceAddress},t.address),o.createElement(J,{style:rr.resourceHours},t.hours),t.services&&t.services.length>0&&o.createElement(i.A,{style:rr.servicesContainer},o.createElement(J,{style:rr.servicesLabel},"Services:"),o.createElement(J,{style:rr.servicesText},t.services.join(", "))),t.accessibility&&o.createElement(i.A,{style:rr.accessibilityContainer},o.createElement(J,{style:rr.accessibilityLabel},"Accessibility:"),o.createElement(i.A,{style:rr.accessibilityIcons},t.accessibility.wheelchairAccessible&&o.createElement(J,{style:rr.accessibilityIcon},"♿"),t.accessibility.hearingLoop&&o.createElement(J,{style:rr.accessibilityIcon},"🔊"),t.accessibility.largeText&&o.createElement(J,{style:rr.accessibilityIcon},"🔍"))),t.rating&&o.createElement(i.A,{style:rr.ratingContainer},o.createElement(J,{style:rr.ratingText},"⭐ ",t.rating.toFixed(1)," ",t.isVerified&&"✓ Verified")),o.createElement(i.A,{style:rr.actionButtons},o.createElement(i.A,{style:rr.callButton},o.createElement(I,{title:"Call",onPress:function(){return e=t.phoneNumber,n=e.replace(/[^\d+]/g,""),r="ios"===vt.A.OS?"telprompt:".concat(n):"tel:".concat(n),void bn.A.canOpenURL(r).then(function(e){if(e)return bn.A.openURL(r);S("Phone calls are not supported on this device")}).catch(function(e){S("An error occurred while trying to make a call")});var e,n,r},accessibilityLabel:"Call ".concat(t.name),variant:"primary",size:"medium"})),o.createElement(i.A,{style:rr.directionsButton},o.createElement(I,{title:"Directions",onPress:function(){return e=t.address,n=encodeURIComponent(e),r="ios"===vt.A.OS?"maps:?q=".concat(n):"geo:0,0?q=".concat(n),void bn.A.canOpenURL(r).then(function(e){return e?bn.A.openURL(r):bn.A.openURL("https://maps.google.com/?q=".concat(n))}).catch(function(e){S("An error occurred while trying to open maps")});var e,n,r},accessibilityLabel:"Get directions to ".concat(t.name),variant:"secondary",size:"medium"})))))};return o.createElement(i.A,{style:rr.container},o.createElement(J,{style:rr.title},"Community Resources"),o.createElement(i.A,{style:rr.categoryContainer},o.createElement(J,{style:rr.filterLabel},"Filter by:"),o.createElement(u.A,{horizontal:!0,showsHorizontalScrollIndicator:!0,contentContainerStyle:rr.categoryScrollContent},["all","healthcare","transportation","social","emergency"].map(function(e){return o.createElement(f.A,{key:e,style:[rr.categoryButton,g===e&&rr.selectedCategoryButton],onPress:function(){b(e)},accessibilityRole:"button",accessibilityLabel:"Filter by ".concat(e," category"),accessibilityState:{selected:g===e}},o.createElement(J,{style:g===e?[rr.categoryButtonText,rr.selectedCategoryText]:rr.categoryButtonText},"all"===e?"All":e.charAt(0).toUpperCase()+e.slice(1)))}))),w&&o.createElement(i.A,{style:rr.errorContainer},o.createElement(J,{style:rr.errorText},w)),y?o.createElement(i.A,{style:rr.loadingContainer},o.createElement(J,{style:rr.loadingText},"Loading resources...")):o.createElement(i.A,{style:rr.resourcesList},0===s.length?o.createElement(i.A,{style:rr.emptyContainer},o.createElement(J,{style:rr.emptyText},"No resources found for this category.")):s.map(function(e){return o.createElement(i.A,{key:e.id},A({item:e}))})))};function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach(function(t){sr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ir(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ir(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ur(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return lr(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(lr(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,lr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,lr(f,"constructor",u),lr(u,"constructor",s),s.displayName="GeneratorFunction",lr(u,o,"GeneratorFunction"),lr(f),lr(f,o,"Generator"),lr(f,r,function(){return this}),lr(f,"toString",function(){return"[object Generator]"}),(ur=function(){return{w:i,m:d}})()}function lr(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lr=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){lr(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},lr(e,t,n,r)}function fr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yr=a.A.create({container:{flex:1,backgroundColor:"#f8f8f8"},scrollView:{flex:1},scrollContent:{paddingBottom:100,flexGrow:1},header:{padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"},sectionTitle:{fontSize:22,fontWeight:"bold",marginBottom:12,paddingHorizontal:16},eventsContainer:{marginVertical:16},eventCard:{width:300,backgroundColor:"white",borderRadius:12,padding:16,marginHorizontal:8,marginLeft:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},eventTitle:{fontSize:18,fontWeight:"bold",marginBottom:8},eventDetails:{fontSize:16,color:"#4a80f5",marginBottom:4},eventLocation:{fontSize:16,color:"#666",marginBottom:8},eventDescription:{fontSize:16,marginBottom:12},eventFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},eventParticipants:{fontSize:14,color:"#666"},registerButton:{backgroundColor:"#4a80f5",paddingHorizontal:12,paddingVertical:8},registeredButton:{backgroundColor:"#4CAF50",paddingHorizontal:12,paddingVertical:8},noEventsContainer:{backgroundColor:"white",padding:16,margin:16,borderRadius:12,alignItems:"center"},noEventsText:{fontSize:16,color:"#666",marginBottom:16,textAlign:"center"},interestsButton:{backgroundColor:"#4a80f5"},filterButtonContainer:{paddingHorizontal:16,marginBottom:8},filterButton:{backgroundColor:"#4a80f5"},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:{width:"90%",backgroundColor:"white",borderRadius:12,padding:20,maxHeight:"80%"},modalTitle:{fontSize:22,fontWeight:"bold",marginBottom:16,textAlign:"center"},modalSectionTitle:{fontSize:18,fontWeight:"bold",marginTop:16,marginBottom:8},modalSubtitle:{fontSize:16,color:"#666",marginBottom:12},distanceInput:{marginBottom:16},switchContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginVertical:12},switchLabel:{fontSize:16},needsContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:20},needItem:{backgroundColor:"#f0f0f0",paddingHorizontal:16,paddingVertical:12,borderRadius:20,margin:4},needItemSelected:{backgroundColor:"#4a80f5"},needText:{fontSize:16},needTextSelected:{color:"white"},modalButtons:{flexDirection:"column"},saveButton:{backgroundColor:"#4CAF50",marginBottom:8},applyButton:{backgroundColor:"#4a80f5",marginBottom:8},cancelButton:{backgroundColor:"#f44336"}});const pr=function(e){var t,n,r=e.navigation,a=e.route,c=(null===(t=a.params)||void 0===t?void 0:t.userId)||"default-user",s=null===(n=a.params)||void 0===n?void 0:n.initialCategory,l=dr((0,o.useState)(void 0),2),d=l[0],m=l[1],y=dr((0,o.useState)([]),2),p=y[0],h=y[1],g=dr((0,o.useState)(null),2),b=(g[0],g[1]),v=dr((0,o.useState)(null),2),w=v[0],S=v[1],k=dr((0,o.useState)(!0),2),E=(k[0],k[1]),A=dr((0,o.useState)(!1),2),C=A[0],T=A[1],O=dr((0,o.useState)({}),2),j=O[0],P=O[1],D=dr((0,o.useState)("10"),2),x=D[0],R=D[1],B=dr((0,o.useState)(!1),2),L=B[0],M=B[1],F=dr((0,o.useState)(!1),2),N=F[0],z=F[1],H=dr((0,o.useState)(!1),2),_=H[0],G=H[1],W=dr((0,o.useState)(!1),2),U=W[0],V=W[1],q=dr((0,o.useState)(!1),2),Y=q[0],K=q[1],$=dr((0,o.useState)(!1),2),Q=$[0],X=$[1],Z=dr((0,o.useState)(!1),2),ee=Z[0],te=Z[1],ne=dr((0,o.useState)(!1),2),oe=ne[0],ie=ne[1],ae=new Qn(new Tn.H);(0,o.useEffect)(function(){ce(),se()},[c]);var ce=function(){var e,t=(e=ur().m(function e(){var t,n,r;return ur().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,E(!0),e.n=1,ae.getUserInterests(c);case 1:return t=e.v,b(t),e.n=2,ae.getUserNeeds(c);case 2:return n=e.v,S(n),n&&(z(n.needs.includes("mobility")),G(n.needs.includes("vision")),V(n.needs.includes("hearing")),K(n.needs.includes("memory")),X(n.needs.includes("transportation")),te(n.needs.includes("social")),ie(n.needs.includes("healthcare"))),e.n=3,ae.getEventSuggestions(c);case 3:r=e.v,h(r),e.n=5;break;case 4:e.p=4,e.v,le.A.alert("Error","Failed to load community data. Please try again.");case 5:return e.p=5,E(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fr(i,r,o,a,c,"next",e)}function c(e){fr(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}(),se=function(){m({latitude:37.7749,longitude:-122.4194})},ue=function(e){var t=encodeURIComponent(e),n="ios"===vt.A.OS?"maps:?q=".concat(t):"geo:0,0?q=".concat(t);bn.A.canOpenURL(n).then(function(e){return e?bn.A.openURL(n):bn.A.openURL("https://maps.google.com/?q=".concat(t))}).catch(function(e){le.A.alert("Error","Unable to open maps. Please try again.")})},fe=function(){var e=["healthcare","social","educational"];ae.saveUserInterests(c,e).then(function(){b({userId:c,categories:e}),le.A.alert("Success","Your interests have been updated."),ce()}).catch(function(e){le.A.alert("Error","Failed to save your interests. Please try again.")})},de=function(){var e=[];N&&e.push("mobility"),_&&e.push("vision"),U&&e.push("hearing"),Y&&e.push("memory"),Q&&e.push("transportation"),ee&&e.push("social"),oe&&e.push("healthcare"),ae.saveUserNeeds(c,e).then(function(){S({userId:c,needs:e}),P(cr(cr({},j),{},{userNeeds:e})),T(!1),le.A.alert("Success","Your needs have been saved and will be used to find relevant resources.")}).catch(function(e){le.A.alert("Error","Failed to save your needs. Please try again.")})},me=function(){var e={category:j.category,userNeeds:null==w?void 0:w.needs,maxDistance:parseFloat(x),isVerified:!!L||void 0};P(e),T(!1)};return o.createElement(i.A,{style:yr.container},o.createElement(i.A,{style:yr.header},o.createElement(I,{title:"← Back to Main",onPress:function(){return r.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"})),o.createElement(u.A,{style:yr.scrollView,contentContainerStyle:yr.scrollContent,showsVerticalScrollIndicator:!0},0===p.length?o.createElement(i.A,{style:yr.noEventsContainer},o.createElement(J,{style:yr.noEventsText},"No upcoming events match your interests."),o.createElement(i.A,{style:yr.interestsButton},o.createElement(I,{title:"Set My Interests",onPress:fe,variant:"primary",accessibilityLabel:"Set my interests for event recommendations"}))):o.createElement(i.A,{style:yr.eventsContainer},o.createElement(J,{style:yr.sectionTitle},"Upcoming Events For You"),o.createElement(u.A,{horizontal:!0,showsHorizontalScrollIndicator:!0},p.map(function(e){return o.createElement(i.A,{key:e.id,style:yr.eventCard},o.createElement(J,{style:yr.eventTitle},e.title),o.createElement(J,{style:yr.eventDetails},new Date(e.startTime).toLocaleDateString()," at ",new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),o.createElement(J,{style:yr.eventLocation},e.location),o.createElement(J,{style:yr.eventDescription},e.description),o.createElement(i.A,{style:yr.eventFooter},o.createElement(J,{style:yr.eventParticipants},e.currentParticipants," attending",e.maxParticipants?" (max ".concat(e.maxParticipants,")"):""),o.createElement(i.A,{style:e.isRegistered?yr.registeredButton:yr.registerButton},o.createElement(I,{title:e.isRegistered?"Registered":"Register",disabled:e.isRegistered,onPress:function(){return t=e.id,void ae.registerForEvent(t,c).then(function(e){e&&(h(p.map(function(n){return n.id===t?e:n})),le.A.alert("Success","You have been registered for this event."))}).catch(function(e){le.A.alert("Error","Failed to register for this event. Please try again.")});var t},variant:e.isRegistered?"secondary":"primary",accessibilityLabel:"Register for ".concat(e.title)}))))}))),o.createElement(i.A,{style:yr.filterButtonContainer},o.createElement(i.A,{style:yr.filterButton},o.createElement(I,{title:"Filter Resources",onPress:function(){return T(!0)},variant:"primary",accessibilityLabel:"Open resource filters"}))),o.createElement(or,{userId:c,initialCategory:s,userLocation:d,onResourceSelect:function(e){le.A.alert(e.name,"".concat(e.description,"\n\nAddress: ").concat(e.address,"\nPhone: ").concat(e.phoneNumber,"\nHours: ").concat(e.hours),[{text:"Call",onPress:function(){}},{text:"Directions",onPress:function(){return ue(e.address)}},{text:"Close",style:"cancel"}])},resourceFilter:j})),o.createElement(_e.A,{animationType:"slide",transparent:!0,visible:C,onRequestClose:function(){return T(!1)}},o.createElement(i.A,{style:yr.modalOverlay},o.createElement(i.A,{style:yr.modalContent},o.createElement(J,{style:yr.modalTitle},"Filter Resources"),o.createElement(J,{style:yr.modalSectionTitle},"Maximum Distance"),o.createElement(re,{value:x,onChangeText:R,keyboardType:"numeric",placeholder:"Enter maximum distance in miles",style:yr.distanceInput,accessibilityLabel:"Maximum distance in miles"}),o.createElement(i.A,{style:yr.switchContainer},o.createElement(J,{style:yr.switchLabel},"Show verified resources only"),o.createElement(vn.A,{value:L,onValueChange:M,accessibilityLabel:"Show verified resources only"})),o.createElement(J,{style:yr.modalSectionTitle},"Your Needs"),o.createElement(J,{style:yr.modalSubtitle},"Select your needs to find relevant resources"),o.createElement(i.A,{style:yr.needsContainer},o.createElement(f.A,{style:[yr.needItem,N&&yr.needItemSelected],onPress:function(){return z(!N)},accessibilityRole:"checkbox",accessibilityState:{checked:N},accessibilityLabel:"Mobility assistance"},o.createElement(J,{style:[yr.needText,N&&yr.needTextSelected]},"Mobility")),o.createElement(f.A,{style:[yr.needItem,_&&yr.needItemSelected],onPress:function(){return G(!_)},accessibilityRole:"checkbox",accessibilityState:{checked:_},accessibilityLabel:"Vision assistance"},o.createElement(J,{style:[yr.needText,_&&yr.needTextSelected]},"Vision")),o.createElement(f.A,{style:[yr.needItem,U&&yr.needItemSelected],onPress:function(){return V(!U)},accessibilityRole:"checkbox",accessibilityState:{checked:U},accessibilityLabel:"Hearing assistance"},o.createElement(J,{style:[yr.needText,U&&yr.needTextSelected]},"Hearing")),o.createElement(f.A,{style:[yr.needItem,Y&&yr.needItemSelected],onPress:function(){return K(!Y)},accessibilityRole:"checkbox",accessibilityState:{checked:Y},accessibilityLabel:"Memory assistance"},o.createElement(J,{style:[yr.needText,Y&&yr.needTextSelected]},"Memory")),o.createElement(f.A,{style:[yr.needItem,Q&&yr.needItemSelected],onPress:function(){return X(!Q)},accessibilityRole:"checkbox",accessibilityState:{checked:Q},accessibilityLabel:"Transportation assistance"},o.createElement(J,{style:[yr.needText,Q&&yr.needTextSelected]},"Transportation")),o.createElement(f.A,{style:[yr.needItem,ee&&yr.needItemSelected],onPress:function(){return te(!ee)},accessibilityRole:"checkbox",accessibilityState:{checked:ee},accessibilityLabel:"Social activities"},o.createElement(J,{style:[yr.needText,ee&&yr.needTextSelected]},"Social")),o.createElement(f.A,{style:[yr.needItem,oe&&yr.needItemSelected],onPress:function(){return ie(!oe)},accessibilityRole:"checkbox",accessibilityState:{checked:oe},accessibilityLabel:"Healthcare assistance"},o.createElement(J,{style:[yr.needText,oe&&yr.needTextSelected]},"Healthcare"))),o.createElement(i.A,{style:yr.modalButtons},o.createElement(i.A,{style:yr.saveButton},o.createElement(I,{title:"Save Needs",onPress:de,variant:"primary",accessibilityLabel:"Save your needs preferences"})),o.createElement(i.A,{style:yr.applyButton},o.createElement(I,{title:"Apply Filters",onPress:me,variant:"primary",accessibilityLabel:"Apply filters to resources"})),o.createElement(i.A,{style:yr.cancelButton},o.createElement(I,{title:"Cancel",onPress:function(){return T(!1)},variant:"secondary",accessibilityLabel:"Cancel filtering"})))))))};function hr(e){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(e)}function gr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return br(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(br(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,br(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,br(f,"constructor",u),br(u,"constructor",s),s.displayName="GeneratorFunction",br(u,o,"GeneratorFunction"),br(f),br(f,o,"Generator"),br(f,r,function(){return this}),br(f,"toString",function(){return"[object Generator]"}),(gr=function(){return{w:i,m:d}})()}function br(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}br=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){br(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},br(e,t,n,r)}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach(function(t){Sr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Sr(e,t,n){return(t=Cr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Er(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){kr(i,r,o,a,c,"next",e)}function c(e){kr(i,r,o,a,c,"throw",e)}a(void 0)})}}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cr(r.key),r)}}function Cr(e){var t=function(e,t){if("object"!=hr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hr(t)?t:t+""}var Tr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"createDailyRoutine",value:(S=Er(gr().m(function e(t){var n,r,o,i=arguments;return gr().w(function(e){for(;;)switch(e.n){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:new Date,e.n=1,this.getRoutineTemplateItems(t);case 1:return r=e.v,o={id:"routine-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),userId:t,date:n,items:r.map(function(e){return wr(wr({},e),{},{isCompleted:!1,completedAt:void 0})}),completedCount:0,totalCount:r.length},e.n=2,this.saveDailyRoutine(o);case 2:return e.a(2,o)}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"getRoutineTemplateItems",value:(w=Er(gr().m(function e(t){var n,r,o=this;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:if(0!==(r=n.activities.filter(function(e){return e.userId===t&&"exercise"===e.category&&e.title.startsWith("Routine:")}).map(function(e,t){return{id:e.id,title:e.title.replace("Routine:","").trim(),description:e.description,timeOfDay:o.getTimeOfDayFromActivity(e),isCompleted:!1,isRecurring:!0,recurringDays:[0,1,2,3,4,5,6],userId:e.userId,order:t,reminderEnabled:!1}})).length){e.n=3;break}return e.a(2,this.createDefaultRoutineItems(t));case 3:return e.a(2,r)}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"createDefaultRoutineItems",value:function(e){return[{title:"Morning Medication",description:"Take your morning medications",timeOfDay:"morning",isRecurring:!0,recurringDays:[0,1,2,3,4,5,6],order:0,reminderEnabled:!0,reminderTime:"08:00"},{title:"Morning Stretches",description:"Do your morning stretching routine",timeOfDay:"morning",isRecurring:!0,recurringDays:[0,1,2,3,4,5,6],order:1,reminderEnabled:!0,reminderTime:"08:30"},{title:"Afternoon Walk",description:"Take a short walk outside",timeOfDay:"afternoon",isRecurring:!0,recurringDays:[0,1,2,3,4,5,6],order:2,reminderEnabled:!0,reminderTime:"14:00"},{title:"Evening Medication",description:"Take your evening medications",timeOfDay:"evening",isRecurring:!0,recurringDays:[0,1,2,3,4,5,6],order:3,reminderEnabled:!0,reminderTime:"20:00"}].map(function(t,n){return wr({id:"routine-item-".concat(Date.now(),"-").concat(n,"-").concat(Math.random().toString(36).substr(2,9)),userId:e,isCompleted:!1},t)})}},{key:"getTimeOfDayFromActivity",value:function(e){var t=e.title.toLowerCase();return t.includes("morning")?"morning":t.includes("afternoon")?"afternoon":t.includes("evening")?"evening":"anytime"}},{key:"saveDailyRoutine",value:(v=Er(gr().m(function e(t){var n,r,o,i;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(i=e.v){e.n=2;break}i={resources:[],activities:[],events:[]};case 2:return n=i,r={id:t.id,title:"Daily Routine: ".concat(new Date(t.date).toLocaleDateString()),description:"Daily routine with ".concat(t.completedCount,"/").concat(t.totalCount," items completed"),category:"exercise",difficulty:"easy",estimatedDuration:60,instructions:t.items.map(function(e){return e.title}),isCompleted:t.completedCount===t.totalCount,userId:t.userId,routineData:JSON.stringify(t)},(o=n.activities.findIndex(function(e){return e.id===t.id}))>=0?n.activities[o]=r:n.activities.push(r),e.n=3,fe.dataAccessLayer.saveCommunityData(n);case 3:return e.a(2)}},e)})),function(e){return v.apply(this,arguments)})},{key:"getDailyRoutine",value:(b=Er(gr().m(function e(t){var n,r,o,i,a,c=arguments;return gr().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:new Date,e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(r=e.v){e.n=2;break}return e.a(2,this.createDailyRoutine(t,n));case 2:if(o=n.toLocaleDateString(),i=r.activities.find(function(e){return e.userId===t&&e.title.includes(o)&&e.routineData})){e.n=3;break}return e.a(2,this.createDailyRoutine(t,n));case 3:return e.p=3,a=JSON.parse(i.routineData),e.a(2,a);case 4:return e.p=4,e.v,e.a(2,this.createDailyRoutine(t,n))}},e,this,[[3,4]])})),function(e){return b.apply(this,arguments)})},{key:"updateRoutineItemStatus",value:(g=Er(gr().m(function e(t,n,r,o){var i,a;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getDailyRoutine(t);case 1:if((i=e.v)&&i.id===n){e.n=2;break}return e.a(2,null);case 2:if(-1!==(a=i.items.findIndex(function(e){return e.id===r}))){e.n=3;break}return e.a(2,null);case 3:return i.items[a]=wr(wr({},i.items[a]),{},{isCompleted:o,completedAt:o?new Date:void 0}),i.completedCount=i.items.filter(function(e){return e.isCompleted}).length,e.n=4,this.saveDailyRoutine(i);case 4:if(!o){e.n=5;break}return e.n=5,this.checkForAchievements(t);case 5:return e.a(2,i)}},e,this)})),function(e,t,n,r){return g.apply(this,arguments)})},{key:"addRoutineItem",value:(h=Er(gr().m(function e(t,n){var r,o;return gr().w(function(e){for(;;)switch(e.n){case 0:return r=wr(wr({},n),{},{id:"routine-item-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),userId:t}),e.n=1,this.getDailyRoutine(t);case 1:if(!(o=e.v)){e.n=2;break}return o.items.push(r),o.totalCount=o.items.length,e.n=2,this.saveDailyRoutine(o);case 2:return e.a(2,r)}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"removeRoutineItem",value:(p=Er(gr().m(function e(t,n,r){var o,i;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getDailyRoutine(t);case 1:if((o=e.v)&&o.id===n){e.n=2;break}return e.a(2,!1);case 2:if(i=o.items.length,o.items=o.items.filter(function(e){return e.id!==r}),!(o.items.length<i)){e.n=4;break}return o.totalCount=o.items.length,o.completedCount=o.items.filter(function(e){return e.isCompleted}).length,e.n=3,this.saveDailyRoutine(o);case 3:return e.a(2,!0);case 4:return e.a(2,!1)}},e,this)})),function(e,t,n){return p.apply(this,arguments)})},{key:"getAchievements",value:(y=Er(gr().m(function e(t){var n,r;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:if(0!==(r=n.activities.filter(function(e){return e.userId===t&&"social"===e.category&&e.title.startsWith("Achievement:")}).map(function(e){try{return JSON.parse(e.achievementData)}catch(e){return null}}).filter(function(e){return null!==e})).length){e.n=3;break}return e.a(2,this.createDefaultAchievements(t));case 3:return e.a(2,r)}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"createDefaultAchievements",value:(m=Er(gr().m(function e(t){var n,r,o,i;return gr().w(function(e){for(;;)switch(e.n){case 0:n=[{id:crypto.randomUUID(),title:"Early Bird",description:"Complete all morning routine items for 3 days",iconName:"sunrise",isEarned:!1,progress:0,userId:t,category:"activity",level:"bronze"},{id:crypto.randomUUID(),title:"Consistency Champion",description:"Complete your full daily routine for 7 days in a row",iconName:"calendar-check",isEarned:!1,progress:0,userId:t,category:"activity",level:"silver"},{id:crypto.randomUUID(),title:"Health Hero",description:"Take all medications on time for 14 days",iconName:"heart",isEarned:!1,progress:0,userId:t,category:"health",level:"gold"},{id:crypto.randomUUID(),title:"Social Butterfly",description:"Connect with family members 5 times",iconName:"users",isEarned:!1,progress:0,userId:t,category:"social",level:"bronze"},{id:crypto.randomUUID(),title:"Knowledge Seeker",description:"Complete 3 educational activities",iconName:"book",isEarned:!1,progress:0,userId:t,category:"learning",level:"silver"}],r=0,o=n;case 1:if(!(r<o.length)){e.n=3;break}return i=o[r],e.n=2,this.saveAchievement(i);case 2:r++,e.n=1;break;case 3:return e.a(2,n)}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"saveAchievement",value:(d=Er(gr().m(function e(t){var n,r,o,i;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(i=e.v){e.n=2;break}i={resources:[],activities:[],events:[]};case 2:return n=i,r={id:t.id,title:"Achievement: ".concat(t.title),description:t.description,category:"social",difficulty:"easy",estimatedDuration:0,instructions:[],isCompleted:t.isEarned,userId:t.userId,achievementData:JSON.stringify(t)},(o=n.activities.findIndex(function(e){return e.id===t.id}))>=0?n.activities[o]=r:n.activities.push(r),e.n=3,fe.dataAccessLayer.saveCommunityData(n);case 3:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)})},{key:"updateAchievementProgress",value:(f=Er(gr().m(function e(t,n,r){var o,i;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAchievements(t);case 1:if(o=e.v,i=o.find(function(e){return e.id===n})){e.n=2;break}return e.a(2,null);case 2:return i.progress=Math.min(100,Math.max(0,r)),i.progress>=100&&!i.isEarned&&(i.isEarned=!0,i.earnedAt=new Date),e.n=3,this.saveAchievement(i);case 3:return e.a(2,i)}},e,this)})),function(e,t,n){return f.apply(this,arguments)})},{key:"checkForAchievements",value:(l=Er(gr().m(function e(t){var n,r,o,i,a,c,s,u;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getAchievements(t);case 1:return n=e.v,e.n=2,this.getDailyRoutine(t);case 2:if(r=e.v){e.n=3;break}return e.a(2);case 3:if(!(o=n.find(function(e){return"Early Bird"===e.title}))){e.n=4;break}if(i=r.items.filter(function(e){return"morning"===e.timeOfDay}),a=i.filter(function(e){return e.isCompleted}),!(i.length>0&&a.length===i.length)){e.n=4;break}return c=Math.min(100,o.progress+33.33),e.n=4,this.updateAchievementProgress(t,o.id,c);case 4:if(!(s=n.find(function(e){return"Consistency Champion"===e.title}))||r.completedCount!==r.totalCount){e.n=5;break}return u=Math.min(100,s.progress+14.29),e.n=5,this.updateAchievementProgress(t,s.id,u);case 5:return e.a(2)}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"getActivitySuggestions",value:(u=Er(gr().m(function e(t){var n,r,o;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:return r=n.activities.filter(function(e){return!e.title.startsWith("Routine:")&&!e.title.startsWith("Achievement:")&&!e.title.startsWith("Daily Routine:")}),o=r.slice(0,3).map(function(e){return{id:crypto.randomUUID(),activity:e,reason:"Based on your interests",suggestedAt:new Date,userId:t}}),e.a(2,o)}},e)})),function(e){return u.apply(this,arguments)})},{key:"getActivitySteps",value:(s=Er(gr().m(function e(t){var n,r;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(n=e.v){e.n=2;break}return e.a(2,[]);case 2:if(r=n.activities.find(function(e){return e.id===t})){e.n=3;break}return e.a(2,[]);case 3:return e.a(2,r.instructions.map(function(e,n){return{id:crypto.randomUUID(),activityId:t,order:n,instruction:e,hasVoiceInstruction:!1,estimatedDuration:r.estimatedDuration/r.instructions.length}}))}},e)})),function(e){return s.apply(this,arguments)})},{key:"startActivity",value:(c=Er(gr().m(function e(t,n){var r,o;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getActivitySteps(n);case 1:return r=e.v,o={id:crypto.randomUUID(),userId:t,activityId:n,startedAt:new Date,currentStepIndex:0,totalSteps:r.length,isCompleted:!1},e.n=2,this.saveActivityProgress(o);case 2:return e.a(2,o)}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"updateActivityProgress",value:(a=Er(gr().m(function e(t,n,r){var o,i,a,c;return gr().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(o=e.v){e.n=2;break}return e.a(2,null);case 2:if(i=o.activities.find(function(e){return e.progressId===n})){e.n=3;break}return e.a(2,null);case 3:if(e.p=3,(a=JSON.parse(i.progressData)).currentStepIndex=r,!(r>=a.totalSteps-1)){e.n=4;break}return a.isCompleted=!0,a.completedAt=new Date,(c=o.activities.findIndex(function(e){return e.id===a.activityId}))>=0&&(o.activities[c]=wr(wr({},o.activities[c]),{},{isCompleted:!0,completedAt:new Date})),e.n=4,this.checkForActivityAchievements(t,a.activityId);case 4:return e.n=5,this.saveActivityProgress(a);case 5:return e.n=6,fe.dataAccessLayer.saveCommunityData(o);case 6:return e.a(2,a);case 7:return e.p=7,e.v,e.a(2,null)}},e,this,[[3,7]])})),function(e,t,n){return a.apply(this,arguments)})},{key:"saveActivityProgress",value:(i=Er(gr().m(function e(t){var n,r,o,i;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(i=e.v){e.n=2;break}i={resources:[],activities:[],events:[]};case 2:return n=i,r={id:"progress-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),title:"Progress: ".concat(t.id),description:"Activity progress tracking",category:"exercise",difficulty:"easy",estimatedDuration:0,instructions:[],isCompleted:t.isCompleted,userId:t.userId,progressId:t.id,progressData:JSON.stringify(t)},(o=n.activities.findIndex(function(e){return e.progressId===t.id}))>=0?n.activities[o]=r:n.activities.push(r),e.n=3,fe.dataAccessLayer.saveCommunityData(n);case 3:return e.a(2)}},e)})),function(e){return i.apply(this,arguments)})},{key:"checkForActivityAchievements",value:(o=Er(gr().m(function e(t,n){var r,o,i,a,c;return gr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe.dataAccessLayer.getCommunityData();case 1:if(r=e.v){e.n=2;break}return e.a(2);case 2:if(o=r.activities.find(function(e){return e.id===n})){e.n=3;break}return e.a(2);case 3:return e.n=4,this.getAchievements(t);case 4:if(i=e.v,"educational"!==o.category){e.n=5;break}if(!(a=i.find(function(e){return"Knowledge Seeker"===e.title}))){e.n=5;break}return c=Math.min(100,a.progress+33.33),e.n=5,this.updateAchievementProgress(t,a.id,c);case 5:return e.a(2)}},e,this)})),function(e,t){return o.apply(this,arguments)})}],r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],n&&Ar(t.prototype,n),r&&Ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i,a,c,s,u,l,f,d,m,y,p,h,g,b,v,w,S}().getInstance();function Or(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return jr(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(jr(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,jr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,jr(f,"constructor",u),jr(u,"constructor",s),s.displayName="GeneratorFunction",jr(u,o,"GeneratorFunction"),jr(f),jr(f,o,"Generator"),jr(f,r,function(){return this}),jr(f,"toString",function(){return"[object Generator]"}),(Or=function(){return{w:i,m:d}})()}function jr(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}jr=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){jr(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},jr(e,t,n,r)}function Pr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Dr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Pr(i,r,o,a,c,"next",e)}function c(e){Pr(i,r,o,a,c,"throw",e)}a(void 0)})}}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ir(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ir(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Rr=function(e){var t=e.userId,n=e.date,r=void 0===n?new Date:n,a=e.onItemComplete,c=e.onAddItem,s=xr((0,o.useState)(null),2),l=s[0],m=s[1],y=xr((0,o.useState)(!0),2),p=y[0],h=y[1],g=xr((0,o.useState)(null),2),b=g[0],v=g[1];(0,o.useEffect)(function(){var e=function(){var e=Dr(Or().m(function e(){var n,o,i;return Or().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,h(!0),v(null),n=new Promise(function(e,t){setTimeout(function(){return t(new Error("Timeout loading routine"))},1e4)}),o=Tr.getDailyRoutine(t,r),e.n=1,Promise.race([o,n]);case 1:i=e.v,m(i),e.n=3;break;case 2:e.p=2,e.v,v("Unable to load your daily routine. Please try again.");case 3:return e.p=3,h(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}();e()},[t,r.toDateString()]);var w=function(){var e=Dr(Or().m(function e(n){var r,o;return Or().w(function(e){for(;;)switch(e.p=e.n){case 0:if(l){e.n=1;break}return e.a(2);case 1:return e.p=1,r=!n.isCompleted,e.n=2,Tr.updateRoutineItemStatus(t,l.id,n.id,r);case 2:(o=e.v)&&(m(o),r&&a&&a(n),o.completedCount===o.totalCount&&window.alert("Great job! 🎉\n\nYou've completed all your routine tasks for today!")),e.n=4;break;case 3:e.p=3,e.v,window.alert("Error\n\nUnable to update this item. Please try again.");case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),S=(null==l?void 0:l.items.reduce(function(e,t){var n=e[t.timeOfDay]||[];return n.push(t),e[t.timeOfDay]=n,e},{}))||{};return p?o.createElement(i.A,{style:Br.loadingContainer},o.createElement(He.A,{size:"large",color:"#4f46e5"}),o.createElement(d.A,{style:Br.loadingText},"Loading your daily routine...")):b?o.createElement(i.A,{style:Br.errorContainer},o.createElement(d.A,{style:Br.errorText},b),o.createElement(f.A,{style:Br.retryButton,onPress:function(){return h(!0)},accessibilityLabel:"Retry loading your routine",accessibilityHint:"Attempts to load your daily routine again"},o.createElement(d.A,{style:Br.retryButtonText},"Try Again"))):o.createElement(i.A,{style:Br.container},o.createElement(i.A,{style:Br.header},o.createElement(d.A,{style:Br.dateText},r.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})),o.createElement(i.A,{style:Br.progressContainer},o.createElement(i.A,{style:Br.progressBar},o.createElement(i.A,{style:[Br.progressFill,{width:"".concat(l?l.completedCount/l.totalCount*100:0,"%"),backgroundColor:l&&l.completedCount===l.totalCount?"#10b981":"#4f46e5"}]})),o.createElement(d.A,{style:Br.progressText},l?"".concat(l.completedCount,"/").concat(l.totalCount," completed"):"0/0 completed"))),o.createElement(u.A,{style:Br.scrollContainer},["morning","afternoon","evening","anytime"].map(function(e){var t=S[e];return t&&0!==t.length?o.createElement(i.A,{key:e,style:Br.section},o.createElement(d.A,{style:Br.sectionTitle},e.charAt(0).toUpperCase()+e.slice(1)),t.map(function(e){return o.createElement(f.A,{key:e.id,style:Br.itemContainer,onPress:function(){return w(e)},accessibilityLabel:"".concat(e.title,", ").concat(e.isCompleted?"completed":"not completed"),accessibilityHint:"Tap to mark as ".concat(e.isCompleted?"not completed":"completed"),accessibilityRole:"checkbox",accessibilityState:{checked:e.isCompleted}},o.createElement(i.A,{style:[Br.checkbox,e.isCompleted&&Br.checkboxChecked]},e.isCompleted&&o.createElement(d.A,{style:Br.checkmark},"✓")),o.createElement(i.A,{style:Br.itemContent},o.createElement(d.A,{style:[Br.itemTitle,e.isCompleted&&Br.itemTitleCompleted]},e.title),e.description&&o.createElement(d.A,{style:[Br.itemDescription,e.isCompleted&&Br.itemDescriptionCompleted]},e.description),e.reminderEnabled&&e.reminderTime&&o.createElement(d.A,{style:Br.reminderText},"Reminder: ",e.reminderTime)))})):null})),o.createElement(f.A,{style:Br.addButton,onPress:c,accessibilityLabel:"Add new routine item",accessibilityHint:"Adds a new item to your daily routine"},o.createElement(d.A,{style:Br.addButtonText},"+ Add Item")))},Br=a.A.create({container:{flex:1,backgroundColor:"#f8fafc"},header:{padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e5e7eb"},dateText:{fontSize:24,fontWeight:"bold",color:"#1f2937",marginBottom:8},progressContainer:{marginTop:8},progressBar:{height:12,backgroundColor:"#e5e7eb",borderRadius:6,overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#4f46e5"},progressText:{marginTop:4,fontSize:14,color:"#6b7280",textAlign:"right"},scrollContainer:{flex:1},section:{marginBottom:24},sectionTitle:{fontSize:20,fontWeight:"600",color:"#1f2937",marginHorizontal:16,marginTop:16,marginBottom:8},itemContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"#ffffff",padding:16,borderBottomWidth:1,borderBottomColor:"#e5e7eb",minHeight:72},checkbox:{width:28,height:28,borderRadius:14,borderWidth:2,borderColor:"#6b7280",marginRight:16,alignItems:"center",justifyContent:"center"},checkboxChecked:{backgroundColor:"#4f46e5",borderColor:"#4f46e5"},checkmark:{color:"#ffffff",fontSize:16,fontWeight:"bold"},itemContent:{flex:1},itemTitle:{fontSize:18,fontWeight:"500",color:"#1f2937",marginBottom:4},itemTitleCompleted:{textDecorationLine:"line-through",color:"#9ca3af"},itemDescription:{fontSize:14,color:"#6b7280"},itemDescriptionCompleted:{textDecorationLine:"line-through",color:"#9ca3af"},reminderText:{fontSize:14,color:"#4f46e5",marginTop:4},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f8fafc"},loadingText:{marginTop:16,fontSize:18,color:"#6b7280"},errorContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f8fafc",padding:16},errorText:{fontSize:18,color:"#ef4444",textAlign:"center",marginBottom:16},retryButton:{backgroundColor:"#4f46e5",paddingHorizontal:24,paddingVertical:12,borderRadius:8,minWidth:120,alignItems:"center"},retryButtonText:{color:"#ffffff",fontSize:16,fontWeight:"600"},addButton:{backgroundColor:"#4f46e5",margin:16,padding:16,borderRadius:8,alignItems:"center",justifyContent:"center",minHeight:56},addButtonText:{color:"#ffffff",fontSize:18,fontWeight:"600"}});function Lr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Mr(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Mr(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Mr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Mr(f,"constructor",u),Mr(u,"constructor",s),s.displayName="GeneratorFunction",Mr(u,o,"GeneratorFunction"),Mr(f),Mr(f,o,"Generator"),Mr(f,r,function(){return this}),Mr(f,"toString",function(){return"[object Generator]"}),(Lr=function(){return{w:i,m:d}})()}function Mr(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Mr=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Mr(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Mr(e,t,n,r)}function Fr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Hr=function(e){var t=e.navigation,n=Nr((0,o.useState)(!1),2),r=n[0],a=n[1],c=Nr((0,o.useState)(""),2),s=c[0],u=c[1],l=Nr((0,o.useState)(""),2),m=l[0],y=l[1],p=Nr((0,o.useState)("morning"),2),h=p[0],g=p[1],b=Nr((0,o.useState)(!1),2),v=b[0],w=b[1],S=Nr((0,o.useState)("08:00"),2),k=S[0],E=S[1],A=Nr((0,o.useState)(0),2),C=A[0],T=A[1],O="123456",j=function(){var e,t=(e=Lr().m(function e(){return Lr().w(function(e){for(;;)switch(e.p=e.n){case 0:if(s.trim()){e.n=1;break}return window.alert("Error\n\nPlease enter a title for your routine item"),e.a(2);case 1:return e.p=1,e.n=2,Tr.addRoutineItem(O,{title:s,description:m,timeOfDay:h,isCompleted:!1,isRecurring:!0,recurringDays:[0,1,2,3,4,5,6],userId:O,order:999,reminderEnabled:v,reminderTime:v?k:void 0});case 2:u(""),y(""),g("morning"),w(!1),E("08:00"),a(!1),window.alert("Success\n\nNew routine item added successfully!"),T(function(e){return e+1}),e.n=4;break;case 3:e.p=3,e.v,window.alert("Error\n\nUnable to add new routine item. Please try again.");case 4:return e.a(2)}},e,null,[[1,3]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Fr(i,r,o,a,c,"next",e)}function c(e){Fr(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}();return o.createElement(i.A,{style:_r.container},o.createElement(i.A,{style:_r.header},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"})),o.createElement(Rr,{key:C,userId:O,onItemComplete:function(e){if(!e.isCompleted){var t=["Great job! 👏","Well done! 🌟","You're doing great! 💪","Keep it up! 🎉","Excellent progress! 👍"],n=t[Math.floor(Math.random()*t.length)];window.alert("".concat(n,"\n\nYou've completed \"").concat(e.title,'"'))}},onAddItem:function(){a(!0)}}),o.createElement(_e.A,{animationType:"slide",transparent:!0,visible:r,onRequestClose:function(){return a(!1)}},o.createElement(i.A,{style:_r.modalOverlay},o.createElement(i.A,{style:_r.modalContent},o.createElement(d.A,{style:_r.modalTitle},"Add New Routine Item"),o.createElement(d.A,{style:_r.inputLabel},"Title"),o.createElement(ee.A,{style:_r.textInput,value:s,onChangeText:u,placeholder:"Enter item title",placeholderTextColor:"#9ca3af",accessibilityLabel:"Item title",accessibilityHint:"Enter a title for your routine item"}),o.createElement(d.A,{style:_r.inputLabel},"Description (optional)"),o.createElement(ee.A,{style:[_r.textInput,_r.textAreaInput],value:m,onChangeText:y,placeholder:"Enter item description",placeholderTextColor:"#9ca3af",multiline:!0,numberOfLines:3,accessibilityLabel:"Item description",accessibilityHint:"Enter an optional description for your routine item"}),o.createElement(d.A,{style:_r.inputLabel},"Time of Day"),o.createElement(i.A,{style:_r.timeOfDayContainer},["morning","afternoon","evening","anytime"].map(function(e){return o.createElement(f.A,{key:e,style:[_r.timeOfDayButton,h===e&&_r.timeOfDayButtonSelected],onPress:function(){return g(e)},accessibilityLabel:"".concat(e," time of day"),accessibilityHint:"Set the time of day to ".concat(e),accessibilityRole:"radio",accessibilityState:{checked:h===e}},o.createElement(d.A,{style:[_r.timeOfDayButtonText,h===e&&_r.timeOfDayButtonTextSelected]},e.charAt(0).toUpperCase()+e.slice(1)))})),o.createElement(i.A,{style:_r.reminderContainer},o.createElement(d.A,{style:_r.inputLabel},"Enable Reminder"),o.createElement(vn.A,{value:v,onValueChange:w,trackColor:{false:"#e5e7eb",true:"#c7d2fe"},thumbColor:v?"#4f46e5":"#9ca3af",accessibilityLabel:"Enable reminder",accessibilityHint:"Toggle to enable or disable reminders for this item",accessibilityRole:"switch"})),v&&o.createElement(i.A,null,o.createElement(d.A,{style:_r.inputLabel},"Reminder Time"),o.createElement(ee.A,{style:_r.textInput,value:k,onChangeText:E,placeholder:"HH:MM",placeholderTextColor:"#9ca3af",keyboardType:"numbers-and-punctuation",accessibilityLabel:"Reminder time",accessibilityHint:"Enter the time for your reminder in 24-hour format"})),o.createElement(i.A,{style:_r.buttonContainer},o.createElement(f.A,{style:[_r.button,_r.cancelButton],onPress:function(){return a(!1)},accessibilityLabel:"Cancel",accessibilityHint:"Cancel adding a new routine item"},o.createElement(d.A,{style:_r.cancelButtonText},"Cancel")),o.createElement(f.A,{style:[_r.button,_r.saveButton],onPress:j,accessibilityLabel:"Save item",accessibilityHint:"Save this new routine item"},o.createElement(d.A,{style:_r.saveButtonText},"Save")))))))},_r=a.A.create({container:{flex:1,backgroundColor:"#f8fafc"},header:{padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:16},modalContent:{backgroundColor:"#ffffff",borderRadius:12,padding:24,width:"100%",maxWidth:500,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},modalTitle:{fontSize:24,fontWeight:"bold",color:"#1f2937",marginBottom:16,textAlign:"center"},inputLabel:{fontSize:16,fontWeight:"500",color:"#4b5563",marginBottom:8},textInput:{backgroundColor:"#f3f4f6",borderRadius:8,padding:12,fontSize:16,color:"#1f2937",marginBottom:16,borderWidth:1,borderColor:"#e5e7eb",minHeight:48},textAreaInput:{height:100,textAlignVertical:"top"},timeOfDayContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:16},timeOfDayButton:{backgroundColor:"#f3f4f6",borderRadius:8,paddingHorizontal:12,paddingVertical:8,marginRight:8,marginBottom:8,minHeight:44,minWidth:80,alignItems:"center"},timeOfDayButtonSelected:{backgroundColor:"#4f46e5"},timeOfDayButtonText:{fontSize:16,color:"#4b5563"},timeOfDayButtonTextSelected:{color:"#ffffff"},reminderContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},buttonContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:16},button:{borderRadius:8,paddingVertical:12,minWidth:120,alignItems:"center",minHeight:48},cancelButton:{backgroundColor:"#f3f4f6",borderWidth:1,borderColor:"#e5e7eb"},saveButton:{backgroundColor:"#4f46e5"},cancelButtonText:{fontSize:16,fontWeight:"600",color:"#4b5563"},saveButtonText:{fontSize:16,fontWeight:"600",color:"#ffffff"}}),Gr=n(4720);function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function Ur(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Vr(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Vr(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Vr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Vr(f,"constructor",u),Vr(u,"constructor",s),s.displayName="GeneratorFunction",Vr(u,o,"GeneratorFunction"),Vr(f),Vr(f,o,"Generator"),Vr(f,r,function(){return this}),Vr(f,"toString",function(){return"[object Generator]"}),(Ur=function(){return{w:i,m:d}})()}function Vr(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Vr=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Vr(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Vr(e,t,n,r)}function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach(function(t){Jr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Jr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Wr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function $r(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Kr(i,r,o,a,c,"next",e)}function c(e){Kr(i,r,o,a,c,"throw",e)}a(void 0)})}}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zr=function(e){var t=e.userId,n=e.onMedicationLogged,r=Qr((0,o.useState)([]),2),a=r[0],c=r[1],s=Qr((0,o.useState)(!0),2),u=s[0],l=s[1],d=Qr((0,o.useState)(new Date),2),m=d[0],y=d[1];(0,o.useEffect)(function(){p();var e=setInterval(function(){y(new Date)},6e4);return function(){return clearInterval(e)}},[t]),(0,o.useEffect)(function(){h()},[m]);var p=function(){var e=$r(Ur().m(function e(){var n,r,o;return Ur().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l(!0),e.n=1,Gr.x.getTodayReminders(t);case 1:return n=e.v,e.n=2,Gr.x.getMedicationSchedules(t);case 2:r=e.v,(o=n.map(function(e){var t=r.find(function(t){return t.id===e.scheduleId});if(!t)return null;var n=new Date,o=new Date(e.scheduledTime).getTime()-n.getTime(),i=o<0;return Yr(Yr({},e),{},{schedule:t,timeUntilReminder:g(o),isPastDue:i})}).filter(Boolean)).sort(function(e,t){return e.isPastDue&&!t.isPastDue?-1:!e.isPastDue&&t.isPastDue?1:e.scheduledTime.getTime()-t.scheduledTime.getTime()}),c(o),e.n=4;break;case 3:e.p=3,e.v,le.A.alert("Error","Failed to load medication reminders.");case 4:return e.p=4,l(!1),e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),h=function(){c(function(e){return e.map(function(e){var t=new Date,n=new Date(e.scheduledTime).getTime()-t.getTime(),r=n<0;return Yr(Yr({},e),{},{timeUntilReminder:g(n),isPastDue:r})})})},g=function(e){var t=Math.abs(e),n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);return e<0?n>0?"".concat(n,"h ").concat(r,"m overdue"):"".concat(r,"m overdue"):n>0?"in ".concat(n,"h ").concat(r,"m"):r>0?"in ".concat(r,"m"):"now"},b=function(e){return e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})},v=function(){var e=$r(Ur().m(function e(t){return Ur().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Gr.x.logMedicationTaken(t.scheduleId,t.scheduledTime,"Taken as scheduled");case 1:le.A.alert("Medication Logged Successfully!","".concat(t.medicationName," has been marked as taken."),[{text:"OK"}]),c(function(e){return e.filter(function(e){return e.id!==t.id})}),null==n||n(),e.n=3;break;case 2:e.p=2,e.v,le.A.alert("Error","Failed to log medication. Please try again.");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=$r(Ur().m(function e(t){return Ur().w(function(e){for(;;)switch(e.n){case 0:le.A.alert("Skip Medication","Are you sure you want to skip ".concat(t.medicationName,"?"),[{text:"Cancel",style:"cancel"},{text:"Skip",style:"destructive",onPress:function(){var e=$r(Ur().m(function e(){return Ur().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Gr.x.logMedicationSkipped(t.scheduleId,t.scheduledTime,"Skipped by user");case 1:le.A.alert("Medication Skipped","".concat(t.medicationName," has been marked as skipped."),[{text:"OK"}]),c(function(e){return e.filter(function(e){return e.id!==t.id})}),null==n||n(),e.n=3;break;case 2:e.p=2,e.v,le.A.alert("Error","Failed to log medication. Please try again.");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}()}]);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(e){le.A.alert(e.medicationName,"Dosage: ".concat(e.dosage,"\nScheduled: ").concat(b(e.scheduledTime),"\nFrequency: ").concat(e.schedule.frequency),[{text:"OK"}])};return u?o.createElement(i.A,{style:eo.loadingContainer},o.createElement(J,{style:eo.loadingText},"Loading medication reminders...")):0===a.length?o.createElement(G,{style:eo.emptyCard},o.createElement(J,{style:eo.emptyTitle},"No Reminders Today"),o.createElement(J,{style:eo.emptyText},"You're all caught up with your medications for today! 🎉")):o.createElement(i.A,{style:eo.container},o.createElement(J,{style:eo.title},"Today's Medications"),a.map(function(e){return o.createElement(G,{key:e.id,style:[eo.reminderCard,e.isPastDue&&eo.overdueCard]},o.createElement(i.A,{style:eo.reminderHeader},o.createElement(i.A,{style:eo.medicationInfo},o.createElement(J,{style:eo.medicationName},e.medicationName),o.createElement(J,{style:eo.dosage},e.dosage),o.createElement(J,{style:[eo.timeInfo,e.isPastDue&&eo.overdueText]},b(e.scheduledTime)," • ",e.timeUntilReminder)),e.schedule.photo&&o.createElement(f.A,{style:eo.photoContainer,onPress:function(){return S(e)},accessibilityRole:"button",accessibilityLabel:"View details for ".concat(e.medicationName)},o.createElement(i.A,{style:eo.photoPlaceholder},o.createElement(J,{style:eo.photoIcon},"📷")))),e.isPastDue&&o.createElement(i.A,{style:eo.overdueAlert},o.createElement(J,{style:eo.overdueAlertText},"⚠️ This medication is overdue")),o.createElement(i.A,{style:eo.actionButtons},o.createElement(I,{title:"✓ Taken",onPress:function(){return v(e)},style:[eo.actionButton,eo.takenButton],accessibilityLabel:"Mark ".concat(e.medicationName," as taken")}),o.createElement(I,{title:"Skip",onPress:function(){return w(e)},variant:"secondary",style:[eo.actionButton,eo.skipButton],accessibilityLabel:"Skip ".concat(e.medicationName)})),o.createElement(f.A,{style:eo.detailsButton,onPress:function(){return S(e)},accessibilityRole:"button",accessibilityLabel:"View details for ".concat(e.medicationName)},o.createElement(J,{style:eo.detailsButtonText},"View Details")))}),o.createElement(i.A,{style:eo.footer},o.createElement(J,{style:eo.footerText},'Tap "Taken" when you take your medication, or "Skip" if you need to skip a dose.')))},eo=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5",padding:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},loadingText:{fontSize:16,color:"#7f8c8d"},title:{fontSize:24,fontWeight:"bold",color:"#2c3e50",marginBottom:16,textAlign:"center"},emptyCard:{margin:16,padding:24,alignItems:"center"},emptyTitle:{fontSize:20,fontWeight:"bold",color:"#27ae60",marginBottom:8},emptyText:{fontSize:16,color:"#7f8c8d",textAlign:"center",lineHeight:24},reminderCard:{marginBottom:16,padding:16},overdueCard:{borderLeftWidth:4,borderLeftColor:"#e74c3c",backgroundColor:"#fdf2f2"},reminderHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},medicationInfo:{flex:1},medicationName:{fontSize:20,fontWeight:"bold",color:"#2c3e50",marginBottom:4},dosage:{fontSize:16,color:"#7f8c8d",marginBottom:4},timeInfo:{fontSize:14,color:"#3498db",fontWeight:"500"},overdueText:{color:"#e74c3c",fontWeight:"bold"},photoContainer:{marginLeft:12},photoPlaceholder:{width:60,height:60,backgroundColor:"#ecf0f1",borderRadius:8,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#bdc3c7"},photoIcon:{fontSize:24},overdueAlert:{backgroundColor:"#e74c3c",paddingHorizontal:12,paddingVertical:8,borderRadius:6,marginBottom:12},overdueAlertText:{color:"#ffffff",fontSize:14,fontWeight:"600",textAlign:"center"},actionButtons:{flexDirection:"row",gap:12,marginBottom:8},actionButton:{flex:1,minHeight:50},takenButton:{backgroundColor:"#27ae60"},skipButton:{backgroundColor:"#95a5a6"},detailsButton:{alignItems:"center",paddingVertical:8},detailsButtonText:{fontSize:14,color:"#3498db",textDecorationLine:"underline"},footer:{marginTop:16,marginBottom:32,paddingHorizontal:16},footerText:{fontSize:14,color:"#7f8c8d",textAlign:"center",lineHeight:20}});function to(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return no(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(no(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,no(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,no(f,"constructor",u),no(u,"constructor",s),s.displayName="GeneratorFunction",no(u,o,"GeneratorFunction"),no(f),no(f,o,"Generator"),no(f,r,function(){return this}),no(f,"toString",function(){return"[object Generator]"}),(to=function(){return{w:i,m:d}})()}function no(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}no=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){no(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},no(e,t,n,r)}function ro(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return io(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?io(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ao=function(e){var t=e.navigation,n=oo((0,o.useState)({totalMedications:0,todayReminders:0,weeklyAdherence:0,upcomingReminder:null}),2),r=n[0],a=n[1],c=oo((0,o.useState)(!0),2),s=c[0],l=c[1],f=oo((0,o.useState)("demo-user-123"),1)[0];(0,o.useEffect)(function(){b()},[]);var d,m,y,p,h,g,b=function(){var e,t=(e=to().m(function e(){var t,n,r,o,i,c,s;return to().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l(!0),e.n=1,Gr.x.getMedicationSchedules(f);case 1:return t=e.v,n=t.filter(function(e){return e.isActive}),e.n=2,Gr.x.getTodayReminders(f);case 2:return r=e.v,e.n=3,Gr.x.getWeeklyAdherence(f);case 3:o=e.v,i=o.length>0?Math.round(o.reduce(function(e,t){return e+t.adherencePercentage},0)/o.length):0,c=new Date,s=r.filter(function(e){return new Date(e.scheduledTime)>c}).sort(function(e,t){return new Date(e.scheduledTime).getTime()-new Date(t.scheduledTime).getTime()}),a({totalMedications:n.length,todayReminders:r.length,weeklyAdherence:i,upcomingReminder:s.length>0?new Date(s[0].scheduledTime):null}),e.n=5;break;case 4:e.p=4,e.v,le.A.alert("Error","Failed to load medication information.");case 5:return e.p=5,l(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ro(i,r,o,a,c,"next",e)}function c(e){ro(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}(),v=function(e){return e>=90?"#27ae60":e>=75?"#f39c12":e>=50?"#e67e22":"#e74c3c"};return s?o.createElement(i.A,{style:co.loadingContainer},o.createElement(J,{style:co.loadingText},"Loading your medications...")):o.createElement(u.A,{style:co.container,showsVerticalScrollIndicator:!0},o.createElement(i.A,{style:co.header},o.createElement(i.A,{style:co.headerTop},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"})),o.createElement(J,{style:co.title},"Your Medications"),o.createElement(J,{style:co.subtitle},"Stay on track with your health")),o.createElement(i.A,{style:co.statsContainer},o.createElement(G,{style:co.statCard},o.createElement(J,{style:co.statNumber},r.totalMedications),o.createElement(J,{style:co.statLabel},"Active Medications")),o.createElement(G,{style:co.statCard},o.createElement(J,{style:co.statNumber},r.todayReminders),o.createElement(J,{style:co.statLabel},"Today's Reminders")),o.createElement(G,{style:[co.statCard,co.adherenceCard]},o.createElement(J,{style:[co.statNumber,{color:v(r.weeklyAdherence)}]},r.weeklyAdherence,"%"),o.createElement(J,{style:co.statLabel},"Weekly Adherence"),o.createElement(J,{style:[co.adherenceLabel,{color:v(r.weeklyAdherence)}]},(g=r.weeklyAdherence)>=90?"Excellent":g>=75?"Good":g>=50?"Fair":"Needs Improvement"))),r.upcomingReminder&&o.createElement(G,{style:co.nextReminderCard},o.createElement(i.A,{style:co.nextReminderContent},o.createElement(J,{style:co.nextReminderTitle},"Next Reminder"),o.createElement(J,{style:co.nextReminderTime},r.upcomingReminder.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})," • ",(d=r.upcomingReminder,m=new Date,y=d.getTime()-m.getTime(),p=Math.floor(y/36e5),h=Math.floor(y%36e5/6e4),p>0?"in ".concat(p,"h ").concat(h,"m"):h>0?"in ".concat(h,"m"):"now"))),o.createElement(J,{style:co.nextReminderIcon},"⏰")),o.createElement(i.A,{style:co.section},o.createElement(J,{style:co.sectionTitle},"Today's Medications"),o.createElement(Zr,{userId:f,onMedicationLogged:function(){b()}})),o.createElement(i.A,{style:co.actionsContainer},o.createElement(I,{title:"➕ Add New Medication",onPress:function(){return t.navigate("MedicationSetup")},accessibilityLabel:"Add new medication",accessibilityHint:"Navigate to medication setup screen"}),o.createElement(I,{title:"📊 View Weekly Report",onPress:function(){return t.navigate("WeeklyAdherence")},variant:"secondary",accessibilityLabel:"View weekly adherence report",accessibilityHint:"Navigate to weekly adherence tracking screen"}),o.createElement(I,{title:"⚙️ Manage Medications",onPress:function(){return t.navigate("MedicationManagement")},variant:"secondary",accessibilityLabel:"Manage all medications",accessibilityHint:"Navigate to medication management screen"})),o.createElement(G,{style:co.tipsCard},o.createElement(J,{style:co.tipsTitle},"💡 Medication Tips"),o.createElement(i.A,{style:co.tipsList},o.createElement(J,{style:co.tipItem},"• Take medications at the same time each day"),o.createElement(J,{style:co.tipItem},"• Keep a glass of water nearby"),o.createElement(J,{style:co.tipItem},"• Set up a weekly pill organizer"),o.createElement(J,{style:co.tipItem},"• Never skip doses without consulting your doctor"))))},co=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},loadingText:{fontSize:18,color:"#7f8c8d"},header:{padding:20,paddingBottom:16},headerTop:{marginBottom:16},title:{fontSize:28,fontWeight:"bold",color:"#2c3e50",marginBottom:4},subtitle:{fontSize:16,color:"#7f8c8d"},statsContainer:{flexDirection:"row",paddingHorizontal:16,marginBottom:20,gap:12},statCard:{flex:1,padding:16,alignItems:"center",minHeight:80,justifyContent:"center"},adherenceCard:{borderLeftWidth:4,borderLeftColor:"#27ae60"},statNumber:{fontSize:24,fontWeight:"bold",color:"#2c3e50",marginBottom:4},statLabel:{fontSize:12,color:"#7f8c8d",textAlign:"center"},adherenceLabel:{fontSize:10,fontWeight:"600",marginTop:2},nextReminderCard:{marginHorizontal:16,marginBottom:20,padding:16,backgroundColor:"#e3f2fd",borderLeftWidth:4,borderLeftColor:"#2196f3"},nextReminderContent:{flex:1},nextReminderTitle:{fontSize:16,fontWeight:"600",color:"#2c3e50",marginBottom:4},nextReminderTime:{fontSize:14,color:"#2196f3",fontWeight:"500"},nextReminderIcon:{fontSize:24,alignSelf:"center"},section:{marginBottom:20},sectionTitle:{fontSize:20,fontWeight:"bold",color:"#2c3e50",paddingHorizontal:20,marginBottom:12},actionsContainer:{paddingHorizontal:16,marginBottom:20,gap:12},actionButton:{minHeight:56},tipsCard:{marginHorizontal:16,marginBottom:32,padding:20},tipsTitle:{fontSize:18,fontWeight:"bold",color:"#2c3e50",marginBottom:12},tipsList:{gap:8},tipItem:{fontSize:14,color:"#2c3e50",lineHeight:20}});function so(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return uo(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(uo(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,uo(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,uo(f,"constructor",u),uo(u,"constructor",s),s.displayName="GeneratorFunction",uo(u,o,"GeneratorFunction"),uo(f),uo(f,o,"Generator"),uo(f,r,function(){return this}),uo(f,"toString",function(){return"[object Generator]"}),(so=function(){return{w:i,m:d}})()}function uo(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}uo=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){uo(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},uo(e,t,n,r)}function lo(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function fo(e){return function(e){if(Array.isArray(e))return po(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||yo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yo(e,t){if(e){if("string"==typeof e)return po(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?po(e,t):void 0}}function po(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ho=[{id:"1",time:"08:00",label:"Morning (8:00 AM)"},{id:"2",time:"12:00",label:"Noon (12:00 PM)"},{id:"3",time:"18:00",label:"Evening (6:00 PM)"},{id:"4",time:"22:00",label:"Night (10:00 PM)"}],go=[{value:"daily",label:"Every Day"},{value:"twice-daily",label:"Twice a Day"},{value:"three-times-daily",label:"Three Times a Day"},{value:"as-needed",label:"As Needed"}],bo=function(e){var t=e.userId,n=e.onScheduleCreated,r=e.onCancel,a=mo((0,o.useState)(""),2),c=a[0],s=a[1],l=mo((0,o.useState)(""),2),d=l[0],m=l[1],y=mo((0,o.useState)("daily"),2),p=y[0],h=y[1],g=mo((0,o.useState)(["08:00"]),2),b=g[0],v=g[1],w=mo((0,o.useState)(""),2),S=w[0],k=w[1],E=mo((0,o.useState)(null),2),A=E[0],C=E[1],T=mo((0,o.useState)(!1),2),O=T[0],j=T[1],P=mo((0,o.useState)(!1),2),D=P[0],x=P[1],R=function(e){var t=mo(e.split(":"),2),n=t[0],r=t[1],o=parseInt(n),i=o>=12?"PM":"AM";return"".concat(0===o?12:o>12?o-12:o,":").concat(r," ").concat(i)},B=function(){var e,r=(e=so().m(function e(){var r,o;return so().w(function(e){for(;;)switch(e.p=e.n){case 0:if(c.trim()){e.n=1;break}return window.alert("Missing Information\n\nPlease enter the medication name."),e.a(2);case 1:if(d.trim()){e.n=2;break}return window.alert("Missing Information\n\nPlease enter the dosage."),e.a(2);case 2:if(0!==b.length){e.n=3;break}return window.alert("Missing Information\n\nPlease select at least one time for reminders."),e.a(2);case 3:return x(!0),e.p=4,e.n=5,Gr.x.createMedicationSchedule(t,c.trim(),d.trim(),p,b.sort(),A||void 0,O);case 5:r=e.v;try{window.alert("Medication Added Successfully!\n\n".concat(c," has been added to your medication schedule. You'll receive reminders at the selected times.")),null==n||n(r)}catch(e){null==n||n(r)}e.n=7;break;case 6:e.p=6,o=e.v,window.alert("Error\n\nFailed to save medication schedule: ".concat(o instanceof Error?o.message:"Unknown error",". Please try again."));case 7:return e.p=7,x(!1),e.f(7);case 8:return e.a(2)}},e,null,[[4,6,7,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){lo(i,r,o,a,c,"next",e)}function c(e){lo(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return r.apply(this,arguments)}}();return o.createElement(u.A,{style:vo.container,showsVerticalScrollIndicator:!0},o.createElement(G,{style:vo.card},o.createElement(J,{style:vo.title},"Add New Medication"),o.createElement(i.A,{style:vo.section},o.createElement(J,{style:vo.label},"Medication Name *"),o.createElement(re,{value:c,onChangeText:s,placeholder:"Enter medication name",style:vo.input,accessibilityLabel:"Medication name input",accessibilityHint:"Enter the name of your medication"})),o.createElement(i.A,{style:vo.section},o.createElement(J,{style:vo.label},"Dosage *"),o.createElement(re,{value:d,onChangeText:m,placeholder:"e.g., 10mg, 1 tablet",style:vo.input,accessibilityLabel:"Medication dosage input",accessibilityHint:"Enter the dosage amount"})),o.createElement(i.A,{style:vo.section},o.createElement(J,{style:vo.label},"How Often"),o.createElement(i.A,{style:vo.frequencyContainer},go.map(function(e){return o.createElement(f.A,{key:e.value,style:[vo.frequencyOption,p===e.value&&vo.frequencyOptionSelected],onPress:function(){return h(e.value)},accessibilityRole:"radio",accessibilityState:{checked:p===e.value},accessibilityLabel:"Frequency option: ".concat(e.label)},o.createElement(J,{style:[vo.frequencyText,p===e.value&&vo.frequencyTextSelected]},e.label))}))),o.createElement(i.A,{style:vo.section},o.createElement(J,{style:vo.label},"Reminder Times *"),o.createElement(J,{style:vo.subtitle},"Select when you want to be reminded"),o.createElement(i.A,{style:vo.timeSlotContainer},ho.map(function(e){return o.createElement(f.A,{key:e.id,style:[vo.timeSlot,b.includes(e.time)&&vo.timeSlotSelected],onPress:function(){return t=e,n=b.includes(t.time),void v(n?function(e){return e.filter(function(e){return e!==t.time})}:function(e){return[].concat(fo(e),[t.time])});var t,n},accessibilityRole:"checkbox",accessibilityState:{checked:b.includes(e.time)},accessibilityLabel:"Time slot: ".concat(e.label)},o.createElement(J,{style:[vo.timeSlotText,b.includes(e.time)&&vo.timeSlotTextSelected]},e.label))})),o.createElement(i.A,{style:vo.customTimeContainer},o.createElement(re,{value:S,onChangeText:k,placeholder:"Custom time (HH:MM)",style:[vo.input,vo.customTimeInput],accessibilityLabel:"Custom time input",accessibilityHint:"Enter custom reminder time in 24-hour format"}),o.createElement(I,{title:"Add",onPress:function(){S&&!b.includes(S)&&(v(function(e){return[].concat(fo(e),[S])}),k(""))},style:vo.addTimeButton,disabled:!S,accessibilityLabel:"Add custom time"})),b.length>0&&o.createElement(i.A,{style:vo.selectedTimesContainer},o.createElement(J,{style:vo.selectedTimesLabel},"Selected Times:"),o.createElement(i.A,{style:vo.selectedTimesList},b.map(function(e){return o.createElement(f.A,{key:e,style:vo.selectedTimeChip,onPress:function(){return t=e,void v(function(e){return e.filter(function(e){return e!==t})});var t},accessibilityRole:"button",accessibilityLabel:"Remove time ".concat(R(e)),accessibilityHint:"Tap to remove this reminder time"},o.createElement(J,{style:vo.selectedTimeText},R(e)),o.createElement(J,{style:vo.removeTimeText},"×"))})))),o.createElement(i.A,{style:vo.section},o.createElement(J,{style:vo.label},"Medication Photo (Optional)"),o.createElement(J,{style:vo.subtitle},"Take a photo to help identify your medication"),o.createElement(f.A,{style:vo.photoButton,onPress:function(){window.confirm("Take Photo\n\nThis would open the camera to take a photo of your medication for easy identification.\n\nClick OK to simulate taking a photo.")&&(C("medication_photo_".concat(Date.now(),".jpg")),window.alert("Photo taken successfully! (This is a simulation)"))},accessibilityRole:"button",accessibilityLabel:"Take medication photo",accessibilityHint:"Opens camera to take a photo of your medication"},A?o.createElement(i.A,{style:vo.photoPreview},o.createElement(J,{style:vo.photoPreviewText},"📷 Photo Added"),o.createElement(J,{style:vo.photoChangeText},"Tap to change")):o.createElement(i.A,{style:vo.photoPlaceholder},o.createElement(J,{style:vo.photoPlaceholderText},"📷"),o.createElement(J,{style:vo.photoButtonText},"Take Photo")))),o.createElement(i.A,{style:vo.section},o.createElement(f.A,{style:vo.criticalToggle,onPress:function(){return j(!O)},accessibilityRole:"switch",accessibilityState:{checked:O},accessibilityLabel:"Critical medication toggle",accessibilityHint:"Mark as critical to enable emergency contact notifications for missed doses"},o.createElement(i.A,{style:[vo.checkbox,O&&vo.checkboxChecked]},O&&o.createElement(J,{style:vo.checkmark},"✓")),o.createElement(i.A,{style:vo.criticalTextContainer},o.createElement(J,{style:vo.criticalLabel},"Critical Medication"),o.createElement(J,{style:vo.criticalSubtext},"Emergency contacts will be notified if multiple doses are missed")))),o.createElement(i.A,{style:vo.buttonContainer},o.createElement(I,{title:"Save Medication",onPress:B,style:vo.saveButton,disabled:D,accessibilityLabel:"Save medication schedule"}),r&&o.createElement(I,{title:"Cancel",onPress:r,variant:"secondary",style:vo.cancelButton,accessibilityLabel:"Cancel medication setup"}))))},vo=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5",paddingBottom:40},card:{margin:16,padding:20,flexGrow:1},title:{fontSize:24,fontWeight:"bold",color:"#2c3e50",marginBottom:20,textAlign:"center"},section:{marginBottom:24},label:{fontSize:18,fontWeight:"600",color:"#2c3e50",marginBottom:8},subtitle:{fontSize:14,color:"#7f8c8d",marginBottom:12},input:{fontSize:16,minHeight:50},frequencyContainer:{flexDirection:"row",flexWrap:"wrap",gap:8},frequencyOption:{paddingHorizontal:16,paddingVertical:12,borderRadius:8,borderWidth:2,borderColor:"#bdc3c7",backgroundColor:"#ffffff",minWidth:120,alignItems:"center"},frequencyOptionSelected:{borderColor:"#3498db",backgroundColor:"#e3f2fd"},frequencyText:{fontSize:16,color:"#2c3e50"},frequencyTextSelected:{color:"#3498db",fontWeight:"600"},timeSlotContainer:{gap:8},timeSlot:{paddingHorizontal:16,paddingVertical:12,borderRadius:8,borderWidth:2,borderColor:"#bdc3c7",backgroundColor:"#ffffff",alignItems:"center"},timeSlotSelected:{borderColor:"#27ae60",backgroundColor:"#e8f5e8"},timeSlotText:{fontSize:16,color:"#2c3e50"},timeSlotTextSelected:{color:"#27ae60",fontWeight:"600"},customTimeContainer:{flexDirection:"row",alignItems:"center",gap:12,marginTop:12},customTimeInput:{flex:1},addTimeButton:{paddingHorizontal:20},selectedTimesContainer:{marginTop:16},selectedTimesLabel:{fontSize:16,fontWeight:"600",color:"#2c3e50",marginBottom:8},selectedTimesList:{flexDirection:"row",flexWrap:"wrap",gap:8},selectedTimeChip:{flexDirection:"row",alignItems:"center",paddingHorizontal:12,paddingVertical:6,backgroundColor:"#27ae60",borderRadius:16,gap:6},selectedTimeText:{color:"#ffffff",fontSize:14,fontWeight:"500"},removeTimeText:{color:"#ffffff",fontSize:18,fontWeight:"bold"},photoButton:{borderWidth:2,borderColor:"#bdc3c7",borderStyle:"dashed",borderRadius:8,padding:20,alignItems:"center",backgroundColor:"#ffffff"},photoPlaceholder:{alignItems:"center"},photoPlaceholderText:{fontSize:32,marginBottom:8},photoButtonText:{fontSize:16,color:"#3498db",fontWeight:"500"},photoPreview:{alignItems:"center"},photoPreviewText:{fontSize:16,color:"#27ae60",fontWeight:"600",marginBottom:4},photoChangeText:{fontSize:14,color:"#7f8c8d"},criticalToggle:{flexDirection:"row",alignItems:"flex-start",gap:12},checkbox:{width:24,height:24,borderWidth:2,borderColor:"#bdc3c7",borderRadius:4,alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff",marginTop:2},checkboxChecked:{borderColor:"#e74c3c",backgroundColor:"#e74c3c"},checkmark:{color:"#ffffff",fontSize:16,fontWeight:"bold"},criticalTextContainer:{flex:1},criticalLabel:{fontSize:16,fontWeight:"600",color:"#2c3e50",marginBottom:4},criticalSubtext:{fontSize:14,color:"#7f8c8d",lineHeight:20},buttonContainer:{gap:12,marginTop:8},saveButton:{backgroundColor:"#27ae60"},cancelButton:{backgroundColor:"#95a5a6"}}),wo=function(e){var t=e.navigation;return o.createElement(i.A,{style:So.container},o.createElement(i.A,{style:So.header},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"})),o.createElement(bo,{userId:"demo-user-123",onScheduleCreated:function(){t.goBack()},onCancel:function(){t.goBack()}}))},So=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{padding:16,backgroundColor:"#ffffff",borderBottomWidth:1,borderBottomColor:"#e9ecef"}});function ko(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Eo(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Eo(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Eo(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Eo(f,"constructor",u),Eo(u,"constructor",s),s.displayName="GeneratorFunction",Eo(u,o,"GeneratorFunction"),Eo(f),Eo(f,o,"Generator"),Eo(f,r,function(){return this}),Eo(f,"toString",function(){return"[object Generator]"}),(ko=function(){return{w:i,m:d}})()}function Eo(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Eo=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Eo(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Eo(e,t,n,r)}function Ao(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Co(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ao(i,r,o,a,c,"next",e)}function c(e){Ao(i,r,o,a,c,"throw",e)}a(void 0)})}}function To(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var jo=function(e){var t=new Date(e),n=t.getDay(),r=t.getDate()-n;return t.setDate(r),t.setHours(0,0,0,0),t},Po=function(e){var t=e.userId,n=To((0,o.useState)([]),2),r=n[0],a=n[1],c=To((0,o.useState)(function(){var e=jo(new Date),t=new Date(e);t.setDate(t.getDate()-7);var n=new Date(e);return n.setDate(n.getDate()+7),{current:e,previous:t,next:n}}),2),s=c[0],u=c[1],l=To((0,o.useState)(!0),2),d=l[0],m=l[1],y=To((0,o.useState)([]),2),p=y[0],h=y[1];(0,o.useEffect)(function(){w(),S()},[t,s.current]);var g,b,v,w=function(){var e=Co(ko().m(function e(){var n;return ko().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,m(!0),e.n=1,Gr.x.getWeeklyAdherence(t,s.current);case 1:n=e.v,a(n),e.n=3;break;case 2:e.p=2,e.v,a([]);case 3:return e.p=3,m(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Co(ko().m(function e(){var n;return ko().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Gr.x.getAdherenceInsights(t);case 1:n=e.v,h(n),e.n=3;break;case 2:e.p=2,e.v,h([]);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),k=function(e){var t="previous"===e?s.previous:s.next,n=new Date(t);n.setDate(n.getDate()-7);var r=new Date(t);r.setDate(r.getDate()+7),u({current:t,previous:n,next:r})},E=function(e){return e>=90?"#27ae60":e>=75?"#f39c12":e>=50?"#e67e22":"#e74c3c"},A=function(e){return e>=90?"Excellent":e>=75?"Good":e>=50?"Fair":"Needs Improvement"},C=function(){var e=new Date,t=jo(e);return s.current.getTime()===t.getTime()};return d?o.createElement(i.A,{style:Do.loadingContainer},o.createElement(J,{style:Do.loadingText},"Loading adherence data...")):o.createElement(i.A,{style:Do.container},o.createElement(G,{style:Do.navigationCard},o.createElement(i.A,{style:Do.weekNavigation},o.createElement(f.A,{style:Do.navButton,onPress:function(){return k("previous")},accessibilityRole:"button",accessibilityLabel:"Previous week"},o.createElement(J,{style:Do.navButtonText},"← Previous")),o.createElement(i.A,{style:Do.weekInfo},o.createElement(J,{style:Do.weekRange},function(e){var t=new Date(e);t.setDate(t.getDate()+6);var n=e.toLocaleDateString([],{month:"short",day:"numeric"}),r=t.toLocaleDateString([],{month:"short",day:"numeric"});return"".concat(n," - ").concat(r)}(s.current)),C()&&o.createElement(J,{style:Do.currentWeekLabel},"This Week")),o.createElement(f.A,{style:[Do.navButton,C()&&Do.navButtonDisabled],onPress:function(){return k("next")},disabled:C(),accessibilityRole:"button",accessibilityLabel:"Next week"},o.createElement(J,{style:[Do.navButtonText,C()&&Do.navButtonTextDisabled]},"Next →")))),r.length>0?o.createElement(o.Fragment,null,o.createElement(J,{style:Do.sectionTitle},"Medication Adherence"),r.map(function(e){return o.createElement(G,{key:e.scheduleId,style:Do.medicationCard},o.createElement(i.A,{style:Do.medicationHeader},o.createElement(J,{style:Do.medicationName},e.medicationName),o.createElement(i.A,{style:[Do.adherencePercentage,{backgroundColor:E(e.adherencePercentage)}]},o.createElement(J,{style:Do.percentageText},e.adherencePercentage,"%"))),o.createElement(J,{style:[Do.adherenceLabel,{color:E(e.adherencePercentage)}]},A(e.adherencePercentage)),o.createElement(i.A,{style:Do.adherenceStats},o.createElement(i.A,{style:Do.statItem},o.createElement(J,{style:Do.statNumber},e.takenDoses),o.createElement(J,{style:Do.statLabel},"Taken")),o.createElement(i.A,{style:Do.statItem},o.createElement(J,{style:[Do.statNumber,Do.missedNumber]},e.missedDoses),o.createElement(J,{style:Do.statLabel},"Missed")),o.createElement(i.A,{style:Do.statItem},o.createElement(J,{style:[Do.statNumber,Do.skippedNumber]},e.skippedDoses),o.createElement(J,{style:Do.statLabel},"Skipped")),o.createElement(i.A,{style:Do.statItem},o.createElement(J,{style:Do.statNumber},e.totalDoses),o.createElement(J,{style:Do.statLabel},"Total"))),o.createElement(i.A,{style:Do.progressBarContainer},o.createElement(i.A,{style:Do.progressBarBackground},o.createElement(i.A,{style:[Do.progressBarFill,{width:"".concat(e.adherencePercentage,"%"),backgroundColor:E(e.adherencePercentage)}]}))))}),o.createElement(G,{style:Do.summaryCard},o.createElement(J,{style:Do.summaryTitle},"Weekly Summary"),(g=r.reduce(function(e,t){return e+t.totalDoses},0),b=r.reduce(function(e,t){return e+t.takenDoses},0),v=g>0?Math.round(b/g*100):0,o.createElement(i.A,{style:Do.overallStats},o.createElement(i.A,{style:Do.overallPercentage},o.createElement(J,{style:[Do.overallPercentageText,{color:E(v)}]},v,"%"),o.createElement(J,{style:Do.overallLabel},"Overall Adherence")),o.createElement(i.A,{style:Do.overallBreakdown},o.createElement(J,{style:Do.breakdownText},b," of ",g," doses taken"),o.createElement(J,{style:[Do.overallStatusText,{color:E(v)}]},A(v)))))),p.length>0&&o.createElement(G,{style:Do.insightsCard},o.createElement(J,{style:Do.insightsTitle},"💡 Insights & Tips"),p.map(function(e,t){return o.createElement(i.A,{key:t,style:Do.insightItem},o.createElement(J,{style:Do.insightText},e))}))):o.createElement(G,{style:Do.emptyCard},o.createElement(J,{style:Do.emptyTitle},"No Medication Data"),o.createElement(J,{style:Do.emptyText},"Set up your medication schedule to start tracking adherence.")))},Do=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5",padding:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},loadingText:{fontSize:16,color:"#7f8c8d"},navigationCard:{marginBottom:16,padding:16},weekNavigation:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},navButton:{paddingHorizontal:16,paddingVertical:8,borderRadius:8,backgroundColor:"#3498db",minWidth:80,alignItems:"center"},navButtonDisabled:{backgroundColor:"#bdc3c7"},navButtonText:{color:"#ffffff",fontSize:14,fontWeight:"500"},navButtonTextDisabled:{color:"#7f8c8d"},weekInfo:{alignItems:"center"},weekRange:{fontSize:18,fontWeight:"bold",color:"#2c3e50"},currentWeekLabel:{fontSize:12,color:"#3498db",marginTop:2},sectionTitle:{fontSize:20,fontWeight:"bold",color:"#2c3e50",marginBottom:12},medicationCard:{marginBottom:16,padding:16},medicationHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},medicationName:{fontSize:18,fontWeight:"bold",color:"#2c3e50",flex:1},adherencePercentage:{paddingHorizontal:12,paddingVertical:6,borderRadius:16,minWidth:60,alignItems:"center"},percentageText:{color:"#ffffff",fontSize:14,fontWeight:"bold"},adherenceLabel:{fontSize:14,fontWeight:"600",marginBottom:12},adherenceStats:{flexDirection:"row",justifyContent:"space-around",marginBottom:16},statItem:{alignItems:"center"},statNumber:{fontSize:20,fontWeight:"bold",color:"#2c3e50"},missedNumber:{color:"#e74c3c"},skippedNumber:{color:"#f39c12"},statLabel:{fontSize:12,color:"#7f8c8d",marginTop:2},progressBarContainer:{marginTop:8},progressBarBackground:{height:8,backgroundColor:"#ecf0f1",borderRadius:4,overflow:"hidden"},progressBarFill:{height:"100%",borderRadius:4},summaryCard:{marginBottom:16,padding:20,backgroundColor:"#ffffff"},summaryTitle:{fontSize:18,fontWeight:"bold",color:"#2c3e50",marginBottom:16,textAlign:"center"},overallStats:{alignItems:"center"},overallPercentage:{alignItems:"center",marginBottom:12},overallPercentageText:{fontSize:36,fontWeight:"bold"},overallLabel:{fontSize:14,color:"#7f8c8d",marginTop:4},overallBreakdown:{alignItems:"center"},breakdownText:{fontSize:16,color:"#2c3e50",marginBottom:4},overallStatusText:{fontSize:16,fontWeight:"600"},insightsCard:{marginBottom:16,padding:16},insightsTitle:{fontSize:18,fontWeight:"bold",color:"#2c3e50",marginBottom:12},insightItem:{marginBottom:8},insightText:{fontSize:14,color:"#2c3e50",lineHeight:20},emptyCard:{padding:24,alignItems:"center"},emptyTitle:{fontSize:20,fontWeight:"bold",color:"#7f8c8d",marginBottom:8},emptyText:{fontSize:16,color:"#7f8c8d",textAlign:"center",lineHeight:24}}),xo=function(e){var t=e.navigation;return o.createElement(i.A,{style:Io.container},o.createElement(i.A,{style:Io.header},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"}),o.createElement(J,{style:Io.title},"Weekly Adherence Report")),o.createElement(u.A,{style:Io.scrollView,contentContainerStyle:Io.scrollContent,showsVerticalScrollIndicator:!0},o.createElement(Po,{userId:"demo-user-123"})))},Io=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5"},header:{padding:20,paddingBottom:16},title:{fontSize:24,fontWeight:"bold",color:"#2c3e50",marginTop:16,textAlign:"center"},content:{flex:1},scrollView:{flex:1},scrollContent:{paddingBottom:40,flexGrow:1}});function Ro(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Bo(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Bo(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Bo(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Bo(f,"constructor",u),Bo(u,"constructor",s),s.displayName="GeneratorFunction",Bo(u,o,"GeneratorFunction"),Bo(f),Bo(f,o,"Generator"),Bo(f,r,function(){return this}),Bo(f,"toString",function(){return"[object Generator]"}),(Ro=function(){return{w:i,m:d}})()}function Bo(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Bo=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Bo(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Bo(e,t,n,r)}function Lo(e){return _o(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zo(e)||No()}function Mo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Fo(e,t){return _o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||zo(e,t)||No()}function No(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zo(e,t){if(e){if("string"==typeof e)return Ho(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(e,t):void 0}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _o(e){if(Array.isArray(e))return e}function Go(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Wo(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Go(i,r,o,a,c,"next",e)}function c(e){Go(i,r,o,a,c,"throw",e)}a(void 0)})}}var Uo=function(){var e=Wo(Ro().m(function e(t){var n,r,o,i,a,c,s,u,l,f,d,m,y,p,h;return Ro().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Gr.x.getMedicationSchedules(t);case 1:n=e.v,r=new Map,n.forEach(function(e){var t=e.medicationName.toLowerCase().trim();r.has(t)||r.set(t,[]),r.get(t).push(e)}),o=0,i=0,a=Mo(r),e.p=2,a.s();case 3:if((c=a.n()).done){e.n=16;break}if(s=Fo(c.value,2),s[0],!((u=s[1]).length>1)){e.n=14;break}u.sort(function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}),l=Lo(u),l[0],f=l.slice(1),d=Mo(f),e.p=4,d.s();case 5:if((m=d.n()).done){e.n=10;break}return y=m.value,e.p=6,e.n=7,Gr.x.deleteMedicationSchedule(y.id);case 7:e.v&&o++,e.n=9;break;case 8:e.p=8,e.v;case 9:e.n=5;break;case 10:e.n=12;break;case 11:e.p=11,p=e.v,d.e(p);case 12:return e.p=12,d.f(),e.f(12);case 13:i++,e.n=15;break;case 14:i++;case 15:e.n=3;break;case 16:e.n=18;break;case 17:e.p=17,h=e.v,a.e(h);case 18:return e.p=18,a.f(),e.f(18);case 19:return e.a(2,{totalMedications:n.length,duplicatesRemoved:o,activeMedications:i});case 20:throw e.p=20,e.v;case 21:return e.a(2)}},e,null,[[6,8],[4,11,12,13],[2,17,18,19],[0,20]])}));return function(t){return e.apply(this,arguments)}}(),Vo=function(){var e=Wo(Ro().m(function e(t){var n,r,o,i;return Ro().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Gr.x.getMedicationSchedules(t);case 1:return n=e.v,r=new Map,n.forEach(function(e){var t=e.medicationName.toLowerCase().trim();r.has(t)||r.set(t,[]),r.get(t).push(e)}),o=Array.from(r.entries()).filter(function(e){var t=Fo(e,2);t[0];return t[1].length>1}).map(function(e){var t=Fo(e,2),n=t[0],r=t[1];return{medicationName:n,count:r.length,entries:r.sort(function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})}}),i=o.reduce(function(e,t){return e+t.count-1},0),e.a(2,{totalMedications:n.length,uniqueMedications:r.size,duplicates:i,duplicateGroups:o});case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),qo=n(2884);function Yo(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Jo(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Jo(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Jo(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Jo(f,"constructor",u),Jo(u,"constructor",s),s.displayName="GeneratorFunction",Jo(u,o,"GeneratorFunction"),Jo(f),Jo(f,o,"Generator"),Jo(f,r,function(){return this}),Jo(f,"toString",function(){return"[object Generator]"}),(Yo=function(){return{w:i,m:d}})()}function Jo(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Jo=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Jo(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Jo(e,t,n,r)}function Ko(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function $o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ko(i,r,o,a,c,"next",e)}function c(e){Ko(i,r,o,a,c,"throw",e)}a(void 0)})}}function Qo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zo=function(e){var t=e.navigation,r=Qo((0,o.useState)([]),2),a=r[0],c=r[1],s=Qo((0,o.useState)(!0),2),l=s[0],f=s[1],d=Qo((0,o.useState)("demo-user-123"),1)[0];(0,o.useEffect)(function(){m()},[]);var m=function(){var e=$o(Yo().m(function e(){var t;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,f(!0),e.n=1,Gr.x.getMedicationSchedules(d);case 1:t=e.v,c(t),e.n=3;break;case 2:e.p=2,e.v,le.A.alert("Error","Failed to load medications. Please try again.");case 3:return e.p=3,f(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=$o(Yo().m(function e(){var t,n,r,o;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=1,e.n=2,Vo(d);case 2:if(0!==(t=e.v).duplicates){e.n=3;break}return window.alert("No Duplicates\nNo duplicate medications found."),e.a(2);case 3:if(!window.confirm("Clean Up Duplicates\n\nFound ".concat(t.duplicates," duplicate medication entries. This will keep the most recent entry for each medication and remove duplicates.\n\nContinue?"))){e.n=8;break}return e.p=4,e.n=5,Uo(d);case 5:return n=e.v,window.alert("Cleanup Complete\n\nRemoved ".concat(n.duplicatesRemoved," duplicate entries. You now have ").concat(n.activeMedications," active medications.")),e.n=6,m();case 6:e.n=8;break;case 7:e.p=7,r=e.v,window.alert("Error\nFailed to cleanup duplicates: ".concat(r instanceof Error?r.message:"Unknown error",". Please try again."));case 8:e.n=10;break;case 9:e.p=9,o=e.v,window.alert("Error\nFailed to check for duplicates: ".concat(o instanceof Error?o.message:"Unknown error",". Please try again."));case 10:return e.a(2)}},e,null,[[4,7],[1,9]])}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=$o(Yo().m(function e(){var t;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,qo.addTestMedications)(d);case 1:le.A.alert("Success","Test medications added successfully!"),m(),e.n=3;break;case 2:e.p=2,t=e.v,le.A.alert("Error","Failed to add test data: ".concat(t instanceof Error?t.message:"Unknown error",". Please try again."));case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=$o(Yo().m(function e(){var t,r,o;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!window.confirm("Clear All Medications\n\nAre you sure you want to clear all medications? This action cannot be undone.")){e.n=6;break}return e.p=1,e.n=2,Promise.resolve().then(n.bind(n,2884));case 2:return t=e.v,r=t.clearAllStorageData,e.n=3,r();case 3:return window.alert("Success\nAll medications cleared successfully!"),e.n=4,m();case 4:e.n=6;break;case 5:e.p=5,o=e.v,window.alert("Error\nFailed to clear data: ".concat(o instanceof Error?o.message:"Unknown error",". Please try again."));case 6:return e.a(2)}},e,null,[[1,5]])}));return function(){return e.apply(this,arguments)}}(),g=function(e){return e.map(function(e){var t=Qo(e.split(":"),2),n=t[0],r=t[1],o=new Date;return o.setHours(parseInt(n),parseInt(r)),o.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})}).join(", ")};return l?o.createElement(i.A,{style:ei.loadingContainer},o.createElement(J,{style:ei.loadingText},"Loading your medications...")):o.createElement(i.A,{style:ei.container},o.createElement(u.A,{style:ei.scrollView,contentContainerStyle:ei.scrollContent,showsVerticalScrollIndicator:!0},o.createElement(i.A,{style:ei.header},o.createElement(J,{style:ei.title},"Manage Medications"),o.createElement(J,{style:ei.subtitle},"View and manage all your medications")),o.createElement(i.A,{style:ei.addButtonContainer},o.createElement(I,{title:"➕ Add New Medication",onPress:function(){return t.navigate("MedicationSetup")},accessibilityLabel:"Add new medication"}),o.createElement(I,{title:"🧹 Clean Up Duplicates",onPress:y,variant:"secondary",accessibilityLabel:"Clean up duplicate medications"}),o.createElement(I,{title:"🧪 Add Test Data",onPress:p,variant:"secondary",accessibilityLabel:"Add test medications for testing"}),o.createElement(I,{title:"🗑️ Clear All Data",onPress:h,variant:"secondary",accessibilityLabel:"Clear all medications"})),0===a.length?o.createElement(G,{style:ei.emptyCard},o.createElement(J,{style:ei.emptyTitle},"No Medications"),o.createElement(J,{style:ei.emptyText},'You haven\'t added any medications yet. Tap "Add New Medication" to get started.')):o.createElement(i.A,{style:ei.medicationsList},a.map(function(e){return o.createElement(G,{key:e.id,style:ei.medicationCard},o.createElement(i.A,{style:ei.medicationHeader},o.createElement(i.A,{style:ei.medicationInfo},o.createElement(J,{style:ei.medicationName},e.medicationName),o.createElement(J,{style:ei.dosage},e.dosage),o.createElement(J,{style:ei.frequency},e.frequency," • ",g(e.times))),o.createElement(i.A,{style:ei.statusIndicator},o.createElement(i.A,{style:[ei.statusDot,{backgroundColor:e.isActive?"#27ae60":"#e74c3c"}]}),o.createElement(J,{style:ei.statusText},e.isActive?"Active":"Inactive"))),o.createElement(i.A,{style:ei.actionButtons},o.createElement(I,{title:"View Details",onPress:function(){return function(e){var t=function(e){if(!e)return"Not available";try{var t=new Date(e);return isNaN(t.getTime())?"Not available":t.toLocaleDateString()}catch(e){return"Not available"}},n="Medication Information:\n\n• Name: ".concat(e.medicationName,"\n• Dosage: ").concat(e.dosage,"\n• Frequency: ").concat(e.frequency,"\n• Times: ").concat(g(e.times),"\n• Status: ").concat(e.isActive?"Active":"Inactive","\n• Created: ").concat(t(e.createdAt),"\n• Last Updated: ").concat(t(e.updatedAt));try{window.alert("".concat(e.medicationName," Details\n\n").concat(n))}catch(e){}}(e)},variant:"secondary",accessibilityLabel:"View details for ".concat(e.medicationName)}),o.createElement(I,{title:"Edit",onPress:function(){return function(e){var t="Current Details:\n• Name: ".concat(e.medicationName,"\n• Dosage: ").concat(e.dosage,"\n• Frequency: ").concat(e.frequency,"\n• Times: ").concat(g(e.times),"\n• Status: ").concat(e.isActive?"Active":"Inactive");window.confirm("Edit ".concat(e.medicationName,"\n\n").concat(t,"\n\nClick OK to toggle status."))&&$o(Yo().m(function t(){var n;return Yo().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Gr.x.updateMedicationSchedule(e.id,{isActive:!e.isActive});case 1:if(!t.v){t.n=3;break}return window.alert("Updated ".concat(e.medicationName," status.")),t.n=2,m();case 2:t.n=4;break;case 3:window.alert("Failed to update medication status.");case 4:t.n=6;break;case 5:t.p=5,n=t.v,window.alert("Failed to update medication: ".concat(n instanceof Error?n.message:"Unknown error","."));case 6:return t.a(2)}},t,null,[[0,5]])}))()}(e)},variant:"secondary",accessibilityLabel:"Edit ".concat(e.medicationName)}),o.createElement(I,{title:"Delete",onPress:function(){return function(e){window.confirm("Are you sure you want to delete ".concat(e.medicationName,"? This action cannot be undone."))&&$o(Yo().m(function t(){var n;return Yo().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Gr.x.deleteMedicationSchedule(e.id);case 1:if(!t.v){t.n=3;break}return window.alert("".concat(e.medicationName," has been deleted.")),t.n=2,m();case 2:t.n=4;break;case 3:window.alert("Failed to delete medication. Please try again.");case 4:t.n=6;break;case 5:t.p=5,n=t.v,window.alert("Failed to delete medication: ".concat(n instanceof Error?n.message:"Unknown error",". Please try again."));case 6:return t.a(2)}},t,null,[[0,5]])}))()}(e)},accessibilityLabel:"Delete ".concat(e.medicationName)})))})),o.createElement(i.A,{style:ei.backButtonContainer},o.createElement(I,{title:"← Back to Main",onPress:function(){return t.goBack()},variant:"secondary",accessibilityLabel:"Go back to main dashboard"}))))},ei=a.A.create({container:{flex:1,backgroundColor:"#f5f5f5"},scrollView:{flex:1},scrollContent:{paddingBottom:40,flexGrow:1},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},loadingText:{fontSize:18,color:"#7f8c8d"},header:{padding:20,paddingBottom:16},title:{fontSize:28,fontWeight:"bold",color:"#2c3e50",marginBottom:4},subtitle:{fontSize:16,color:"#7f8c8d"},addButtonContainer:{paddingHorizontal:16,marginBottom:20},addButton:{minHeight:56},emptyCard:{margin:16,padding:24,alignItems:"center"},emptyTitle:{fontSize:20,fontWeight:"bold",color:"#7f8c8d",marginBottom:8},emptyText:{fontSize:16,color:"#7f8c8d",textAlign:"center",lineHeight:24},medicationsList:{paddingHorizontal:16,marginBottom:20},medicationCard:{marginBottom:16,padding:16},medicationHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},medicationInfo:{flex:1},medicationName:{fontSize:20,fontWeight:"bold",color:"#2c3e50",marginBottom:4},dosage:{fontSize:16,color:"#7f8c8d",marginBottom:4},frequency:{fontSize:14,color:"#3498db",fontWeight:"500",marginBottom:4},criticalBadge:{fontSize:12,color:"#e74c3c",fontWeight:"bold",backgroundColor:"#fdf2f2",paddingHorizontal:8,paddingVertical:2,borderRadius:4,alignSelf:"flex-start"},statusIndicator:{alignItems:"center"},statusDot:{width:8,height:8,borderRadius:4,marginBottom:4},statusText:{fontSize:12,color:"#7f8c8d"},actionButtons:{flexDirection:"row",gap:8,flexWrap:"wrap"},actionButton:{flex:1,minHeight:44},deleteButton:{backgroundColor:"#e74c3c"},backButtonContainer:{paddingHorizontal:16,marginBottom:32},backButton:{minHeight:56}});function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ni(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ri=function(e){var t=e.children,n=ti((0,o.useState)("mobile"),2),r=n[0],a=n[1],c=ti((0,o.useState)(!1),2),s=c[0],u=c[1];(0,o.useEffect)(function(){var e=function(){var e=window.innerWidth;a(e<=480?"mobile":e<=1024?"tablet":"desktop")};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var l=function(){u(!s)},m=function(e){a(e);var t=document.getElementById("mobile-container");t&&(t.className="".concat(e,"-container"))};return s?o.createElement(i.A,{style:oi.container},t,o.createElement(i.A,{style:oi.simulatorPanel},o.createElement(i.A,{style:oi.simulatorHeader},o.createElement(d.A,{style:oi.simulatorTitle},"Device Simulator"),o.createElement(f.A,{style:oi.closeButton,onPress:l,accessibilityLabel:"Close device simulator"},o.createElement(d.A,{style:oi.closeButtonText},"✕"))),o.createElement(i.A,{style:oi.deviceButtons},o.createElement(f.A,{style:[oi.deviceButton,"mobile"===r&&oi.activeDeviceButton],onPress:function(){return m("mobile")},accessibilityLabel:"Switch to mobile view"},o.createElement(d.A,{style:oi.deviceButtonText},"📱 Mobile")),o.createElement(f.A,{style:[oi.deviceButton,"tablet"===r&&oi.activeDeviceButton],onPress:function(){return m("tablet")},accessibilityLabel:"Switch to tablet view"},o.createElement(d.A,{style:oi.deviceButtonText},"📱 Tablet")),o.createElement(f.A,{style:[oi.deviceButton,"desktop"===r&&oi.activeDeviceButton],onPress:function(){return m("desktop")},accessibilityLabel:"Switch to desktop view"},o.createElement(d.A,{style:oi.deviceButtonText},"💻 Desktop"))),o.createElement(i.A,{style:oi.info},o.createElement(d.A,{style:oi.infoText},"Current: ",r.charAt(0).toUpperCase()+r.slice(1)),o.createElement(d.A,{style:oi.infoText},"Width: ",window.innerWidth,"px")))):o.createElement(i.A,{style:oi.container},t,o.createElement(f.A,{style:oi.toggleButton,onPress:l,accessibilityLabel:"Toggle device simulator"},o.createElement(d.A,{style:oi.toggleButtonText},"📱")))},oi=a.A.create({container:{flex:1,position:"relative"},toggleButton:{position:"absolute",top:20,right:20,width:50,height:50,borderRadius:25,backgroundColor:"#4f46e5",justifyContent:"center",alignItems:"center",zIndex:1e3,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},toggleButtonText:{fontSize:20,color:"white"},simulatorPanel:{position:"absolute",top:20,right:20,width:200,backgroundColor:"white",borderRadius:12,padding:16,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:10,zIndex:1001},simulatorHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},simulatorTitle:{fontSize:16,fontWeight:"bold",color:"#2c3e50"},closeButton:{width:24,height:24,borderRadius:12,backgroundColor:"#e9ecef",justifyContent:"center",alignItems:"center"},closeButtonText:{fontSize:12,color:"#6c757d"},deviceButtons:{gap:8,marginBottom:16},deviceButton:{paddingHorizontal:12,paddingVertical:8,borderRadius:6,backgroundColor:"#f8f9fa",borderWidth:1,borderColor:"#e9ecef"},activeDeviceButton:{backgroundColor:"#4f46e5",borderColor:"#4f46e5"},deviceButtonText:{fontSize:14,color:"#2c3e50"},info:{borderTopWidth:1,borderTopColor:"#e9ecef",paddingTop:12},infoText:{fontSize:12,color:"#6c757d",marginBottom:4}});function ii(e){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ii(e)}function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach(function(t){si(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function si(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ii(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ii(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ui=function(e){return ci({id:crypto.randomUUID(),name:"Sarah Johnson",relationship:"Daughter",phoneNumber:"+1-555-987-6543",email:"sarah.johnson@email.com",photo:"https://example.com/sarah.jpg",isEmergencyContact:!0,canViewHealthStatus:!0,createdAt:new Date("2024-01-01"),lastContactedAt:new Date},e)},li=function(e){return ci({id:crypto.randomUUID(),fromUserId:crypto.randomUUID(),toUserId:crypto.randomUUID(),content:"Hi Mom! How are you feeling today?",type:"text",sentAt:new Date,readAt:new Date},e)},fi=function(e){var t=["Son","Daughter","Spouse","Friend","Neighbor","Caregiver"],n=["John Smith","Sarah Johnson","Michael Brown","Emily Davis","Robert Wilson","Lisa Anderson"];return Array.from({length:e},function(e,r){return ui({name:n[r%n.length],relationship:t[r%t.length],phoneNumber:"+1-555-".concat(String(Math.floor(900*Math.random())+100),"-").concat(String(Math.floor(9e3*Math.random())+1e3)),isEmergencyContact:r<2})})},di=function(e,t,n){var r=["Hi! How are you doing today?","Just wanted to check in on you.","The weather is beautiful today!","Don't forget to take your medication.","Love you!","Call me when you get a chance."];return Array.from({length:e},function(o,i){var a=new Date;return a.setHours(a.getHours()-i),li({fromUserId:i%2==0?t:n,toUserId:i%2==0?n:t,content:r[i%r.length],sentAt:a,readAt:i<e-2?a:void 0})})};function mi(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return yi(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(yi(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,yi(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,yi(f,"constructor",u),yi(u,"constructor",s),s.displayName="GeneratorFunction",yi(u,o,"GeneratorFunction"),yi(f),yi(f,o,"Generator"),yi(f,r,function(){return this}),yi(f,"toString",function(){return"[object Generator]"}),(mi=function(){return{w:i,m:d}})()}function yi(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}yi=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){yi(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},yi(e,t,n,r)}function pi(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function hi(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){pi(i,r,o,a,c,"next",e)}function c(e){pi(i,r,o,a,c,"throw",e)}a(void 0)})}}var gi=function(){var e=hi(mi().m(function e(){var t,n,r,o;return mi().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=new fe.DataAccessLayer,e.p=1,e.n=2,t.getCommunicationData();case 2:if(!((n=e.v)&&n.contacts.length>0)){e.n=3;break}return e.a(2);case 3:return r=fi(5),o=r.length>0?di(8,r[0].id,"current-user"):[],e.n=4,t.saveCommunicationData({contacts:r,messages:o,videoCalls:[]});case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[1,5]])}));return function(){return e.apply(this,arguments)}}();function bi(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return vi(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(vi(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,vi(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,vi(f,"constructor",u),vi(u,"constructor",s),s.displayName="GeneratorFunction",vi(u,o,"GeneratorFunction"),vi(f),vi(f,o,"Generator"),vi(f,r,function(){return this}),vi(f,"toString",function(){return"[object Generator]"}),(bi=function(){return{w:i,m:d}})()}function vi(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}vi=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){vi(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},vi(e,t,n,r)}function wi(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ki(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ei=a.A.create({container:{flex:1,backgroundColor:"#F8FAFC",maxWidth:"100%",overflow:"hidden",paddingTop:0,paddingBottom:0}});const Ai=function(){var e=Si((0,o.useState)("dashboard"),2),t=e[0],n=e[1],r="demo-user-123";(0,o.useEffect)(function(){var e=function(){var e,t=(e=bi().m(function e(){return bi().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=1,e.n=2,gi();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){wi(i,r,o,a,c,"next",e)}function c(e){wi(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}();e()},[]);var a=function(e){"Health"===e?n("daily-checkin"):"Emergency"===e?n("emergency"):"Family"===e?n("family"):"Community"===e?n("community"):"Activities"===e?n("activities"):"Medication"===e?n("medication"):window.alert("Navigation to ".concat(e," - This would navigate in the full app"))},c=function(){n("dashboard")},s=function(e){return o.createElement(ri,null,o.createElement(i.A,{style:Ei.container},e))};return s("daily-checkin"===t?o.createElement(Ne,{userId:r,onComplete:function(e){window.alert("Daily check-in completed! Mood: ".concat(e.mood,"/5, Energy: ").concat(e.energyLevel,"/5")),n("dashboard")},onCancel:function(){n("dashboard")}}):"emergency"===t?o.createElement(Xe,{navigation:{goBack:c}}):"family"===t?o.createElement(hn,{navigation:{goBack:c}}):"community"===t?o.createElement(pr,{route:{params:{userId:r}},navigation:{goBack:c}}):"activities"===t?o.createElement(Hr,{route:{params:{userId:r}},navigation:{goBack:function(){return n("dashboard")}}}):"medication"===t?o.createElement(ao,{navigation:{goBack:c,navigate:function(e){"MedicationSetup"===e?n("medication-setup"):"WeeklyAdherence"===e?n("weekly-adherence"):"MedicationManagement"===e?n("medication-management"):alert("Navigation to ".concat(e," - This would navigate in the full app"))}}}):"medication-setup"===t?o.createElement(wo,{navigation:{goBack:function(){return n("medication")}}}):"weekly-adherence"===t?o.createElement(xo,{navigation:{goBack:function(){return n("medication")}}}):"medication-management"===t?o.createElement(Zo,{navigation:{goBack:function(){return n("medication")},navigate:function(e){"MedicationSetup"===e?n("medication-setup"):alert("Navigation to ".concat(e," - This would navigate in the full app"))}}}):o.createElement(ce,{onEmergencyPress:function(){return a("Emergency")},onHealthPress:function(){return a("Health")},onFamilyPress:function(){return a("Family")},onActivitiesPress:function(){return a("Activities")},onCommunityPress:function(){return a("Community")},onMedicationPress:function(){return a("Medication")}}))};r.A.registerComponent("BuddyMate",function(){return Ai}),r.A.runApplication("BuddyMate",{rootTag:document.getElementById("mobile-container")})},7236:(e,t,n)=>{"use strict";n.d(t,{H:()=>A,g:()=>C});var r=n(1396),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return f(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),m=u.prototype=c.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=u,f(m,"constructor",u),f(u,"constructor",s),s.displayName="GeneratorFunction",f(u,o,"GeneratorFunction"),f(m),f(m,o,"Generator"),f(m,r,function(){return this}),f(m,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:y}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){f(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},f(e,t,n,r)}function d(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,c,"next",e)}function c(e){d(i,r,o,a,c,"throw",e)}a(void 0)})}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}const h=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getItem",value:(p=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,localStorage.getItem(t));case 1:return e.p=1,e.v,e.a(2,null)}},e,null,[[0,1]])})),function(e){return p.apply(this,arguments)})},{key:"setItem",value:(d=m(l().m(function e(t,n){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,localStorage.setItem(t,n),e.n=2;break;case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])})),function(e,t){return d.apply(this,arguments)})},{key:"removeItem",value:(f=m(l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,localStorage.removeItem(t),e.n=2;break;case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])})),function(e){return f.apply(this,arguments)})},{key:"clear",value:(u=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,localStorage.clear(),e.n=2;break;case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])})),function(){return u.apply(this,arguments)})},{key:"getAllKeys",value:(s=m(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:for(e.p=0,t=[],n=0;n<localStorage.length;n++)(r=localStorage.key(n))&&t.push(r);return e.a(2,t);case 1:return e.p=1,e.v,e.a(2,[])}},e,null,[[0,1]])})),function(){return s.apply(this,arguments)})},{key:"multiGet",value:(i=m(l().m(function e(t){var n,r,o,i,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,n=[],r=c(t);try{for(r.s();!(o=r.n()).done;)i=o.value,a=localStorage.getItem(i),n.push([i,a])}catch(e){r.e(e)}finally{r.f()}return e.a(2,n);case 1:return e.p=1,e.v,e.a(2,t.map(function(e){return[e,null]}))}},e,null,[[0,1]])})),function(e){return i.apply(this,arguments)})},{key:"multiSet",value:(o=m(l().m(function e(t){var n,r,o,i,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,n=c(t);try{for(n.s();!(r=n.n()).done;)o=a(r.value,2),i=o[0],s=o[1],localStorage.setItem(i,s)}catch(e){n.e(e)}finally{n.f()}e.n=2;break;case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])})),function(e){return o.apply(this,arguments)})},{key:"multiRemove",value:(r=m(l().m(function e(t){var n,r,o;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,n=c(t);try{for(n.s();!(r=n.n()).done;)o=r.value,localStorage.removeItem(o)}catch(e){n.e(e)}finally{n.f()}e.n=2;break;case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])})),function(e){return r.apply(this,arguments)})}],t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,i,s,u,f,d,p}());function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return v(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,c=0,s=e,d.n=n,a}};function m(n,r){for(c=n,s=r,t=0;!f&&u&&!o&&t<l.length;t++){var o,i=l[t],m=d.p,y=i[2];n>3?(o=y===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=n<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),c=l,s=y;(t=c<2?e:s)||!f;){i||(c?c<3?(c>1&&(d.n=-1),m(c,s)):d.n=s:d.v=s);try{if(u=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(v(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,v(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,v(f,"constructor",u),v(u,"constructor",s),s.displayName="GeneratorFunction",v(u,o,"GeneratorFunction"),v(f),v(f,o,"Generator"),v(f,r,function(){return this}),v(f,"toString",function(){return"[object Generator]"}),(b=function(){return{w:i,m:d}})()}function v(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}v=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){v(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},v(e,t,n,r)}function w(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,c,"next",e)}function c(e){w(i,r,o,a,c,"throw",e)}a(void 0)})}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var A=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.encryptionKey=t||"buddy-mate-default-key-2024"},t=[{key:"setItem",value:(f=S(b().m(function e(t,n){var r,o,i,a=arguments;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.p=1,o=r?this.encrypt(n):n,e.n=2,h.setItem(t,o);case 2:e.n=4;break;case 3:throw e.p=3,i=e.v,new Error("Failed to store item with key ".concat(t,": ").concat(i));case 4:return e.a(2)}},e,this,[[1,3]])})),function(e,t){return f.apply(this,arguments)})},{key:"getItem",value:(l=S(b().m(function e(t){var n,r,o,i,a=arguments;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.p=1,e.n=2,h.getItem(t);case 2:if(r=e.v){e.n=3;break}return e.a(2,null);case 3:return o=n?this.decrypt(r):r,e.a(2,o);case 4:throw e.p=4,i=e.v,new Error("Failed to retrieve item with key ".concat(t,": ").concat(i));case 5:return e.a(2)}},e,this,[[1,4]])})),function(e){return l.apply(this,arguments)})},{key:"removeItem",value:(u=S(b().m(function e(t){var n;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.removeItem(t);case 1:e.n=3;break;case 2:throw e.p=2,n=e.v,new Error("Failed to remove item with key ".concat(t,": ").concat(n));case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return u.apply(this,arguments)})},{key:"clear",value:(s=S(b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.clear();case 1:e.n=3;break;case 2:throw e.p=2,t=e.v,new Error("Failed to clear storage: ".concat(t));case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return s.apply(this,arguments)})},{key:"getAllKeys",value:(c=S(b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.getAllKeys();case 1:return e.a(2,e.v);case 2:throw e.p=2,t=e.v,new Error("Failed to get all keys: ".concat(t));case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return c.apply(this,arguments)})},{key:"hasKey",value:(a=S(b().m(function e(t){var n,r;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.getItem(t);case 1:return n=e.v,e.a(2,null!==n);case 2:throw e.p=2,r=e.v,new Error("Failed to check key existence: ".concat(r));case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return a.apply(this,arguments)})},{key:"encrypt",value:function(e){try{return o().AES.encrypt(e,this.encryptionKey).toString()}catch(e){throw new Error("Encryption failed: ".concat(e))}}},{key:"decrypt",value:function(e){try{var t=o().AES.decrypt(e,this.encryptionKey).toString(o().enc.Utf8);if(!t)throw new Error("Decryption resulted in empty data");return t}catch(e){throw new Error("Decryption failed: ".concat(e))}}},{key:"setJSON",value:(i=S(b().m(function e(t,n){var r,o,i=arguments;return b().w(function(e){for(;;)switch(e.n){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],o=JSON.stringify(n),e.n=1,this.setItem(t,o,r);case 1:return e.a(2)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"getJSON",value:(r=S(b().m(function e(t){var n,r,o,i=arguments;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],e.n=1,this.getItem(t,n);case 1:if(r=e.v){e.n=2;break}return e.a(2,null);case 2:return e.p=2,e.a(2,JSON.parse(r));case 3:throw e.p=3,o=e.v,new Error("Failed to parse JSON for key ".concat(t,": ").concat(o));case 4:return e.a(2)}},e,this,[[2,3]])})),function(e){return r.apply(this,arguments)})}],t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,a,c,s,u,l,f}(),C=new A}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every(e=>r.O[e](n[s]))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,c,s]=n,u=0;if(a.some(t=>0!==e[t])){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var l=s(r)}for(t&&t(n);u<a.length;u++)i=a[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self.webpackChunkbuddy_mate=self.webpackChunkbuddy_mate||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[96],()=>r(6495));o=r.O(o)})();